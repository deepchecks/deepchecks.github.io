
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

<!-- Google Tag Manager -->
<!--<script>(function (w, d, s, l, i) {-->
<!--        w[l] = w[l] || []; w[l].push({-->
<!--            'gtm.start':-->
<!--                new Date().getTime(), event: 'gtm.js'-->
<!--        }); var f = d.getElementsByTagName(s)[0],-->
<!--            j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =-->
<!--                'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);-->
<!--    })(window, document, 'script', 'dataLayer', 'GTM-NNKXRJQ');</script>-->
<!-- End Google Tag Manager -->
<meta name="title" content="Setting Up a New Tabular Model | Deepchecks Documentation">
<meta name="description" content="Do you need to know more about Setting Up a New Tabular Model? Read more at Deepchecks Online Documentation">
<meta name="docsearch:version" content="">


<!-- Warning: 
        The 'shortcut link' type is often seen before icon, but this link type is non-conforming, 
        ignored and web authors must not use it anymore. 
        MDN docs https://developer.mozilla.org/en-US/docs/Web/HTML/Link_types
    -->
<link rel="shortcut icon" href="/_static/favicons/favicon.ico">
<!--<link rel="canonical" href="https://docs.deepchecks.com/stable/user-guide/tabular/tabular_setup.html" />-->

<link rel="icon" href="/_static/favicons/favicon.png" sizes="32x32">
<link rel="icon" href="/_static/favicons/favicon.png" sizes="192x192">

<!-- Note: 
        Apple's iOS does not use this 'link' type, nor the 'sizes' attribute, 
        like others mobile browsers do, to select a webpage icon for Web Clip 
        or a start-up placeholder. Instead it uses the non-standard 'apple-touch-icon'.
        MDN docs: https://developer.mozilla.org/en-US/docs/Web/HTML/Link_types;
        Safari Web Content Guide: https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html#//apple_ref/doc/uid/TP40002051-CH3-SW4
    -->
<link rel="apple-touch-icon" href="/_static/favicons/apple-touch-icon.png" sizes="32x32">
<link rel="apple-touch-icon" href="/_static/favicons/apple-touch-icon.png" sizes="192x192">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />


    <title>Setting Up a New Tabular Model &#8212; Deepchecks Monitoring  documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" crossorigin="anonymous"></script>
<script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"
    crossorigin="anonymous"></script>

    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Vision Quickstarts" href="../vision/auto_quickstarts/index.html" />
    <link rel="prev" title="Quickstart - Get Deepchecks Monitoring Up and Running" href="auto_quickstarts/plot_quickstart.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>

<body data-spy="scroll" data-target="#bd-toc-nav">
    <!-- Google Tag Manager (noscript) -->
<!--    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NNKXRJQ" height="0" width="0"-->
<!--            style="display:none;visibility:hidden"></iframe></noscript>-->
    <!-- End Google Tag Manager (noscript) -->
    <script>
        require.config({
            paths: {
                "docsearchLib": "https://cdn.jsdelivr.net/npm/@docsearch/js@3?noext",
                "clipboardjs": "//_static/clipboard.min"
            }
        }

        );
        // require(["docsearchLib"], function (docsearch) {
        //     docsearch({
        //         appId: "3UQ0BSGJ1N", apiKey: "83d250f88e29e9906a50ddf40a1871ce", indexName: "deepchecks", container: '#algolia-search', debug: false,
        //         searchParameters: {
        //             facetFilters: ["version:"]
        //         }
        //     });
        // });
        require(["clipboardjs"], function(clipboardJS) {
            window.ClipboardJS=clipboardJS
        });
    </script>
    <script data-url_root="/" id="documentation_options" src="//_static/documentation_options.js"></script>
    <script src="//_static/copybutton.js"></script>

    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../index.html">
  <img src="../../_static/deepchecks_logo.svg" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../index.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../api/index.html">
  API Reference
 </a>
</li>

    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://staging-v2.deepchecks.com/docs">API Docs<i class="fas fa-external-link-alt"></i></a>
    </li>
    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Quick Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/deepchecks/deepchecks" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://deepchecks.com/slack" rel="noopener" target="_blank" title="Slack"><span><i class="fab fa-slack"></i></span>
            <label class="sr-only">Slack</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://pypi.org/project/deepchecks/" rel="noopener" target="_blank" title="PyPI"><span><i class="fab fa-python"></i></span>
            <label class="sr-only">PyPI</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  General
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../general/concepts.html">
   Concepts
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Tabular
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="auto_quickstarts/index.html">
   Tabular Quickstarts
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="auto_quickstarts/plot_quickstart.html">
     Quickstart - Get Deepchecks Monitoring Up and Running
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Setting Up a New Tabular Model
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Vision
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../vision/auto_quickstarts/index.html">
   Vision Quickstarts
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../vision/auto_quickstarts/plot_quickstart.html">
     Quickstart - Get Deepchecks Monitoring Up and Running for Computer Vision Data
    </a>
   </li>
  </ul>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#creating-a-new-model">
   Creating a New Model
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#deleting-a-model">
     Deleting a Model
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#creating-a-new-model-version">
   Creating a New Model Version
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#schema-file">
     Schema File
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#feature-importance">
     Feature Importance
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#uploading-a-reference-dataset">
     Uploading a Reference Dataset
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
              </div>
              
            
          </div>
          

          
    
        
    
    <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
        
            <div>
                
  <section id="setting-up-a-new-tabular-model">
<span id="tabular-setup"></span><h1>Setting Up a New Tabular Model<a class="headerlink" href="#setting-up-a-new-tabular-model" title="Permalink to this headline">#</a></h1>
<p>This guide provides a deep dive into the process and reviews the different options for setting up a new tabular
model and model version. For a more streamlined guide that will quickly take you through the essentials of getting
started with deepchecks for tabular data, see the
<a class="reference internal" href="auto_quickstarts/plot_quickstart.html"><span class="doc">Tabular Quickstart</span></a>.</p>
<p>In order to start working with deepchecks, you must first instantiate a
<a class="reference internal" href="../../api/generated/deepchecks_client.DeepchecksClient.html#deepchecks_client.DeepchecksClient" title="deepchecks_client.DeepchecksClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeepchecksClient</span> <span class="pre">(API</span> <span class="pre">reference)</span></code></a> object. To do that, first generate a
personal API token using the application’s dashboard:</p>
<a class="reference internal image-reference" href="../../_images/get_api_token.png"><img alt="../../_images/get_api_token.png" src="../../_images/get_api_token.png" style="width: 600px;" /></a>
<p>Then you should create the <a class="reference internal" href="../../api/generated/deepchecks_client.DeepchecksClient.html#deepchecks_client.DeepchecksClient" title="deepchecks_client.DeepchecksClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeepchecksClient</span> <span class="pre">(API</span> <span class="pre">reference)</span></code></a> object:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">deepchecks_client</span> <span class="kn">import</span> <span class="n">DeepchecksClient</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">host</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;DEEPCHECKS_API_HOST&#39;</span><span class="p">)</span>  <span class="c1"># Replace this with https://app.deepchecks.com</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># note to put the API token in your environment variables. Or alternatively (less recommended):</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># os.environ[&#39;DEEPCHECKS_API_TOKEN&#39;] = &#39;uncomment-this-line-and-insert-your-api-token-here&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc_client</span> <span class="o">=</span> <span class="n">DeepchecksClient</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">host</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;DEEPCHECKS_API_TOKEN&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>Once you have the client all set up, this guide will walk you through the following steps:</p>
<ol class="arabic simple">
<li><p><a class="reference external" href="#creating-a-new-model">Creating a New Model</a></p></li>
<li><p><a class="reference external" href="#creating-a-new-model-version">Creating a New Model Version</a></p></li>
<li><p><a class="reference external" href="#uploading-a-reference-dataset">Uploading a Reference Dataset</a></p></li>
</ol>
<p>There are two distinct ways to set up a new tabular model. The “fast” way that is demonstrated in the
<a class="reference internal" href="auto_quickstarts/plot_quickstart.html"><span class="doc">tabular quickstart</span></a> handles the model creation, model
version creation, and reference dataset upload in a single call to the
<a class="reference internal" href="../../api/generated/deepchecks_client.DeepchecksClient.create_tabular_model_version.html#deepchecks_client.DeepchecksClient.create_tabular_model_version" title="deepchecks_client.DeepchecksClient.create_tabular_model_version"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_tabular_model_version</span></code></a> method of the
DeepchecksClient object. In this guide, we will cover each of these individual steps for setting up a
new tabular model in depth, and discuss their optional parameters in greater detail. All configuration options described
here for the individual steps are also available in the <a class="reference internal" href="../../api/generated/deepchecks_client.DeepchecksClient.create_tabular_model_version.html#deepchecks_client.DeepchecksClient.create_tabular_model_version" title="deepchecks_client.DeepchecksClient.create_tabular_model_version"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_tabular_model_version</span></code></a>  method, so this guide is the
place to go also for a more detailed understanding of the options available in the quickstart.</p>
<section id="creating-a-new-model">
<h2>Creating a New Model<a class="headerlink" href="#creating-a-new-model" title="Permalink to this headline">#</a></h2>
<p>In Deepchecks, a model represents a ML pipeline performing a single task in production. The model groups together
all the model versions that are performing the same task, e.g. versions representing model retrains.</p>
<p>Creating a model is our first and simplest step, as it only requires the model name, and a task type. The model name
is a unique identifier for the model and will be shown in the deepchecks monitoring system and used to later add
versions, monitors and alerts to that model. Models task types should be set according to the kind of task they perform
and the type of data they run on. Possible task types are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">binary</span></code> - Binary classification on tabular data</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">multiclass</span></code> - Multiclass classification on tabular data</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">regression</span></code> - Regression on tabular data</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vision_classification</span></code> - Classification on image data</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vision_detection</span></code> - Object detection on image data</p></li>
</ul>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">model_name</span> <span class="o">=</span> <span class="s1">&#39;my_model&#39;</span>  <span class="c1"># Replace with your model name</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">dc_client</span><span class="o">.</span><span class="n">get_or_create_model</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span> <span class="n">task_type</span><span class="o">=</span><span class="s1">&#39;regression&#39;</span><span class="p">)</span>
<span class="go">Model my_model was successfully created!. Default checks, monitors and alerts added.</span>
</pre></div>
</div>
<p>The same <a class="reference internal" href="../../api/generated/deepchecks_client.DeepchecksClient.get_or_create_model.html#deepchecks_client.DeepchecksClient.get_or_create_model" title="deepchecks_client.DeepchecksClient.get_or_create_model"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_or_create_model</span></code></a> can be used to
retrieve an existing model, if it already exists. In this case, the task type parameter is not needed.</p>
<p>Additional optional parameters for the model creation are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">description</span></code> - A description of the model. What is the task this ML pipeline is performing? This will be displayed
alongside the model in the deepchecks monitoring system.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">create_defaults</span></code> - Whether to add default checks, monitors and alerts to the model. Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>, but you can
set it to <code class="docutils literal notranslate"><span class="pre">False</span></code> if you want to later manually add only the checks, monitors and alerts relevant to your use case.</p></li>
</ul>
<section id="deleting-a-model">
<h3>Deleting a Model<a class="headerlink" href="#deleting-a-model" title="Permalink to this headline">#</a></h3>
<p>You can always delete a model using:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dc_client</span><span class="o">.</span><span class="n">delete_model</span><span class="p">(</span><span class="n">model_name</span><span class="p">)</span>
<span class="go">The following model was successfully deleted: my_model</span>
</pre></div>
</div>
<div class="caution admonition">
<p class="admonition-title">Permanently Deleting a Model</p>
<p>This will delete the model, all model versions, and all associated datasets, so do that only if you are sure.</p>
</div>
</section>
</section>
<section id="creating-a-new-model-version">
<h2>Creating a New Model Version<a class="headerlink" href="#creating-a-new-model-version" title="Permalink to this headline">#</a></h2>
<p>A model version represents an instance of the model trained on specific data. Specifically, each change in the data
schema must be mapped to a new model version. In addition, in most cases, it is also
recommended to create a new model version after each retraining of the model for analysis purposes.
A model may have one or more model versions.</p>
<p>A model version is created by calling <a class="reference internal" href="../../api/generated/deepchecks_client.core.client.DeepchecksModelClient.version.html#deepchecks_client.core.client.DeepchecksModelClient.version" title="deepchecks_client.core.client.DeepchecksModelClient.version"><code class="xref py py-meth docutils literal notranslate"><span class="pre">version</span></code></a>.
Apart from its name, there are a couple of other important arguments to this method:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">schema</span></code> (mandatory) - A file or dict describing the types and roles of the columns in the dataset. See
the <a class="reference external" href="#schema-file">“Schema File” section</a> for more details.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">feature_importance</span></code> (recommended) - A dict or pandas Series containing the feature importance of the model. See
the <a class="reference external" href="#feature-importance">“Feature Importance” section</a> for more details.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">model_classes</span></code> (recommended) - An alphanumerically sorted list of the names of classes used by the model. This is
only relevant for classification models. Deepchecks uses this list to know which classes the model was trained on and
in what order they appear in the model’s predicted probability array. This is mandatory for cases in which not all
possible labels are present in some window of the production data.</p></li>
</ul>
<p>An example of creating a model version (for a regression model, so <code class="docutils literal notranslate"><span class="pre">model_classes</span></code> is not needed):</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">model_version</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">version</span><span class="p">(</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span> <span class="n">feature_importance</span><span class="o">=</span><span class="n">feature_importance</span><span class="p">)</span>
<span class="go">Model version v1 was successfully created.</span>
</pre></div>
</div>
<section id="schema-file">
<h3>Schema File<a class="headerlink" href="#schema-file" title="Permalink to this headline">#</a></h3>
<p>A schema file is a prerequisite for creating a new model version. The schema file is a YAML file that
describes the types and roles of the columns in the version data. The file can either be manually created, or generated
using the <a class="reference internal" href="../../api/generated/deepchecks_client.tabular.utils.create_schema.html#deepchecks_client.tabular.utils.create_schema" title="deepchecks_client.tabular.utils.create_schema"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_schema</span></code></a> method of the DeepchecksClient object.</p>
<p>The schema file must be in the structure demonstrated in the example below:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">features</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">numeric_feature</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">numeric</span><span class="w"></span>
<span class="w">    </span><span class="nt">categorical_feature</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">categorical</span><span class="w"></span>
<span class="nt">additional_data</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">categorical_metadata</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">categorical</span><span class="w"></span>
<span class="w">    </span><span class="nt">timestamp_meta_data</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">datetime</span><span class="w"></span>
<span class="w">    </span><span class="nt">id_meta_data</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span><span class="w"></span>
<span class="w">    </span><span class="nt">numeric_metadata</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">numeric</span><span class="w"></span>
</pre></div>
</div>
<p>Essentially the YAML file is a dictionary with two keys: <code class="docutils literal notranslate"><span class="pre">features</span></code> and <code class="docutils literal notranslate"><span class="pre">additional_data</span></code>. The <code class="docutils literal notranslate"><span class="pre">features</span></code> key
contains a dictionary of the features in the data, and their types. The <code class="docutils literal notranslate"><span class="pre">additional_data</span></code> is the same for columns that
are not used by the model itself - for e.g. metadata columns (such as user id, ip address, demographic data not
used as a feature and so on). Columns with special roles, such as the label and
index columns, should not appear in the schema file. While the data must have a main index that is unique for each row
and is <strong>not</strong> part of the schema file, the <code class="docutils literal notranslate"><span class="pre">additional_data</span></code> in the schema can denote secondary indices, such as
a user id.</p>
<p>The column types can be one of the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">numeric</span></code> - A numeric column - a numeric column with float or integer values</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">integer</span></code> - An integer column - a numeric column with strictly integer values</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">categorical</span></code> - A categorical column (string or integer)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boolean</span></code> - A boolean column (True or False)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">text</span></code> - A text column - usually used to describe a metadata column containing text</p></li>
</ul>
<p>We’ll show an example for using this method on the
<a class="reference external" href="https://www.kaggle.com/datasets/dgomonov/new-york-city-airbnb-open-data">Airbnb rent regression dataset</a>, in which
the rent of the Airbnb unit is predicted from a set of features describing the rental unit. We’ll also be using
this dataset for the rest of the guide.</p>
<p>Automatically creating a schema file using the <a class="reference internal" href="../../api/generated/deepchecks_client.tabular.utils.create_schema.html#deepchecks_client.tabular.utils.create_schema" title="deepchecks_client.tabular.utils.create_schema"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_schema</span></code></a>
method requires a deepchecks <a class="reference external" href="https://docs.deepchecks.com/stable/user-guide/tabular/dataset_object.html" title="(in Deepchecks v0.9)"><span class="xref std std-doc">Dataset</span></a> object. The dataset object
is a wrapper around the data itself that provides additional information about the data, such as the column roles.
In the following example we’ll use an already existing dataset object.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">deepchecks.tabular.datasets.regression.airbnb</span> <span class="kn">import</span> <span class="n">load_data</span><span class="p">,</span> <span class="n">load_pre_calculated_prediction</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">ref_dataset</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="n">data_format</span><span class="o">=</span><span class="s1">&#39;Dataset&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">deepchecks_client</span> <span class="kn">import</span> <span class="n">create_schema</span><span class="p">,</span> <span class="n">read_schema</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">schema_file_path</span> <span class="o">=</span> <span class="s1">&#39;schema_file.yaml&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">create_schema</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="n">ref_dataset</span><span class="p">,</span> <span class="n">schema_output_file</span><span class="o">=</span><span class="n">schema_file_path</span><span class="p">)</span>
<span class="go">Schema was successfully generated and saved to schema_file.yaml.</span>
</pre></div>
</div>
<p>This will create a schema file in the current directory.</p>
<div class="attention admonition">
<p class="admonition-title">Reviewing the Schema File</p>
<p>It is highly recommended to manually review the created schema file before moving forward to creating the model
version, as create_schema may fail to infer the type and role of some columns, or infer them incorrectly.</p>
</div>
<p>If the method has failed to infer the type of a column, it’s type will be <cite>none</cite> and you should manually set it to the
correct type. Additionally, the only way the method has of inferring whether a column is a feature or additional_data
is if this information was defined within the Dataset object. If that information is missing, the column will be
classified as a feature, and you should manually change it to additional_data if that is the case.</p>
<p>An alternative method for editing and passing the schema is as a dict. You can then load the file to a dict using
the <a class="reference internal" href="../../api/generated/deepchecks_client.tabular.utils.read_schema.html#deepchecks_client.tabular.utils.read_schema" title="deepchecks_client.tabular.utils.read_schema"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_schema</span></code></a> method:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="n">read_schema</span><span class="p">(</span><span class="n">schema_file_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pprint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>
<span class="go">{&#39;additional_data&#39;: {},</span>
<span class="go"> &#39;features&#39;: {&#39;availability_365&#39;: &#39;integer&#39;,</span>
<span class="go">              &#39;calculated_host_listings_count&#39;: &#39;integer&#39;,</span>
<span class="go">              &#39;has_availability&#39;: &#39;categorical&#39;,</span>
<span class="go">              &#39;minimum_nights&#39;: &#39;integer&#39;,</span>
<span class="go">              &#39;neighbourhood&#39;: &#39;categorical&#39;,</span>
<span class="go">              &#39;neighbourhood_group&#39;: &#39;categorical&#39;,</span>
<span class="go">              &#39;number_of_reviews&#39;: &#39;integer&#39;,</span>
<span class="go">              &#39;reviews_per_month&#39;: &#39;numeric&#39;,</span>
<span class="go">              &#39;room_type&#39;: &#39;categorical&#39;}}</span>
</pre></div>
</div>
<p>You can set the <a class="reference internal" href="../../api/generated/deepchecks_client.tabular.utils.read_schema.html#deepchecks_client.tabular.utils.read_schema" title="deepchecks_client.tabular.utils.read_schema"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_schema</span></code></a> method to fail if there are any invalid
(type <cite>none</cite>) columns by setting:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="n">read_schema</span><span class="p">(</span><span class="n">schema_file_path</span><span class="p">,</span> <span class="n">fail_on_invalid_column</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="feature-importance">
<h3>Feature Importance<a class="headerlink" href="#feature-importance" title="Permalink to this headline">#</a></h3>
<p>Deepchecks uses feature importance to prioritize the display of features
within checks and to weigh the drift of different features among other things. While passing feature importance isn’t
mandatory, the quality of the displayed results and alerts that can be received will be significantly better if feature
importance is provided.</p>
<p>Feature importance can either be a dict of feature names to their importance, or a pandas Series with the feature names
as the index and the importance as the values. The importance is a positive numeric value, normalized such that the sum
of the values for all of the features is 1.</p>
<p>If you do not have the feature importance for your features ready, you can use deepchecks OSS built-in
feature importance calculation method:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">deepchecks.tabular.feature_importance</span> <span class="kn">import</span> <span class="n">calculate_feature_importance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">feature_importance</span> <span class="o">=</span> <span class="n">calculate_feature_importance</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="n">ref_dataset</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="n">my_model</span><span class="p">)</span>
</pre></div>
</div>
<p>For more details about computing feature importance and it’s uses in deepchecks, see the
<a class="reference external" href="https://docs.deepchecks.com/stable/user-guide/tabular/feature_importance.html" title="(in Deepchecks v0.9)"><span class="xref std std-doc">feature importance guide</span></a>.</p>
</section>
<section id="uploading-a-reference-dataset">
<h3>Uploading a Reference Dataset<a class="headerlink" href="#uploading-a-reference-dataset" title="Permalink to this headline">#</a></h3>
<p>Reference data is a dataset to which we wish to compare our production data stream for a given model version. Providing
reference data is optional, yet many important <a class="reference external" href="https://docs.deepchecks.com/stable/user-guide/general/deepchecks_hierarchy.html" title="(in Deepchecks v0.9)"><span class="xref std std-doc">checks</span></a> such as
<a class="reference external" href="https://docs.deepchecks.com/stable/checks_gallery/tabular/train_test_validation/plot_train_test_feature_drift.html" title="(in Deepchecks v0.9)"><span class="xref std std-doc">Train Test Feature Drift (Tabular Version)</span></a>
cannot run without it.</p>
<p>The reference data must be a deepchecks <a class="reference external" href="https://docs.deepchecks.com/stable/user-guide/tabular/dataset_object.html" title="(in Deepchecks v0.9)"><span class="xref std std-doc">Dataset</span></a> object. We’ll use
the dataset object already used earlier in this guide to create the schema file.</p>
<p>Apart from the dataset itself that contains the features, metadata and labels, we must also provide the model
<code class="docutils literal notranslate"><span class="pre">predictions</span></code>. The model predictions are a numpy array containing the predicted class for each row in the dataset.</p>
<div class="important admonition">
<p class="admonition-title">Predicted Probabilities - for Classification Tasks</p>
<p>For classification models we may also provide the model <code class="docutils literal notranslate"><span class="pre">prediction_probas</span></code>. These are the model’s
predicted probabilities for each class and row in the dataset. The probabilities must be a numpy array of shape
<code class="docutils literal notranslate"><span class="pre">(n_samples,</span> <span class="pre">n_classes)</span></code>, when the i-th column corresponds to the predicted probability for the class in the i-th
place in the alphanumerically sorted list of model classes (see the <code class="docutils literal notranslate"><span class="pre">model_classes</span></code> argument of the
<a class="reference internal" href="../../api/generated/deepchecks_client.core.client.DeepchecksModelClient.version.html#deepchecks_client.core.client.DeepchecksModelClient.version" title="deepchecks_client.core.client.DeepchecksModelClient.version"><code class="xref py py-meth docutils literal notranslate"><span class="pre">version</span></code></a> method). Providing the
probabilities will enable Deepchecks to compute probability-dependant metrics such as ROC AUC and let it compute
better drift scores on the model predictions.</p>
</div>
<p>To upload reference data for the previously created version, simply run:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">model_version</span><span class="o">.</span><span class="n">upload_reference</span><span class="p">(</span><span class="n">ref_dataset</span><span class="p">,</span> <span class="n">predictions</span><span class="o">=</span><span class="n">ref_predictions</span><span class="p">)</span>
<span class="go">Reference data uploaded.</span>
</pre></div>
</div>
<p>Not providing <code class="docutils literal notranslate"><span class="pre">prediction_probas</span></code> in this case, as it is a regression task.</p>
<div class="note admonition">
<p class="admonition-title">Selecting the Reference Data</p>
<p>It is important that the reference data represents the data distribution of a dataset on which we are reasonably
certain the model performs well. Typically this will be the dataset on which the model was trained, but it is not
uncommon for production data to have an inherently different distribution or schema than the training data
(e.g. different class distribution), or for training data to be entirely unavailable.
In such cases, the reference data can be for example the first month of production data or a sample thereof, given
that we have made sure that the model’s performance on this data is acceptable.</p>
</div>
</section>
</section>
</section>


            </div>
        
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="auto_quickstarts/plot_quickstart.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Quickstart - Get Deepchecks Monitoring Up and Running</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../vision/auto_quickstarts/index.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Vision Quickstarts</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
    </main>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022, Deepchecks.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>