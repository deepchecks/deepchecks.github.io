
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T7QZJCX');</script>
<!-- End Google Tag Manager -->
<meta name="title" content="Preparing Your Tabular Data for Deepchecks Monitoring | Deepchecks Documentation">
<meta name="description" content="Do you need to know more about Preparing Your Tabular Data for Deepchecks Monitoring? Read more at Deepchecks Online Documentation">
<meta name="docsearch:version" content="">


<!-- Warning: 
        The 'shortcut link' type is often seen before icon, but this link type is non-conforming, 
        ignored and web authors must not use it anymore. 
        MDN docs https://developer.mozilla.org/en-US/docs/Web/HTML/Link_types
    -->
<link rel="shortcut icon" href="/_static/favicons/favicon.ico">
<!--<link rel="canonical" href="https://docs.deepchecks.com/stable/user-guide/tabular/auto_quickstarts/plot_prepare_your_data.html" />-->

<link rel="icon" href="/_static/favicons/favicon.png" sizes="32x32">
<link rel="icon" href="/_static/favicons/favicon.png" sizes="192x192">

<!-- Note: 
        Apple's iOS does not use this 'link' type, nor the 'sizes' attribute, 
        like others mobile browsers do, to select a webpage icon for Web Clip 
        or a start-up placeholder. Instead it uses the non-standard 'apple-touch-icon'.
        MDN docs: https://developer.mozilla.org/en-US/docs/Web/HTML/Link_types;
        Safari Web Content Guide: https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html#//apple_ref/doc/uid/TP40002051-CH3-SW4
    -->
<link rel="apple-touch-icon" href="/_static/favicons/apple-touch-icon.png" sizes="32x32">
<link rel="apple-touch-icon" href="/_static/favicons/apple-touch-icon.png" sizes="192x192">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />


    <title>Preparing Your Tabular Data for Deepchecks Monitoring &#8212; Deepchecks Monitoring  documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" crossorigin="anonymous"></script>
<script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"
    crossorigin="anonymous"></script>

    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Quickstart - Get Deepchecks Monitoring Up and Running" href="plot_quickstart.html" />
    <link rel="prev" title="Tabular Quickstarts" href="index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>

<body data-spy="scroll" data-target="#bd-toc-nav">

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T7QZJCX"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    <script>
        require.config({
            paths: {
                "docsearchLib": "https://cdn.jsdelivr.net/npm/@docsearch/js@3?noext",
                "clipboardjs": "//_static/clipboard.min"
            }
        }

        );
        // require(["docsearchLib"], function (docsearch) {
        //     docsearch({
        //         appId: "3UQ0BSGJ1N", apiKey: "83d250f88e29e9906a50ddf40a1871ce", indexName: "deepchecks", container: '#algolia-search', debug: false,
        //         searchParameters: {
        //             facetFilters: ["version:"]
        //         }
        //     });
        // });
        require(["clipboardjs"], function(clipboardJS) {
            window.ClipboardJS=clipboardJS
        });
    </script>
    <script data-url_root="/" id="documentation_options" src="//_static/documentation_options.js"></script>
    <script src="//_static/copybutton.js"></script>

    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../../index.html">
  <img src="../../../_static/deepchecks_logo.svg" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../getting-started/index.html">
  Getting Started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../installation/index.html">
  Installation
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../../index.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../api/index.html">
  API Reference
 </a>
</li>

    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://staging-v2.deepchecks.com/docs">API Docs<i class="fas fa-external-link-alt"></i></a>
    </li>
    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Quick Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/deepchecks/deepchecks" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://deepchecks.com/slack" rel="noopener" target="_blank" title="Slack"><span><i class="fab fa-slack"></i></span>
            <label class="sr-only">Slack</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://pypi.org/project/deepchecks/" rel="noopener" target="_blank" title="PyPI"><span><i class="fab fa-python"></i></span>
            <label class="sr-only">PyPI</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  General
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../general/workspace_and_users.html">
   Workspace &amp; Users
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../general/concepts.html">
   Concepts
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../general/faq.html">
   FAQ
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../general/aggregation_methods.html">
   Aggregation Methods
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../general/scorers.html">
   Scorers for Metric Evaluation
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Tabular
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   Tabular Quickstarts
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Preparing Your Tabular Data for Deepchecks Monitoring
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="plot_quickstart.html">
     Quickstart - Get Deepchecks Monitoring Up and Running
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tabular_setup.html">
   Setting Up a New Tabular Model
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tabular_production.html">
   Sending Tabular Production Data
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  User Interface
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../user_interface/dashboard.html">
   Dashboard
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../user_interface/alerts.html">
   Alerts
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../user_interface/analysis.html">
   Analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../user_interface/configuration.html">
   Configuration
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Examples
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../auto_demos/index.html">
   Demos
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../auto_demos/plot_rent_prediction.html">
     Predicting Rent Prices (Regression)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../auto_demos/plot_lending_defaults.html">
     Predicting Loan Defaults (Classification)
    </a>
   </li>
  </ul>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-you-need-to-get-through-the-tutorial">
   What You Need to Get Through the Tutorial
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#preparing-your-data">
   Preparing Your Data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#preparing-the-reference-data-optional">
     Preparing the Reference Data (Optional)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-the-data-schema">
     Creating the Data Schema
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#preparing-the-production-data">
     Preparing the Production Data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#supplying-model-predictions">
     Supplying Model Predictions
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
              </div>
              
            
          </div>
          

          
    
        
    
    <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
        
            <div>
                
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#sphx-glr-download-user-guide-tabular-auto-quickstarts-plot-prepare-your-data-py"><span class="std std-ref">Go to the end</span></a>
to download the full example code</p>
</div>
<section class="sphx-glr-example-title" id="preparing-your-tabular-data-for-deepchecks-monitoring">
<span id="prepare-your-data"></span><span id="sphx-glr-user-guide-tabular-auto-quickstarts-plot-prepare-your-data-py"></span><h1>Preparing Your Tabular Data for Deepchecks Monitoring<a class="headerlink" href="#preparing-your-tabular-data-for-deepchecks-monitoring" title="Permalink to this headline">#</a></h1>
<section id="what-you-need-to-get-through-the-tutorial">
<h2>What You Need to Get Through the Tutorial<a class="headerlink" href="#what-you-need-to-get-through-the-tutorial" title="Permalink to this headline">#</a></h2>
<p>The in order to start monitoring your tabular data and model using Deepchecks you will need to have the following
pre-requisites:</p>
<ul class="simple">
<li><p>Data which can be loaded into a pandas DataFrame. This can be a csv file, a database connection or any other.</p></li>
<li><p>A timestamp column in your data. This column will be used to identify the time of the sample and will be used to
monitor the data over time. In most cases, the time of the model prediction will be a good choice.</p></li>
<li><p>A working python environment with deepchecks and deepchecks-client installed. See
<a class="reference internal" href="plot_quickstart.html"><span class="doc">quickstart guide</span></a> for additional details.</p></li>
</ul>
<p>All the pre-requisites are fulfilled? Great! Let’s get started.</p>
</section>
<section id="preparing-your-data">
<h2>Preparing Your Data<a class="headerlink" href="#preparing-your-data" title="Permalink to this headline">#</a></h2>
<p>In this short tutorial we’ll go over the required steps in order to prepare your data
for Deepchecks Monitoring which include:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#prepare-your-data-reference-data"><span class="std std-ref">Preparing the Reference Data</span></a> (Optional)</p></li>
<li><p><a class="reference internal" href="#prepare-your-data-data-schema"><span class="std std-ref">Creating a Data Schema</span></a></p></li>
<li><p><a class="reference internal" href="#prepare-your-data-production-data"><span class="std std-ref">Preparing the Production Data</span></a></p></li>
<li><p><a class="reference internal" href="#prepare-your-data-model-predictions"><span class="std std-ref">Supplying Model Predictions</span></a> (Optional)</p></li>
</ol>
<p>After this tutorial you will have a ready to go setup in order to start monitoring your data and model using
Deepchecks. See <a class="reference internal" href="../tabular_setup.html"><span class="doc">Setup Guide</span></a> for a follow-up tutorial on
setting up your monitoring system.</p>
<p>In this tutorial we will use the <a class="reference external" href="https://www.kaggle.com/datasets/wordsforthewise/lending-club">Lending Club loan data</a> which is stored in two csv files, one containing the
data used for the model training (reference data) and the other containing the production data. It is preferable to run
this tutorial on your own data or one that you are familiar with.</p>
<section id="preparing-the-reference-data-optional">
<h3>Preparing the Reference Data (Optional)<a class="headerlink" href="#preparing-the-reference-data-optional" title="Permalink to this headline">#</a></h3>
<p>Reference data represent the data used for model training and is required in order to run checks which compare
the production data to the reference data. An example of such a check is the
<span class="xref std std-doc">Feature Drift</span> check.</p>
<p>We will load the reference data from a csv file and use it to create a
<span class="xref std std-doc">Dataset</span> object which is used in order to create the
data schema and upload the reference data to the monitoring system.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">train_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://figshare.com/ndownloader/files/39316160&#39;</span><span class="p">)</span>
<span class="n">train_df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>issue_d</th>
      <th>sub_grade</th>
      <th>term</th>
      <th>home_ownership</th>
      <th>fico_range_low</th>
      <th>total_acc</th>
      <th>pub_rec</th>
      <th>revol_util</th>
      <th>annual_inc</th>
      <th>int_rate</th>
      <th>dti</th>
      <th>purpose</th>
      <th>mort_acc</th>
      <th>loan_amnt</th>
      <th>application_type</th>
      <th>installment</th>
      <th>verification_status</th>
      <th>pub_rec_bankruptcies</th>
      <th>addr_state</th>
      <th>initial_list_status</th>
      <th>fico_range_high</th>
      <th>revol_bal</th>
      <th>id</th>
      <th>open_acc</th>
      <th>emp_length</th>
      <th>loan_status</th>
      <th>time_to_earliest_cr_line</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2014-01-01</td>
      <td>D1</td>
      <td>60 months</td>
      <td>MORTGAGE</td>
      <td>660.0</td>
      <td>18.0</td>
      <td>0.0</td>
      <td>86.8</td>
      <td>40440.0</td>
      <td>16.99</td>
      <td>15.16</td>
      <td>credit_card</td>
      <td>1.0</td>
      <td>17775.0</td>
      <td>Individual</td>
      <td>441.66</td>
      <td>Verified</td>
      <td>0.0</td>
      <td>AR</td>
      <td>f</td>
      <td>664.0</td>
      <td>17264.0</td>
      <td>11024793</td>
      <td>11.0</td>
      <td>2.0</td>
      <td>1</td>
      <td>478656.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2014-01-01</td>
      <td>C4</td>
      <td>60 months</td>
      <td>MORTGAGE</td>
      <td>740.0</td>
      <td>26.0</td>
      <td>0.0</td>
      <td>103.5</td>
      <td>59000.0</td>
      <td>15.61</td>
      <td>16.74</td>
      <td>credit_card</td>
      <td>4.0</td>
      <td>29175.0</td>
      <td>Individual</td>
      <td>703.45</td>
      <td>Verified</td>
      <td>0.0</td>
      <td>VT</td>
      <td>f</td>
      <td>744.0</td>
      <td>6725.0</td>
      <td>10596078</td>
      <td>8.0</td>
      <td>3.0</td>
      <td>1</td>
      <td>541728.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<br />
<br /><p>So what do we have? Let’s note the special columns in our data:</p>
<ol class="arabic simple">
<li><p>issue_d - The timestamp of the sample (This is unnecessary for reference data, but is required for production data)</p></li>
<li><p>id - the id of the loan application</p></li>
<li><p>loan_status - Our label, which is the final status of the loan. 0 means “paid in full”, and 1 are defaults.</p></li>
</ol>
<p>All the other columns are features that can be used by our model to predict whether the user will default or not.</p>
<p>In order to create a Dataset object we must specify the name of the label column and which features are categorical.
If the data contains a datetime column, index column or other columns which are not features, we need to also pass
a features argument containing the features column names.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">deepchecks.tabular</span> <span class="kn">import</span> <a href="https://docs.deepchecks.com/stable/api/deepchecks.tabular.html#deepchecks.tabular.Dataset" title="deepchecks.tabular.dataset.Dataset" class="sphx-glr-backref-module-deepchecks-tabular-dataset sphx-glr-backref-type-py-class"><span class="n">Dataset</span></a>

<span class="n">features</span> <span class="o">=</span> <span class="n">train_df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;issue_d&#39;</span><span class="p">,</span> <span class="s1">&#39;loan_status&#39;</span><span class="p">])</span>
<a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">cat_features</span></a> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sub_grade&#39;</span><span class="p">,</span> <span class="s1">&#39;home_ownership&#39;</span><span class="p">,</span> <span class="s1">&#39;term&#39;</span><span class="p">,</span> <span class="s1">&#39;purpose&#39;</span><span class="p">,</span> <span class="s1">&#39;application_type&#39;</span><span class="p">,</span> <span class="s1">&#39;verification_status&#39;</span><span class="p">,</span>
                <span class="s1">&#39;addr_state&#39;</span><span class="p">,</span> <span class="s1">&#39;initial_list_status&#39;</span><span class="p">]</span>
<a href="https://docs.deepchecks.com/stable/api/deepchecks.tabular.html#deepchecks.tabular.Dataset" title="deepchecks.tabular.dataset.Dataset" class="sphx-glr-backref-module-deepchecks-tabular-dataset sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">ref_dataset</span></a> <span class="o">=</span> <a href="https://docs.deepchecks.com/stable/api/deepchecks.tabular.html#deepchecks.tabular.Dataset" title="deepchecks.tabular.dataset.Dataset" class="sphx-glr-backref-module-deepchecks-tabular-dataset sphx-glr-backref-type-py-class"><span class="n">Dataset</span></a><span class="p">(</span><span class="n">train_df</span><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">cat_features</span></a><span class="o">=</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">cat_features</span></a><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="n">features</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;loan_status&#39;</span><span class="p">)</span>
<a href="https://docs.deepchecks.com/stable/api/deepchecks.tabular.html#deepchecks.tabular.Dataset" title="deepchecks.tabular.dataset.Dataset" class="sphx-glr-backref-module-deepchecks-tabular-dataset sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">ref_dataset</span></a>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>--------- Dataset Description ----------

                                   Column           DType                 Kind Additional Info
0                             loan_status         integer
1                               sub_grade          string  Categorical Feature
2                                    term          string  Categorical Feature
3                          home_ownership          string  Categorical Feature
4                          fico_range_low        floating    Numerical Feature
5                               total_acc        floating    Numerical Feature
6                                 pub_rec        floating    Numerical Feature
7                              revol_util        floating    Numerical Feature
8                              annual_inc        floating    Numerical Feature
9                                int_rate        floating    Numerical Feature
10                                    dti        floating    Numerical Feature
11                                purpose          string  Categorical Feature
12                               mort_acc        floating    Numerical Feature
13                              loan_amnt        floating    Numerical Feature
14                       application_type          string  Categorical Feature
15                            installment        floating    Numerical Feature
16                    verification_status          string  Categorical Feature
17                   pub_rec_bankruptcies        floating    Numerical Feature
18                             addr_state          string  Categorical Feature
19                    initial_list_status          string  Categorical Feature
20                        fico_range_high        floating    Numerical Feature
21                              revol_bal        floating    Numerical Feature
22                               open_acc        floating    Numerical Feature
23                             emp_length        floating    Numerical Feature
24               time_to_earliest_cr_line        floating    Numerical Feature
25                                issue_d          string       Dataset Column
26                                     id         integer       Dataset Column


----------- Dataset Content ------------

                    loan_status       sub_grade            term  home_ownership  ...      emp_length  time_to_earliest_cr_line         issue_d              id
0                             1              D1       60 months        MORTGAGE  ...             2.0                  478656.0      2014-01-01        11024793
1                             1              C4       60 months        MORTGAGE  ...             3.0                  541728.0      2014-01-01        10596078
2                             1              A4       36 months            RENT  ...             1.0                  657590.4      2014-01-01        10775616
3                             1              D1       60 months        MORTGAGE  ...            11.0                  328838.4      2014-01-01        10765610
4                             1              C3       36 months        MORTGAGE  ...             2.0                  305164.8      2014-01-01        10794837
...                         ...             ...             ...             ...  ...             ...                       ...             ...             ...
236841                        0              C2       36 months            RENT  ...             0.0                  276220.8      2015-12-01        67476992
236842                        0              D2       36 months        MORTGAGE  ...            11.0                  533779.2      2015-08-01        56130981
236843                        0              B1       36 months        MORTGAGE  ...            11.0                  376185.6      2016-02-01        71502396
236844                        1              C3       60 months            RENT  ...            11.0                  867801.6      2016-06-01        83875883
236845                        1              E5       60 months            RENT  ...             3.0                  286588.8      2015-05-01        49197629

[236846 rows x 27 columns]
</pre></div>
</div>
</section>
<section id="creating-the-data-schema">
<h3>Creating the Data Schema<a class="headerlink" href="#creating-the-data-schema" title="Permalink to this headline">#</a></h3>
<p>Schema file contains the description of the data (features and additional data) associated with a model version and
is used by the monitoring system to validate the production data.
<strong>It is highly recommended to review the created schema file before moving forward to creating the model version.</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">deepchecks_client</span> <span class="kn">import</span> <span class="n">create_schema</span><span class="p">,</span> <span class="n">read_schema</span>

<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">schema_file_path</span></a> <span class="o">=</span> <span class="s1">&#39;schema_file.yaml&#39;</span>
<span class="n">create_schema</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><a href="https://docs.deepchecks.com/stable/api/deepchecks.tabular.html#deepchecks.tabular.Dataset" title="deepchecks.tabular.dataset.Dataset" class="sphx-glr-backref-module-deepchecks-tabular-dataset sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">ref_dataset</span></a><span class="p">,</span> <span class="n">schema_output_file</span><span class="o">=</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">schema_file_path</span></a><span class="p">)</span>
<span class="n">read_schema</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">schema_file_path</span></a><span class="p">)</span>
<span class="c1"># Note: for conveniently changing the auto-inferred schema it&#39;s recommended to edit the textual file with an</span>
<span class="c1"># app of your choice.</span>
<span class="c1"># After editing, you can use the `read_schema` function to verify the validity of the syntax in your updated schema.</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Schema was successfully generated and saved to schema_file.yaml.

{&#39;additional_data&#39;: {&#39;id&#39;: &#39;integer&#39;, &#39;issue_d&#39;: &#39;categorical&#39;}, &#39;features&#39;: {&#39;addr_state&#39;: &#39;categorical&#39;, &#39;annual_inc&#39;: &#39;numeric&#39;, &#39;application_type&#39;: &#39;categorical&#39;, &#39;dti&#39;: &#39;numeric&#39;, &#39;emp_length&#39;: &#39;numeric&#39;, &#39;fico_range_high&#39;: &#39;numeric&#39;, &#39;fico_range_low&#39;: &#39;numeric&#39;, &#39;home_ownership&#39;: &#39;categorical&#39;, &#39;initial_list_status&#39;: &#39;categorical&#39;, &#39;installment&#39;: &#39;numeric&#39;, &#39;int_rate&#39;: &#39;numeric&#39;, &#39;loan_amnt&#39;: &#39;numeric&#39;, &#39;mort_acc&#39;: &#39;numeric&#39;, &#39;open_acc&#39;: &#39;numeric&#39;, &#39;pub_rec&#39;: &#39;numeric&#39;, &#39;pub_rec_bankruptcies&#39;: &#39;numeric&#39;, &#39;purpose&#39;: &#39;categorical&#39;, &#39;revol_bal&#39;: &#39;numeric&#39;, &#39;revol_util&#39;: &#39;numeric&#39;, &#39;sub_grade&#39;: &#39;categorical&#39;, &#39;term&#39;: &#39;categorical&#39;, &#39;time_to_earliest_cr_line&#39;: &#39;numeric&#39;, &#39;total_acc&#39;: &#39;numeric&#39;, &#39;verification_status&#39;: &#39;categorical&#39;}}
</pre></div>
</div>
</section>
<section id="preparing-the-production-data">
<h3>Preparing the Production Data<a class="headerlink" href="#preparing-the-production-data" title="Permalink to this headline">#</a></h3>
<p>In order to prepare the production data we will take a closer look at index and datetime columns which are
required for production data but not for reference data.</p>
<p>The index is the global identifier for a sample in the deepchecks system and is used in various displays
as well as for future updates of the sample as well. It is crucial to provide meaningful values for this column.
In our case we will use the id column as the index.</p>
<p>The timestamps represent either the time the sample was observed or the time the model prediction took place.
It should be provided in Unix timestamp format (seconds since 1970-01-01 00:00:00 UTC). In our case we will use
the issue_d column and convert it to the required format.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <a href="https://docs.python.org/3/library/time.html#time.time" title="time.time" class="sphx-glr-backref-module-time sphx-glr-backref-type-py-function"><span class="n">time</span></a>

<span class="n">prod_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://figshare.com/ndownloader/files/39316157&#39;</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;issue_d&#39;</span><span class="p">])</span>
<span class="c1"># Convert pandas datetime format to unix timestamp</span>
<span class="n">prod_data</span><span class="p">[</span><span class="s1">&#39;issue_d&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">prod_data</span><span class="p">[</span><span class="s1">&#39;issue_d&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="o">//</span> <span class="mi">10</span> <span class="o">**</span> <span class="mi">9</span>
<span class="c1"># we will varify that the index column is unique and that the datetime column is in the correct format</span>
<span class="k">assert</span> <span class="n">prod_data</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">is_unique</span>
<span class="k">assert</span> <span class="n">prod_data</span><span class="p">[</span><span class="s1">&#39;issue_d&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">prod_data</span><span class="p">[</span><span class="s1">&#39;issue_d&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">&lt;</span> <span class="nb">int</span><span class="p">(</span><a href="https://docs.python.org/3/library/time.html#time.time" title="time.time" class="sphx-glr-backref-module-time sphx-glr-backref-type-py-function"><span class="n">time</span></a><span class="p">())</span>
</pre></div>
</div>
</section>
<section id="supplying-model-predictions">
<h3>Supplying Model Predictions<a class="headerlink" href="#supplying-model-predictions" title="Permalink to this headline">#</a></h3>
<p>If we wish to also monitor the model’s behaviour we need to provide the model’s predictions for both
the reference and production data in the required format and optionally also the model feature importance.</p>
<p>Currently, model predictions are only supported for regression and classification tasks. For classification tasks,
it is preferable to provide the predicted probabilities per class rather than the predicted classes themselves.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Loading the model (CatBoost Classifier)</span>
<span class="kn">import</span> <span class="nn">joblib</span>
<span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <a href="https://docs.python.org/3/library/urllib.request.html#urllib.request.urlopen" title="urllib.request.urlopen" class="sphx-glr-backref-module-urllib-request sphx-glr-backref-type-py-function"><span class="n">urlopen</span></a>

<span class="k">with</span> <a href="https://docs.python.org/3/library/urllib.request.html#urllib.request.urlopen" title="urllib.request.urlopen" class="sphx-glr-backref-module-urllib-request sphx-glr-backref-type-py-function"><span class="n">urlopen</span></a><span class="p">(</span><span class="s1">&#39;https://figshare.com/ndownloader/files/39316172&#39;</span><span class="p">)</span> <span class="k">as</span> <a href="https://docs.python.org/3/library/http.client.html#http.client.HTTPResponse" title="http.client.HTTPResponse" class="sphx-glr-backref-module-http-client sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">f</span></a><span class="p">:</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">joblib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><a href="https://docs.python.org/3/library/http.client.html#http.client.HTTPResponse" title="http.client.HTTPResponse" class="sphx-glr-backref-module-http-client sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">f</span></a><span class="p">)</span>

<span class="c1"># Extracting feature importance - optional</span>
<span class="n">feature_importance</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">feature_importances_</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">feature_importances_</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">feature_names_</span><span class="p">)</span>

<span class="c1"># Predicting on the reference data and production data</span>
<a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">ref_predictions</span></a> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="n">features</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="s1">&#39;NONE&#39;</span><span class="p">))</span>
<a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">prod_predictions</span></a> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">prod_data</span><span class="p">[</span><span class="n">features</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="s1">&#39;NONE&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  6.899 seconds)</p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-user-guide-tabular-auto-quickstarts-plot-prepare-your-data-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../../_downloads/d9850770d2be0445478cb6beeecc7ea9/plot_prepare_your_data.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_prepare_your_data.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../../_downloads/a665216c552caa0a9a46e5fb79828eb4/plot_prepare_your_data.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_prepare_your_data.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>
</section>
</section>


            </div>
        
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="index.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Tabular Quickstarts</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="plot_quickstart.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Quickstart - Get Deepchecks Monitoring Up and Running</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
    </main>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022, Deepchecks.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>