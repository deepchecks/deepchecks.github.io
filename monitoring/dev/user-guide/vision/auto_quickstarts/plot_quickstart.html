
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

<!-- Google Tag Manager -->
<!--<script>(function (w, d, s, l, i) {-->
<!--        w[l] = w[l] || []; w[l].push({-->
<!--            'gtm.start':-->
<!--                new Date().getTime(), event: 'gtm.js'-->
<!--        }); var f = d.getElementsByTagName(s)[0],-->
<!--            j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =-->
<!--                'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);-->
<!--    })(window, document, 'script', 'dataLayer', 'GTM-NNKXRJQ');</script>-->
<!-- End Google Tag Manager -->
<meta name="title" content="Quickstart - Get Deepchecks Monitoring Up and Running for Computer Vision Data | Deepchecks Documentation">
<meta name="description" content="Do you need to know more about Quickstart - Get Deepchecks Monitoring Up and Running for Computer Vision Data? Read more at Deepchecks Online Documentation">
<meta name="docsearch:version" content="">


<!-- Warning: 
        The 'shortcut link' type is often seen before icon, but this link type is non-conforming, 
        ignored and web authors must not use it anymore. 
        MDN docs https://developer.mozilla.org/en-US/docs/Web/HTML/Link_types
    -->
<link rel="shortcut icon" href="/_static/favicons/favicon.ico">
<!--<link rel="canonical" href="https://docs.deepchecks.com/stable/user-guide/vision/auto_quickstarts/plot_quickstart.html" />-->

<link rel="icon" href="/_static/favicons/favicon.png" sizes="32x32">
<link rel="icon" href="/_static/favicons/favicon.png" sizes="192x192">

<!-- Note: 
        Apple's iOS does not use this 'link' type, nor the 'sizes' attribute, 
        like others mobile browsers do, to select a webpage icon for Web Clip 
        or a start-up placeholder. Instead it uses the non-standard 'apple-touch-icon'.
        MDN docs: https://developer.mozilla.org/en-US/docs/Web/HTML/Link_types;
        Safari Web Content Guide: https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html#//apple_ref/doc/uid/TP40002051-CH3-SW4
    -->
<link rel="apple-touch-icon" href="/_static/favicons/apple-touch-icon.png" sizes="32x32">
<link rel="apple-touch-icon" href="/_static/favicons/apple-touch-icon.png" sizes="192x192">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />


    <title>Quickstart - Get Deepchecks Monitoring Up and Running for Computer Vision Data &#8212; Deepchecks Monitoring  documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" crossorigin="anonymous"></script>
<script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"
    crossorigin="anonymous"></script>

    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="API Reference" href="../../../api/index.html" />
    <link rel="prev" title="Vision Quickstarts" href="index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>

<body data-spy="scroll" data-target="#bd-toc-nav">
    <!-- Google Tag Manager (noscript) -->
<!--    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NNKXRJQ" height="0" width="0"-->
<!--            style="display:none;visibility:hidden"></iframe></noscript>-->
    <!-- End Google Tag Manager (noscript) -->
    <script>
        require.config({
            paths: {
                "docsearchLib": "https://cdn.jsdelivr.net/npm/@docsearch/js@3?noext",
                "clipboardjs": "//_static/clipboard.min"
            }
        }

        );
        // require(["docsearchLib"], function (docsearch) {
        //     docsearch({
        //         appId: "3UQ0BSGJ1N", apiKey: "83d250f88e29e9906a50ddf40a1871ce", indexName: "deepchecks", container: '#algolia-search', debug: false,
        //         searchParameters: {
        //             facetFilters: ["version:"]
        //         }
        //     });
        // });
        require(["clipboardjs"], function(clipboardJS) {
            window.ClipboardJS=clipboardJS
        });
    </script>
    <script data-url_root="/" id="documentation_options" src="//_static/documentation_options.js"></script>
    <script src="//_static/copybutton.js"></script>

    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../../index.html">
  <img src="../../../_static/deepchecks_logo.svg" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../../index.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../api/index.html">
  API Reference
 </a>
</li>

    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://staging-v2.deepchecks.com/docs">API Docs<i class="fas fa-external-link-alt"></i></a>
    </li>
    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Quick Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/deepchecks/deepchecks" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://deepchecks.com/slack" rel="noopener" target="_blank" title="Slack"><span><i class="fab fa-slack"></i></span>
            <label class="sr-only">Slack</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://pypi.org/project/deepchecks/" rel="noopener" target="_blank" title="PyPI"><span><i class="fab fa-python"></i></span>
            <label class="sr-only">PyPI</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  General
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../general/concepts.html">
   Concepts
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Tabular
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../tabular/auto_quickstarts/index.html">
   Tabular Quickstarts
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tabular/auto_quickstarts/plot_quickstart.html">
     Quickstart - Get Deepchecks Monitoring Up and Running
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../tabular/tabular_setup.html">
   Setting Up a New Tabular Model
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Vision
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   Vision Quickstarts
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Quickstart - Get Deepchecks Monitoring Up and Running for Computer Vision Data
    </a>
   </li>
  </ul>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#creating-a-new-model-version">
   Creating a New Model Version
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#preparing-the-reference-data">
     Preparing the Reference Data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-a-model-version">
     Creating a model version
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#uploading-production-data">
   Uploading Production Data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#uploading-data-and-predictions">
     Uploading Data and Predictions
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#updating-the-labels">
     Updating the Labels
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-dashboard-screen">
   The Dashboard Screen
  </a>
 </li>
</ul>

</nav>
              </div>
              
            
          </div>
          

          
    
        
    
    <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
        
            <div>
                
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-user-guide-vision-auto-quickstarts-plot-quickstart-py"><span class="std std-ref">here</span></a>
to download the full example code</p>
</div>
<section class="sphx-glr-example-title" id="quickstart-get-deepchecks-monitoring-up-and-running-for-computer-vision-data">
<span id="quick-vision"></span><span id="sphx-glr-user-guide-vision-auto-quickstarts-plot-quickstart-py"></span><h1>Quickstart - Get Deepchecks Monitoring Up and Running for Computer Vision Data<a class="headerlink" href="#quickstart-get-deepchecks-monitoring-up-and-running-for-computer-vision-data" title="Permalink to this headline">#</a></h1>
<p>This quickstart is the perfect starting point for monitoring your vision model using Deepchecks Monitoring. We’ll
quickly walk you through setting up a model to represent your task in the system, uploading data, setting the
computed checks and alerts in the system and seeing some results for your effort. We’ll be using the
<a class="reference external" href="https://www.kaggle.com/datasets/andrewmvd/face-mask-detection">Mask Detection Dataset</a>, in which
the goal of the model is to detect faces, and classify whether the face is wearing a mask, partially wearing a mask or not wearing a mask.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Before we start, if you don&#39;t have deepchecks-client installed yet, run:</span>
import sys
!<span class="o">{</span>sys.executable<span class="o">}</span> -m pip install -U deepchecks-client

<span class="c1"># or install using pip from your python environment</span>
</pre></div>
</div>
<section id="creating-a-new-model-version">
<h2>Creating a New Model Version<a class="headerlink" href="#creating-a-new-model-version" title="Permalink to this headline">#</a></h2>
<p>Our first step is to create a new model version in the system. A model in Deepchecks Monitoring
represents an ML pipeline performing a single task in production through time,
where the model’s versions and the structure of the data may change over time.
Our terminology to refer to a specific version within a model is “model version”.</p>
<p>The easiest way to create a model version, which is demonstrated
here, requires a <span class="xref std std-doc">Vision Data</span> object
containing the reference data for the version. Reference data is a dataset to which we wish to compare
our production data stream. Typically, this will be the dataset on which the model was trained.
Providing reference data is optional yet many important <a class="reference external" href="https://docs.deepchecks.com/stable/user-guide/general/deepchecks_hierarchy.html" title="(in Deepchecks v0.1)"><span class="xref std std-doc">checks</span></a>
such as <a class="reference external" href="https://docs.deepchecks.com/stable/checks_gallery/vision/model_evaluation/plot_train_test_prediction_drift.html" title="(in Deepchecks v0.1)"><span class="xref std std-doc">Train Test Prediction Drift (Vision Version)</span></a>
cannot run without it.</p>
<section id="preparing-the-reference-data">
<h3>Preparing the Reference Data<a class="headerlink" href="#preparing-the-reference-data" title="Permalink to this headline">#</a></h3>
<p>In this example we’re loading a pre-made VisionData object containing the data at the first time stamp, with which
the model was trained. In order to create your own VisionData object from your own pytorch dataloader
please read the <a class="reference external" href="https://docs.deepchecks.com/stable/user-guide/vision/data-classes/index.html" title="(in Deepchecks v0.1)"><span class="xref std std-doc">Vision Data</span></a> documentation or follow the
appropriate deepchecks computer vision <a class="reference external" href="https://docs.deepchecks.com/stable/user-guide/vision/auto_quickstarts/index.html" title="(in Deepchecks v0.1)"><span class="xref std std-doc">quickstart</span></a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">deepchecks.vision.datasets.detection.mask</span> <span class="kn">import</span> <span class="n">load_dataset</span><span class="p">,</span> <span class="n">load_model</span><span class="p">,</span> <span class="n">get_data_timestamps</span>
<span class="n">ref_dataset</span> <span class="o">=</span> <span class="n">load_dataset</span><span class="p">(</span><span class="n">day_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">object_type</span><span class="o">=</span><span class="s1">&#39;VisionData&#39;</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">load_model</span><span class="p">()</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>  0%|          | 0/416968083 [00:00&lt;?, ?it/s]
  0%|          | 52224/416968083 [00:00&lt;18:37, 372987.00it/s]
  0%|          | 243712/416968083 [00:00&lt;07:16, 954229.98it/s]
  0%|          | 1079296/416968083 [00:00&lt;01:57, 3530429.11it/s]
  1%|          | 2817024/416968083 [00:00&lt;00:50, 8187450.38it/s]
  2%|1         | 6405120/416968083 [00:00&lt;00:24, 16534444.69it/s]
  3%|2         | 10642432/416968083 [00:00&lt;00:16, 24508129.09it/s]
  4%|3         | 14793728/416968083 [00:00&lt;00:14, 28599045.43it/s]
  5%|4         | 19206144/416968083 [00:00&lt;00:11, 33196388.30it/s]
  6%|5         | 23493632/416968083 [00:01&lt;00:10, 35908213.29it/s]
  7%|6         | 27606016/416968083 [00:01&lt;00:10, 37263853.22it/s]
  8%|7         | 32128000/416968083 [00:01&lt;00:09, 38506675.24it/s]
  9%|8         | 36699136/416968083 [00:01&lt;00:09, 40397539.87it/s]
 10%|9         | 41253888/416968083 [00:01&lt;00:09, 40724142.28it/s]
 11%|#         | 45775872/416968083 [00:01&lt;00:08, 41856772.78it/s]
 12%|#2        | 50347008/416968083 [00:01&lt;00:08, 40870632.01it/s]
 13%|#3        | 55016448/416968083 [00:01&lt;00:08, 41172068.34it/s]
 14%|#4        | 59147264/416968083 [00:01&lt;00:08, 41098205.16it/s]
 15%|#5        | 64044032/416968083 [00:01&lt;00:08, 41906287.23it/s]
 16%|#6        | 68384768/416968083 [00:02&lt;00:08, 42331721.55it/s]
 18%|#7        | 73038848/416968083 [00:02&lt;00:08, 41971769.92it/s]
 19%|#8        | 77298688/416968083 [00:02&lt;00:08, 42137746.87it/s]
 20%|#9        | 81517568/416968083 [00:02&lt;00:08, 40680119.89it/s]
 21%|##        | 86593536/416968083 [00:02&lt;00:07, 43549391.64it/s]
 22%|##1       | 90971136/416968083 [00:02&lt;00:07, 41845500.60it/s]
 23%|##2       | 95616000/416968083 [00:02&lt;00:07, 41986276.18it/s]
 24%|##3       | 99832832/416968083 [00:02&lt;00:07, 41775950.37it/s]
 25%|##5       | 104715264/416968083 [00:02&lt;00:07, 43795373.71it/s]
 26%|##6       | 109112320/416968083 [00:03&lt;00:07, 41980355.92it/s]
 27%|##7       | 113507328/416968083 [00:03&lt;00:07, 41911839.33it/s]
 28%|##8       | 117715968/416968083 [00:03&lt;00:07, 41310798.51it/s]
 29%|##9       | 122207232/416968083 [00:03&lt;00:07, 41625622.95it/s]
 30%|###       | 126377984/416968083 [00:03&lt;00:07, 41135658.58it/s]
 31%|###1      | 131070976/416968083 [00:03&lt;00:06, 41874433.61it/s]
 32%|###2      | 135261184/416968083 [00:03&lt;00:06, 41370753.38it/s]
 34%|###3      | 139967488/416968083 [00:03&lt;00:06, 42166536.03it/s]
 35%|###4      | 144184320/416968083 [00:03&lt;00:06, 41607748.96it/s]
 36%|###5      | 149093376/416968083 [00:04&lt;00:06, 42942972.96it/s]
 37%|###6      | 153387008/416968083 [00:04&lt;00:06, 41809216.19it/s]
 38%|###7      | 158170112/416968083 [00:04&lt;00:05, 43269057.52it/s]
 39%|###8      | 162503680/416968083 [00:04&lt;00:06, 41398177.47it/s]
 40%|####      | 167459840/416968083 [00:04&lt;00:05, 42408564.01it/s]
 41%|####1     | 171710464/416968083 [00:04&lt;00:05, 42202704.88it/s]
 42%|####2     | 176602112/416968083 [00:04&lt;00:05, 40173024.17it/s]
 44%|####3     | 182336512/416968083 [00:04&lt;00:05, 44617398.81it/s]
 45%|####4     | 186863616/416968083 [00:04&lt;00:05, 42587684.75it/s]
 46%|####5     | 191560704/416968083 [00:05&lt;00:05, 41318849.90it/s]
 47%|####7     | 196590592/416968083 [00:05&lt;00:05, 43549245.12it/s]
 48%|####8     | 200998912/416968083 [00:05&lt;00:05, 40963802.45it/s]
 49%|####9     | 206076928/416968083 [00:05&lt;00:04, 43547578.04it/s]
 50%|#####     | 210497536/416968083 [00:05&lt;00:05, 41144546.68it/s]
 52%|#####1    | 215317504/416968083 [00:05&lt;00:04, 41081621.97it/s]
 53%|#####2    | 219981824/416968083 [00:05&lt;00:04, 42587124.45it/s]
 54%|#####3    | 224287744/416968083 [00:05&lt;00:04, 41327658.93it/s]
 55%|#####4    | 229151744/416968083 [00:05&lt;00:04, 43362055.96it/s]
 56%|#####6    | 233528320/416968083 [00:06&lt;00:04, 41278493.73it/s]
 57%|#####7    | 238517248/416968083 [00:06&lt;00:04, 42889159.98it/s]
 58%|#####8    | 242840576/416968083 [00:06&lt;00:04, 41833982.16it/s]
 59%|#####9    | 247593984/416968083 [00:06&lt;00:03, 43247660.91it/s]
 60%|######    | 251943936/416968083 [00:06&lt;00:03, 41844475.21it/s]
 61%|######1   | 256310272/416968083 [00:06&lt;00:03, 42358022.25it/s]
 62%|######2   | 260564992/416968083 [00:06&lt;00:03, 41064291.05it/s]
 64%|######3   | 265124864/416968083 [00:06&lt;00:03, 42103221.04it/s]
 65%|######4   | 269351936/416968083 [00:06&lt;00:03, 41150401.76it/s]
 66%|######5   | 273742848/416968083 [00:06&lt;00:03, 41546721.27it/s]
 67%|######6   | 277907456/416968083 [00:07&lt;00:03, 41215442.76it/s]
 68%|######7   | 282491904/416968083 [00:07&lt;00:03, 41467238.13it/s]
 69%|######8   | 286643200/416968083 [00:07&lt;00:03, 41152855.29it/s]
 70%|######9   | 291306496/416968083 [00:07&lt;00:03, 41640833.04it/s]
 71%|#######   | 295471104/416968083 [00:07&lt;00:02, 41472752.52it/s]
 72%|#######2  | 300432384/416968083 [00:07&lt;00:02, 42312853.41it/s]
 73%|#######3  | 304659456/416968083 [00:07&lt;00:02, 41345469.46it/s]
 74%|#######4  | 309378048/416968083 [00:07&lt;00:02, 42476801.18it/s]
 75%|#######5  | 313626624/416968083 [00:07&lt;00:02, 41781305.77it/s]
 76%|#######6  | 318422016/416968083 [00:08&lt;00:02, 42601365.96it/s]
 77%|#######7  | 322681856/416968083 [00:08&lt;00:02, 40995201.34it/s]
 78%|#######8  | 327252992/416968083 [00:08&lt;00:02, 39427407.65it/s]
 80%|#######9  | 332856320/416968083 [00:08&lt;00:01, 43799997.28it/s]
 81%|########  | 337288192/416968083 [00:08&lt;00:01, 41477862.73it/s]
 82%|########2 | 342309888/416968083 [00:08&lt;00:01, 40479102.14it/s]
 83%|########3 | 347618304/416968083 [00:08&lt;00:01, 43403137.40it/s]
 84%|########4 | 352020480/416968083 [00:08&lt;00:01, 41648987.42it/s]
 86%|########5 | 357006336/416968083 [00:08&lt;00:01, 43742034.86it/s]
 87%|########6 | 361433088/416968083 [00:09&lt;00:01, 41655768.80it/s]
 88%|########7 | 366459904/416968083 [00:09&lt;00:01, 42097171.65it/s]
 89%|########8 | 371047424/416968083 [00:09&lt;00:01, 43125649.31it/s]
 90%|######### | 375733248/416968083 [00:09&lt;00:00, 42799583.25it/s]
 91%|#########1| 380037120/416968083 [00:09&lt;00:00, 42465909.49it/s]
 92%|#########2| 384596992/416968083 [00:09&lt;00:00, 42312907.93it/s]
 93%|#########3| 389048320/416968083 [00:09&lt;00:00, 42935757.49it/s]
 94%|#########4| 393772032/416968083 [00:09&lt;00:00, 42696455.04it/s]
 95%|#########5| 398050304/416968083 [00:09&lt;00:00, 42535877.35it/s]
 97%|#########6| 402701312/416968083 [00:10&lt;00:00, 41530448.51it/s]
 98%|#########7| 407741440/416968083 [00:10&lt;00:00, 44025357.87it/s]
 99%|#########8| 412169216/416968083 [00:10&lt;00:00, 42050826.87it/s]
416968704it [00:10, 40235448.14it/s]
</pre></div>
</div>
<p>Predictions must be given in one of the following formats:</p>
<ol class="arabic simple">
<li><p>A list predictions for each image in the dataset, according to the order they are loaded from the dataloader.</p></li>
<li><p>A dictionary where the values are the predictions and the keys are the image indices in the pytorch Dataset object.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ref_predictions</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">ref_dataset</span><span class="p">:</span>
    <span class="n">ref_predictions</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">model</span><span class="p">(</span><span class="n">batch</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
</pre></div>
</div>
</section>
<section id="creating-a-model-version">
<h3>Creating a model version<a class="headerlink" href="#creating-a-model-version" title="Permalink to this headline">#</a></h3>
<p>In order to create a model version we must first create an organization in the
<a class="reference external" href="https://app.deepchecks.com/">deepchecks system</a> and generate a personal
API token using the application’s dashboard.</p>
<a class="reference internal image-reference" href="../../../_images/get_api_token.png"><img alt="../../../_images/get_api_token.png" src="../../../_images/get_api_token.png" style="width: 600px;" /></a>
<p>Using the API token we can now create a new model version and upload the reference data.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">typing</span> <span class="k">as</span> <span class="nn">t</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">torch</span>
<span class="kn">from</span> <span class="nn">deepchecks_client</span> <span class="kn">import</span> <span class="n">DeepchecksClient</span>

<span class="n">host</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;DEEPCHECKS_API_HOST&#39;</span><span class="p">)</span>  <span class="c1"># Replace this with https://app.deepchecks.com</span>
<span class="c1"># note to put the API token in your environment variables. Or alternatively (less recommended):</span>
<span class="c1"># os.environ[&#39;DEEPCHECKS_API_TOKEN&#39;] = &#39;uncomment-this-line-and-insert-your-api-token-here&#39;</span>
<span class="n">model_name</span> <span class="o">=</span> <span class="s1">&#39;Mask Data&#39;</span>
<span class="n">dc_client</span> <span class="o">=</span> <span class="n">DeepchecksClient</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">host</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;DEEPCHECKS_API_TOKEN&#39;</span><span class="p">))</span>
<span class="n">model_version</span> <span class="o">=</span> <span class="n">dc_client</span><span class="o">.</span><span class="n">create_vision_model_version</span><span class="p">(</span><span class="n">model_name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span> <span class="n">version_name</span><span class="o">=</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span>
                                                      <span class="n">reference_dataset</span><span class="o">=</span><span class="n">ref_dataset</span><span class="p">,</span>
                                                      <span class="n">reference_predictions</span><span class="o">=</span><span class="n">ref_predictions</span><span class="p">,</span>
                                                      <span class="n">task_type</span><span class="o">=</span><span class="s1">&#39;vision_detection&#39;</span><span class="p">,</span>
                                                      <span class="n">send_images</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Model Mask Data was successfully created!. Default checks, monitors and alerts added.
Reference data uploaded.
</pre></div>
</div>
</section>
</section>
<section id="uploading-production-data">
<h2>Uploading Production Data<a class="headerlink" href="#uploading-production-data" title="Permalink to this headline">#</a></h2>
<p>No matter what else you’ll be doing with Deepchecks Monitoring, it will start by uploading some production data that
you want monitored. In this the mask data collected for dates ranging from the start of July 2022 to the end of
August 2022. For simplicity and quicker runtime, we’ll upload only the last few days in this tutorial.
Then, we’ll update the labels for some of the samples we uploaded.</p>
<section id="uploading-data-and-predictions">
<h3>Uploading Data and Predictions<a class="headerlink" href="#uploading-data-and-predictions" title="Permalink to this headline">#</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">number_of_batches_to_upload</span> <span class="o">=</span> <span class="mi">5</span>  <span class="c1"># Limited to save time running this tutorial</span>
<span class="n">batch_size</span> <span class="o">=</span> <span class="mi">32</span>

<span class="c1"># Only upload the last few days.</span>
<span class="n">daily_timestamps</span> <span class="o">=</span> <span class="n">get_data_timestamps</span><span class="p">()[</span><span class="mi">55</span><span class="p">:]</span>
<span class="c1"># To upload all production data, use:</span>
<span class="c1"># daily_timestamps = get_data_timestamps()[1:]</span>
<span class="c1"># (Disregard the first day, which is the reference data)</span>


<span class="c1"># Defining a helper function that will convert the label format to the one supported by Deepchecks Monitoring.</span>
<span class="k">def</span> <span class="nf">extract_label_dict</span><span class="p">(</span><span class="n">in_dict</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <a href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="torch.Tensor" class="sphx-glr-backref-module-torch sphx-glr-backref-type-py-class"><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span></a><span class="p">])</span> <span class="o">-&gt;</span> <a href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="torch.Tensor" class="sphx-glr-backref-module-torch sphx-glr-backref-type-py-class"><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span></a><span class="p">:</span>
    <span class="k">return</span> <a href="https://pytorch.org/docs/stable/generated/torch.concat.html#torch.concat" title="torch.concat" class="sphx-glr-backref-module-torch sphx-glr-backref-type-py-function"><span class="n">torch</span><span class="o">.</span><span class="n">concat</span></a><span class="p">([</span><span class="n">in_dict</span><span class="p">[</span><span class="s1">&#39;labels&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span> <span class="n">in_dict</span><span class="p">[</span><span class="s1">&#39;boxes&#39;</span><span class="p">]],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>


<span class="k">for</span> <span class="n">day_idx</span><span class="p">,</span> <span class="n">timestamp</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">daily_timestamps</span><span class="p">):</span>
    <span class="c1"># Load the DataLoader for the current day</span>
    <a href="https://pytorch.org/docs/stable/data.html#torch.utils.data.DataLoader" title="torch.utils.data.DataLoader" class="sphx-glr-backref-module-torch-utils-data sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">data_loader</span></a> <span class="o">=</span> <span class="n">load_dataset</span><span class="p">(</span><span class="n">day_index</span><span class="o">=</span><span class="n">day_idx</span><span class="p">,</span> <span class="n">object_type</span><span class="o">=</span><span class="s1">&#39;DataLoader&#39;</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="n">batch_size</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">batch_id</span><span class="p">,</span> <span class="n">batch</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><a href="https://pytorch.org/docs/stable/data.html#torch.utils.data.DataLoader" title="torch.utils.data.DataLoader" class="sphx-glr-backref-module-torch-utils-data sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">data_loader</span></a><span class="p">):</span>
        <span class="c1"># We also upload only a small number of batches in this example to save time.</span>
        <span class="c1"># Remove this for loop to upload all data from chosen timestamps.</span>
        <span class="k">if</span> <span class="n">batch_id</span> <span class="o">&gt;=</span> <span class="n">number_of_batches_to_upload</span><span class="p">:</span>
            <span class="k">break</span>

        <span class="n">indices</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">batch_id</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">batch_size</span><span class="p">)]</span>
        <span class="n">timestamps</span> <span class="o">=</span> <span class="p">[</span><span class="n">timestamp</span><span class="p">]</span> <span class="o">*</span> <span class="n">batch_size</span>

        <span class="n">model_version</span><span class="o">.</span><span class="n">log_batch</span><span class="p">(</span><span class="n">sample_id</span><span class="o">=</span><span class="n">indices</span><span class="p">,</span>
                                <span class="n">timestamps</span><span class="o">=</span><span class="n">timestamps</span><span class="p">,</span>
                                <span class="n">images</span><span class="o">=</span><span class="p">[</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">permute</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="o">*</span> <span class="mi">255</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">batch</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
                                <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="n">extract_label_dict</span><span class="p">(</span><span class="n">tensor</span><span class="p">)</span> <span class="k">for</span> <span class="n">tensor</span> <span class="ow">in</span> <span class="n">batch</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                                <span class="n">predictions</span><span class="o">=</span><span class="n">model</span><span class="p">(</span><span class="n">batch</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                                <span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>32 new samples were successfully logged.
32 new samples were successfully logged.
32 new samples were successfully logged.
32 new samples were successfully logged.
32 new samples were successfully logged.
32 new samples were successfully logged.
32 new samples were successfully logged.
32 new samples were successfully logged.
32 new samples were successfully logged.
32 new samples were successfully logged.
32 new samples were successfully logged.
32 new samples were successfully logged.
32 new samples were successfully logged.
32 new samples were successfully logged.
32 new samples were successfully logged.
32 new samples were successfully logged.
32 new samples were successfully logged.
32 new samples were successfully logged.
32 new samples were successfully logged.
32 new samples were successfully logged.
32 new samples were successfully logged.
32 new samples were successfully logged.
32 new samples were successfully logged.
32 new samples were successfully logged.
32 new samples were successfully logged.
</pre></div>
</div>
<p>Images, labels and prediction must be provided in specific required formats.
The required format for the can be found at <a class="reference external" href="https://docs.deepchecks.com/stable/user-guide/vision/data-classes/index.html" title="(in Deepchecks v0.1)"><span class="xref std std-doc">here</span></a>.
Please look at the following entries:</p>
<ul class="simple">
<li><p>Image format - can be found at <a class="reference external" href="https://docs.deepchecks.com/stable/user-guide/vision/data-classes/VisionData.html" title="(in Deepchecks v0.1)"><span class="xref std std-doc">here</span></a>.</p></li>
<li><p>Label &amp; prediction format - look at documentation of the respective VisionData subclass according to your task type</p></li>
</ul>
<p>In this example, the changes needed in the data format are pretty trivial, but in more complex cases
you may either implement them in dedicated functions (such as the <code class="docutils literal notranslate"><span class="pre">extract_label_dict</span></code> function here), or use
the <code class="docutils literal notranslate"><span class="pre">batch_to_image</span></code> and other formatting methods you already implemented as part of building your
Deepchecks VisionData object.</p>
</section>
<section id="updating-the-labels">
<h3>Updating the Labels<a class="headerlink" href="#updating-the-labels" title="Permalink to this headline">#</a></h3>
<p>In many real world scenarios, the labels of the data are only available at a later time. We can update them
in hindsight using the global sample ids. Here we update the last sample that was uploaded.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">model_version</span><span class="o">.</span><span class="n">update_sample</span><span class="p">(</span><span class="n">sample_id</span><span class="o">=</span><span class="n">indices</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                            <span class="n">label</span><span class="o">=</span><span class="p">[</span><span class="n">extract_label_dict</span><span class="p">(</span><span class="n">tensor</span><span class="p">)</span> <span class="k">for</span> <span class="n">tensor</span> <span class="ow">in</span> <span class="n">batch</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="n">model_version</span><span class="o">.</span><span class="n">send</span><span class="p">()</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>1 samples were successfully updated.
</pre></div>
</div>
<p>You can update multiple samples. Once done updating all desired samples, call the <cite>send</cite> method to upload the samples
and make the updates appear in the system.</p>
<p>When updating multiple samples we can verify that status of the process that is running in the background by checking
the amount of samples that have been processed and uploaded by the system, using:
model_version.time_window_statistics(min(prod_data[timestamp]), max(prod_data[timestamp]))
upon completion, the statistics should equal the total number of samples sent</p>
</section>
</section>
<section id="the-dashboard-screen">
<h2>The Dashboard Screen<a class="headerlink" href="#the-dashboard-screen" title="Permalink to this headline">#</a></h2>
<p>After creating the model version and uploading the data, we can now see the monitors within the
<a class="reference external" href="https://app.deepchecks.com/">application dashboard</a>.
The monitors below are generated by default when a new model is created, all versions of the same model are tracked
within the same monitor.</p>
<a class="reference internal image-reference" href="../../../_images/vision_dashboard_w_defaults.png"><img alt="../../../_images/vision_dashboard_w_defaults.png" src="../../../_images/vision_dashboard_w_defaults.png" style="width: 600px;" /></a>
<p>Note: The displayed dashboard was created using all the production data, not only the last few days</p>
<p>If we wish to remove the model to free up space for new models we can do it in the following way:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># CAUTION: This will delete the model, all model versions, and all associated datasets.</span>
<span class="n">dc_client</span><span class="o">.</span><span class="n">delete_model</span><span class="p">(</span><span class="n">model_name</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>The following model was successfully deleted: Mask Data
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 2 minutes  6.382 seconds)</p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-user-guide-vision-auto-quickstarts-plot-quickstart-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../../_downloads/85223652c19cdfdde7e855b0689b5e2c/plot_quickstart.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_quickstart.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../../_downloads/7d9a95a66c133bde2d29135be936ee1d/plot_quickstart.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_quickstart.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>
</section>


            </div>
        
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="index.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Vision Quickstarts</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../../../api/index.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">API Reference</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
    </main>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022, Deepchecks.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>