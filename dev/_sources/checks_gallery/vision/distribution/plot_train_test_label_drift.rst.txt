
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "checks_gallery/vision/distribution/plot_train_test_label_drift.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_checks_gallery_vision_distribution_plot_train_test_label_drift.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_checks_gallery_vision_distribution_plot_train_test_label_drift.py:


Train Test Label Drift
**********************

This notebooks provides an overview for using and understanding the vision label drift check.

**Structure:**

* `What is a label drift? <#what-is-a-label-drift>`__
* `Which Label Properties Are Used? <#which-label-properties-are-used>`__
* `Run check on a Classification task <#run-the-check-on-a-classification-task-mnist>`__
* `Run check on an Object Detection task <#run-the-check-on-an-object-detection-task-coco>`__

What is a label drift?
======================
The term drift (and all it's derivatives) is used to describe any change in the data
compared to the data the model was trained on. Specifically, label drift indicates
changes in the label we are trying to predict.

Causes of label drift include:

* Natural drift in the data, such as a certain class becoming more prevalent in the test set.
  For example, cronuts becoming more popular in a food classification dataset.
* Labeling issues, such as an analyst drawing incorrect bounding boxes for an object
  detection task.

How Does the TrainTestLabelDrift Check Work?
============================================
There are many methods to detect drift, that usually include statistical methods
that aim to measure difference between 2 distributions.
We experimented with various approaches and found that for detecting drift between 2
one-dimensional distributions, the following 2 methods give the best results:

* For numerical features, the `Population Stability Index (PSI) <https://www.lexjansen.com/wuss/2017/47_Final_Paper_PDF.pdf>`__
* For categorical features, the `Wasserstein Distance (Earth Mover's Distance) <https://en.wikipedia.org/wiki/Wasserstein_metric>`__

However, one does not simply measure drift on a label, as they may be complex structures. These methods are implemented
on label properties, as described in the next section.

Using Label Properties to Detect Label Drift
--------------------------------------------
In computer vision specifically, our labels may be complex, and measuring their drift
is not a straightforward task. Therefore, we calculate drift on different properties of the
labels, on which we can directly measure drift.

Which Label Properties Are Used?
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
================  ===================================  ==========
Task Type         Property name                        What is it
================  ===================================  ==========
Classification    Samples Per Class                    Number of images per class
Object Detection  Samples Per Class                    Number of bounding boxes per class
Object Detection  Bounding Box Area                    Area of bounding box (height * width)
Object Detection  Number of Bounding Boxes Per Image   Number of bounding box objects in each image
================  ===================================  ==========


Run the check on a Classification task (MNIST)
==============================================
Imports
-------

.. GENERATED FROM PYTHON SOURCE LINES 66-69

.. code-block:: default

    from deepchecks.vision.checks import TrainTestLabelDrift
    from deepchecks.vision.datasets.classification.mnist import load_dataset








.. GENERATED FROM PYTHON SOURCE LINES 70-72

Loading Data
------------

.. GENERATED FROM PYTHON SOURCE LINES 72-77

.. code-block:: default



    train_ds = load_dataset(train=True, batch_size=64, object_type='VisionData')
    test_ds = load_dataset(train=False, batch_size=1000, object_type='VisionData')








.. GENERATED FROM PYTHON SOURCE LINES 78-80

Running TrainTestLabelDrift on classification
---------------------------------------------

.. GENERATED FROM PYTHON SOURCE LINES 80-84

.. code-block:: default


    check = TrainTestLabelDrift()
    check.run(train_ds, test_ds)





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    Validating Input:   0%| | 0/1 [00:00<?, ? /s]                                                 Ingesting Batches - Train Dataset:   0%|                                                                                                                                                             | 0/157 [00:00<?, ? Batch/s]    Ingesting Batches - Train Dataset:  17%|###########################                                                                                                                                  | 27/157 [00:00<00:00, 267.44 Batch/s]    Ingesting Batches - Train Dataset:  35%|#######################################################                                                                                                      | 55/157 [00:00<00:00, 269.50 Batch/s]    Ingesting Batches - Train Dataset:  52%|##################################################################################                                                                           | 82/157 [00:00<00:00, 269.59 Batch/s]    Ingesting Batches - Train Dataset:  69%|#############################################################################################################                                                | 109/157 [00:00<00:00, 265.92 Batch/s]    Ingesting Batches - Train Dataset:  87%|########################################################################################################################################                     | 136/157 [00:00<00:00, 264.06 Batch/s]                                                                                                                                                                                                                                                Ingesting Batches - Test Dataset:   0%|                                                                                                                                                             | 0/157 [00:00<?, ? Batch/s]    Ingesting Batches - Test Dataset:   1%|##                                                                                                                                                           | 2/157 [00:00<00:08, 17.72 Batch/s]    Ingesting Batches - Test Dataset:   3%|####                                                                                                                                                         | 4/157 [00:00<00:08, 17.87 Batch/s]    Ingesting Batches - Test Dataset:   4%|######                                                                                                                                                       | 6/157 [00:00<00:08, 18.01 Batch/s]    Ingesting Batches - Test Dataset:   5%|########                                                                                                                                                     | 8/157 [00:00<00:08, 18.07 Batch/s]    Ingesting Batches - Test Dataset:   6%|##########                                                                                                                                                   | 10/157 [00:00<00:08, 18.10 Batch/s]                                                                                                                                                                                                                                             Computing Check:   0%| | 0/1 [00:00<?, ? Check/s]                                                 

.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">

    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"
        integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer">
    </script>

    <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
    <script type="text/javascript">if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>
    <script type="text/javascript">
        if (typeof require !== 'undefined') {
            require.undef("plotly");
            requirejs.config({
                paths: {'plotly': ['https://cdn.plot.ly/plotly-2.8.3.min']}
            });
            require(
                ['plotly'],
                function(Plotly) {
                    window._Plotly = Plotly;
                    window.Plotly = Plotly;
                    console.log('Loaded plotly successfully');
                },
                function() {console.log('Failed to load plotly')}
            );
        } else {
            console.log('requirejs is not present');
        }
    </script>
    <h4><b>Train Test Label Drift</b></h4><p>    Calculate label drift between train dataset and test dataset, using statistical measures.</p><h5><b>Additional Outputs</b></h5><div><span>The Drift score is a measure for the difference between two distributions. In this check, drift is measured for the distribution of the following label properties: ['Samples Per Class'].</span></div><div>                            <div id="3ce507b6-e195-4c24-9f14-ac24cdf6f82a" class="plotly-graph-div" style="height:400px; width:700px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("3ce507b6-e195-4c24-9f14-ac24cdf6f82a")) {                    Plotly.newPlot(                        "3ce507b6-e195-4c24-9f14-ac24cdf6f82a",                        [{"base":0,"marker":{"color":"#01B8AA"},"offsetgroup":"0","orientation":"h","showlegend":false,"x":[0.0015246522691041119],"y":["Drift Score"],"type":"bar","xaxis":"x","yaxis":"y"},{"marker":{"color":"#00008b"},"name":"Train Dataset","x":["0","1","2","3","4","5","6","7","8","9"],"y":[0.099,0.1177,0.0985,0.0957,0.0955,0.0938,0.1016,0.1053,0.0946,0.0983],"type":"bar","xaxis":"x2","yaxis":"y2"},{"marker":{"color":"#69b3a2"},"name":"Test Dataset","x":["0","1","2","3","4","5","6","7","8","9"],"y":[0.098,0.1135,0.1032,0.101,0.0982,0.0892,0.0958,0.1028,0.0974,0.1009],"type":"bar","xaxis":"x2","yaxis":"y2"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"showgrid":false,"gridcolor":"black","linecolor":"black","range":[0,0.4],"dtick":0.05,"fixedrange":true},"yaxis":{"anchor":"x","domain":[0.9200000000000002,1.0],"showgrid":false,"showline":false,"showticklabels":false,"zeroline":false,"color":"black","fixedrange":true},"xaxis2":{"anchor":"y2","domain":[0.0,1.0],"type":"category"},"yaxis2":{"anchor":"x2","domain":[0.0,0.7200000000000001],"fixedrange":true,"range":[0,0.12947],"title":{"text":"Frequency"}},"annotations":[{"font":{"size":16},"showarrow":false,"text":"Drift Score (PSI)","x":0.5,"xanchor":"center","xref":"paper","y":1.0000000000000002,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Distribution Plot","x":0.5,"xanchor":"center","xref":"paper","y":0.7200000000000001,"yanchor":"bottom","yref":"paper"}],"legend":{"title":{"text":"Legend"},"yanchor":"top","y":0.6},"title":{"text":"Samples Per Class","x":0.5,"xanchor":"center"},"width":700,"height":400,"bargroupgap":0},                        {"responsive": true}                    ).then(function(){
                            
    var gd = document.getElementById('3ce507b6-e195-4c24-9f14-ac24cdf6f82a');
    var x = new MutationObserver(function (mutations, observer) {{
            var display = window.getComputedStyle(gd).display;
            if (!display || display === 'none') {{
                console.log([gd, 'removed!']);
                Plotly.purge(gd);
                observer.disconnect();
            }}
    }});

    // Listen for the removal of the full notebook cells
    var notebookContainer = gd.closest('#notebook-container');
    if (notebookContainer) {{
        x.observe(notebookContainer, {childList: true});
    }}

    // Listen for the clearing of the current output cell
    var outputEl = gd.closest('.output');
    if (outputEl) {{
        x.observe(outputEl, {childList: true});
    }}

                            })                };                });            </script>        </div><div><p style="font-size:0.9em;line-height:1;"><i>Note - data sampling: Running on 10000 <b>train</b> data samples out of 60000. Sample size can be controlled with the "n_samples" parameter.</i></p></div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 85-90

Understanding the results
-------------------------
We can see there is almost no drift between the train & test labels. This means the
split to train and test was good (as it is balanced and random). Let's check the
performance of a simple model trained on MNIST.

.. GENERATED FROM PYTHON SOURCE LINES 90-98

.. code-block:: default


    from deepchecks.vision.checks import ClassPerformance
    from deepchecks.vision.datasets.classification.mnist import \
        load_model as load_mnist_model

    mnist_model = load_mnist_model(pretrained=True)
    ClassPerformance().run(train_ds, test_ds, mnist_model)





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    Validating Input:   0%| | 0/1 [00:00<?, ? /s]    Validating Input: 100%|#| 1/1 [00:00<00:00,  7.78 /s]                                                         Ingesting Batches - Train Dataset:   0%|                                                                                                                                                             | 0/157 [00:00<?, ? Batch/s]    Ingesting Batches - Train Dataset:  10%|################                                                                                                                                             | 16/157 [00:00<00:00, 151.04 Batch/s]    Ingesting Batches - Train Dataset:  20%|################################                                                                                                                             | 32/157 [00:00<00:00, 152.73 Batch/s]    Ingesting Batches - Train Dataset:  31%|################################################                                                                                                             | 48/157 [00:00<00:00, 153.04 Batch/s]    Ingesting Batches - Train Dataset:  41%|################################################################                                                                                             | 64/157 [00:00<00:00, 152.13 Batch/s]    Ingesting Batches - Train Dataset:  51%|################################################################################                                                                             | 80/157 [00:00<00:00, 152.34 Batch/s]    Ingesting Batches - Train Dataset:  61%|################################################################################################                                                             | 96/157 [00:00<00:00, 152.82 Batch/s]    Ingesting Batches - Train Dataset:  71%|###############################################################################################################9                                             | 112/157 [00:00<00:00, 152.81 Batch/s]    Ingesting Batches - Train Dataset:  82%|################################################################################################################################                             | 128/157 [00:00<00:00, 152.80 Batch/s]    Ingesting Batches - Train Dataset:  92%|################################################################################################################################################             | 144/157 [00:00<00:00, 152.92 Batch/s]                                                                                                                                                                                                                                                Ingesting Batches - Test Dataset:   0%|                                                                                                                                                             | 0/157 [00:00<?, ? Batch/s]    Ingesting Batches - Test Dataset:   1%|#                                                                                                                                                            | 1/157 [00:00<00:15,  9.84 Batch/s]    Ingesting Batches - Test Dataset:   2%|###                                                                                                                                                          | 3/157 [00:00<00:14, 10.32 Batch/s]    Ingesting Batches - Test Dataset:   3%|#####                                                                                                                                                        | 5/157 [00:00<00:14, 10.37 Batch/s]    Ingesting Batches - Test Dataset:   4%|######9                                                                                                                                                      | 7/157 [00:00<00:14, 10.35 Batch/s]    Ingesting Batches - Test Dataset:   6%|#########                                                                                                                                                    | 9/157 [00:00<00:14, 10.42 Batch/s]                                                                                                                                                                                                                                            Computing Check:   0%| | 0/1 [00:00<?, ? Check/s]    Computing Check: 100%|#| 1/1 [00:00<00:00,  5.09 Check/s]                                                         

.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">

    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"
        integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer">
    </script>

    <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
    <script type="text/javascript">if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>
    <script type="text/javascript">
        if (typeof require !== 'undefined') {
            require.undef("plotly");
            requirejs.config({
                paths: {'plotly': ['https://cdn.plot.ly/plotly-2.8.3.min']}
            });
            require(
                ['plotly'],
                function(Plotly) {
                    window._Plotly = Plotly;
                    window.Plotly = Plotly;
                    console.log('Loaded plotly successfully');
                },
                function() {console.log('Failed to load plotly')}
            );
        } else {
            console.log('requirejs is not present');
        }
    </script>
    <h4><b>Class Performance</b></h4><p>Summarize given metrics on a dataset and model.</p><h5><b>Additional Outputs</b></h5><div>                            <div id="3933140b-6d23-4f8f-90a5-b1374196ebdf" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("3933140b-6d23-4f8f-90a5-b1374196ebdf")) {                    Plotly.newPlot(                        "3933140b-6d23-4f8f-90a5-b1374196ebdf",                        [{"alignmentgroup":"True","bingroup":"x","histfunc":"sum","hovertemplate":"Dataset=Train<br>Metric=Recall<br>Class Name=%{x}<br>sum of Value=%{y}<extra></extra>","legendgroup":"Train","marker":{"color":"#00008b","pattern":{"shape":""}},"name":"Train","offsetgroup":"Train","orientation":"v","showlegend":true,"x":["0","1","6","7","3","2","4","5","9","8"],"xaxis":"x","y":[0.9959595959595959,0.9932030586236194,0.9931102362204725,0.9886039886039886,0.9864158829676071,0.9857868020304569,0.9842931937172775,0.9797441364605544,0.9766022380467956,0.9693446088794926],"yaxis":"y","type":"histogram"},{"alignmentgroup":"True","bingroup":"x","histfunc":"sum","hovertemplate":"Dataset=Train<br>Metric=Precision<br>Class Name=%{x}<br>sum of Value=%{y}<extra></extra>","legendgroup":"Train","marker":{"color":"#00008b","pattern":{"shape":""}},"name":"Train","offsetgroup":"Train","orientation":"v","showlegend":false,"x":["8","6","4","5","0","1","3","7","2","9"],"xaxis":"x2","y":[0.990280777537797,0.9901864573110893,0.9884332281808622,0.9881720430107527,0.9879759519038076,0.9848357203032856,0.9843587069864442,0.9830028328611898,0.9808080808080808,0.9785932721712538],"yaxis":"y2","type":"histogram"},{"alignmentgroup":"True","bingroup":"x","histfunc":"sum","hovertemplate":"Dataset=Test<br>Metric=Recall<br>Class Name=%{x}<br>sum of Value=%{y}<extra></extra>","legendgroup":"Test","marker":{"color":"#69b3a2","pattern":{"shape":""}},"name":"Test","offsetgroup":"Test","orientation":"v","showlegend":true,"x":["1","0","4","2","5","6","3","7","9","8"],"xaxis":"x","y":[0.9973568281938326,0.9959183673469387,0.9887983706720977,0.9883720930232558,0.9865470852017937,0.9853862212943633,0.9841584158415841,0.9834630350194552,0.9722497522299306,0.9671457905544147],"yaxis":"y","type":"histogram"},{"alignmentgroup":"True","bingroup":"x","histfunc":"sum","hovertemplate":"Dataset=Test<br>Metric=Precision<br>Class Name=%{x}<br>sum of Value=%{y}<extra></extra>","legendgroup":"Test","marker":{"color":"#69b3a2","pattern":{"shape":""}},"name":"Test","offsetgroup":"Test","orientation":"v","showlegend":false,"x":["6","8","4","3","5","2","1","0","9","7"],"xaxis":"x2","y":[0.9936842105263158,0.9936708860759493,0.9898063200815495,0.9880715705765407,0.9854423292273237,0.9845559845559846,0.9834926151172894,0.9809045226130654,0.9770916334661355,0.9758687258687259],"yaxis":"y2","type":"histogram"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,0.475],"title":{"text":"Class"},"type":"category"},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Value"},"showticklabels":true},"xaxis2":{"anchor":"y2","domain":[0.525,1.0],"matches":"x","title":{"text":"Class"},"type":"category"},"yaxis2":{"anchor":"x2","domain":[0.0,1.0],"showticklabels":true,"title":{"text":"Value"}},"annotations":[{"font":{},"showarrow":false,"text":"Recall","x":0.2375,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Precision","x":0.7625,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"}],"legend":{"title":{"text":"Dataset"},"tracegroupgap":0},"margin":{"t":60},"barmode":"group"},                        {"responsive": true}                    ).then(function(){
                            
    var gd = document.getElementById('3933140b-6d23-4f8f-90a5-b1374196ebdf');
    var x = new MutationObserver(function (mutations, observer) {{
            var display = window.getComputedStyle(gd).display;
            if (!display || display === 'none') {{
                console.log([gd, 'removed!']);
                Plotly.purge(gd);
                observer.disconnect();
            }}
    }});

    // Listen for the removal of the full notebook cells
    var notebookContainer = gd.closest('#notebook-container');
    if (notebookContainer) {{
        x.observe(notebookContainer, {childList: true});
    }}

    // Listen for the clearing of the current output cell
    var outputEl = gd.closest('.output');
    if (outputEl) {{
        x.observe(outputEl, {childList: true});
    }}

                            })                };                });            </script>        </div><div><p style="font-size:0.9em;line-height:1;"><i>Note - data sampling: Running on 10000 <b>train</b> data samples out of 60000. Sample size can be controlled with the "n_samples" parameter.</i></p></div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 99-105

MNIST with label drift
======================
Now, let's try to separate the MNIST dataset in a different manner that will result
in a label drift, and see how it affects the performance. We are going to create a
custom `collate_fn`` in the test dataset, that will select samples with class 0 in
a 1/10 chances.

.. GENERATED FROM PYTHON SOURCE LINES 105-112

.. code-block:: default


    import torch

    mnist_dataloader_train = load_dataset(train=True, batch_size=64, object_type='DataLoader')
    mnist_dataloader_test = load_dataset(train=False, batch_size=1000, object_type='DataLoader')
    full_mnist = torch.utils.data.ConcatDataset([mnist_dataloader_train.dataset, mnist_dataloader_test.dataset])








.. GENERATED FROM PYTHON SOURCE LINES 113-115

.. code-block:: default

    train_dataset, test_dataset = torch.utils.data.random_split(full_mnist, [60000,10000], generator=torch.Generator().manual_seed(42))








.. GENERATED FROM PYTHON SOURCE LINES 116-118

Inserting drift to the test set
-------------------------------

.. GENERATED FROM PYTHON SOURCE LINES 118-143

.. code-block:: default


    import numpy as np
    from torch.utils.data._utils.collate import default_collate

    np.random.seed(42)


    def collate_test(batch):
        modified_batch = []
        for item in batch:
            image, label = item
            if label == 0:
                if np.random.randint(5) == 0:
                    modified_batch.append(item)
                else:
                    modified_batch.append((image, 1))
            else:
                modified_batch.append(item)

        return default_collate(modified_batch)


    mod_train_loader = torch.utils.data.DataLoader(train_dataset, batch_size=64)
    mod_test_loader = torch.utils.data.DataLoader(test_dataset, batch_size=64, collate_fn=collate_test)








.. GENERATED FROM PYTHON SOURCE LINES 144-150

.. code-block:: default


    from deepchecks.vision.datasets.classification.mnist import MNISTData

    mod_train_ds = MNISTData(mod_train_loader)
    mod_test_ds = MNISTData(mod_test_loader)








.. GENERATED FROM PYTHON SOURCE LINES 151-153

Run the check
=============

.. GENERATED FROM PYTHON SOURCE LINES 153-157

.. code-block:: default


    check = TrainTestLabelDrift()
    check.run(mod_train_ds, mod_test_ds)





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    Validating Input:   0%| | 0/1 [00:00<?, ? /s]                                                 Ingesting Batches - Train Dataset:   0%|                                                                                                                                                             | 0/157 [00:00<?, ? Batch/s]    Ingesting Batches - Train Dataset:  17%|##########################                                                                                                                                   | 26/157 [00:00<00:00, 253.99 Batch/s]    Ingesting Batches - Train Dataset:  33%|####################################################                                                                                                         | 52/157 [00:00<00:00, 255.75 Batch/s]    Ingesting Batches - Train Dataset:  50%|##############################################################################                                                                               | 78/157 [00:00<00:00, 255.12 Batch/s]    Ingesting Batches - Train Dataset:  66%|########################################################################################################                                                     | 104/157 [00:00<00:00, 255.55 Batch/s]    Ingesting Batches - Train Dataset:  83%|##################################################################################################################################                           | 130/157 [00:00<00:00, 256.20 Batch/s]    Ingesting Batches - Train Dataset:  99%|############################################################################################################################################################ | 156/157 [00:00<00:00, 256.21 Batch/s]                                                                                                                                                                                                                                                Ingesting Batches - Test Dataset:   0%|                                                                                                                                                             | 0/157 [00:00<?, ? Batch/s]    Ingesting Batches - Test Dataset:  17%|##########################                                                                                                                                   | 26/157 [00:00<00:00, 254.37 Batch/s]    Ingesting Batches - Test Dataset:  33%|####################################################                                                                                                         | 52/157 [00:00<00:00, 253.26 Batch/s]    Ingesting Batches - Test Dataset:  50%|##############################################################################                                                                               | 78/157 [00:00<00:00, 254.05 Batch/s]    Ingesting Batches - Test Dataset:  66%|########################################################################################################                                                     | 104/157 [00:00<00:00, 253.84 Batch/s]    Ingesting Batches - Test Dataset:  83%|##################################################################################################################################                           | 130/157 [00:00<00:00, 253.39 Batch/s]    Ingesting Batches - Test Dataset:  99%|############################################################################################################################################################ | 156/157 [00:00<00:00, 253.95 Batch/s]                                                                                                                                                                                                                                               Computing Check:   0%| | 0/1 [00:00<?, ? Check/s]                                                 

.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">

    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"
        integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer">
    </script>

    <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
    <script type="text/javascript">if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>
    <script type="text/javascript">
        if (typeof require !== 'undefined') {
            require.undef("plotly");
            requirejs.config({
                paths: {'plotly': ['https://cdn.plot.ly/plotly-2.8.3.min']}
            });
            require(
                ['plotly'],
                function(Plotly) {
                    window._Plotly = Plotly;
                    window.Plotly = Plotly;
                    console.log('Loaded plotly successfully');
                },
                function() {console.log('Failed to load plotly')}
            );
        } else {
            console.log('requirejs is not present');
        }
    </script>
    <h4><b>Train Test Label Drift</b></h4><p>    Calculate label drift between train dataset and test dataset, using statistical measures.</p><h5><b>Additional Outputs</b></h5><div><span>The Drift score is a measure for the difference between two distributions. In this check, drift is measured for the distribution of the following label properties: ['Samples Per Class'].</span></div><div>                            <div id="68508475-6e22-4f2a-8acf-266e1a28d910" class="plotly-graph-div" style="height:400px; width:700px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("68508475-6e22-4f2a-8acf-266e1a28d910")) {                    Plotly.newPlot(                        "68508475-6e22-4f2a-8acf-266e1a28d910",                        [{"base":0,"marker":{"color":"#01B8AA"},"offsetgroup":"0","orientation":"h","showlegend":false,"x":[0.1],"y":["Drift Score"],"type":"bar","xaxis":"x","yaxis":"y"},{"base":0.1,"marker":{"color":"#F2C80F"},"offsetgroup":"0","orientation":"h","showlegend":false,"x":[0.05306377889661715],"y":["Drift Score"],"type":"bar","xaxis":"x","yaxis":"y"},{"marker":{"color":"#00008b"},"name":"Train Dataset","x":["0","1","2","3","4","5","6","7","8","9"],"y":[0.0985,0.1134,0.1019,0.1023,0.0965,0.0877,0.0948,0.1024,0.0991,0.1034],"type":"bar","xaxis":"x2","yaxis":"y2"},{"marker":{"color":"#69b3a2"},"name":"Test Dataset","x":["0","1","2","3","4","5","6","7","8","9"],"y":[0.021,0.1821,0.1033,0.102,0.0979,0.0886,0.0946,0.1096,0.0952,0.1057],"type":"bar","xaxis":"x2","yaxis":"y2"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"showgrid":false,"gridcolor":"black","linecolor":"black","range":[0,0.4],"dtick":0.05,"fixedrange":true},"yaxis":{"anchor":"x","domain":[0.9200000000000002,1.0],"showgrid":false,"showline":false,"showticklabels":false,"zeroline":false,"color":"black","fixedrange":true},"xaxis2":{"anchor":"y2","domain":[0.0,1.0],"type":"category"},"yaxis2":{"anchor":"x2","domain":[0.0,0.7200000000000001],"fixedrange":true,"range":[0,0.20031000000000002],"title":{"text":"Frequency"}},"annotations":[{"font":{"size":16},"showarrow":false,"text":"Drift Score (PSI)","x":0.5,"xanchor":"center","xref":"paper","y":1.0000000000000002,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Distribution Plot","x":0.5,"xanchor":"center","xref":"paper","y":0.7200000000000001,"yanchor":"bottom","yref":"paper"}],"legend":{"title":{"text":"Legend"},"yanchor":"top","y":0.6},"title":{"text":"Samples Per Class","x":0.5,"xanchor":"center"},"width":700,"height":400,"bargroupgap":0},                        {"responsive": true}                    ).then(function(){
                            
    var gd = document.getElementById('68508475-6e22-4f2a-8acf-266e1a28d910');
    var x = new MutationObserver(function (mutations, observer) {{
            var display = window.getComputedStyle(gd).display;
            if (!display || display === 'none') {{
                console.log([gd, 'removed!']);
                Plotly.purge(gd);
                observer.disconnect();
            }}
    }});

    // Listen for the removal of the full notebook cells
    var notebookContainer = gd.closest('#notebook-container');
    if (notebookContainer) {{
        x.observe(notebookContainer, {childList: true});
    }}

    // Listen for the clearing of the current output cell
    var outputEl = gd.closest('.output');
    if (outputEl) {{
        x.observe(outputEl, {childList: true});
    }}

                            })                };                });            </script>        </div><div><p style="font-size:0.9em;line-height:1;"><i>Note - data sampling: Running on 10000 <b>train</b> data samples out of 60000. Sample size can be controlled with the "n_samples" parameter.</i></p></div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 158-162

Add a condition
---------------
We could also add a condition to the check to alert us to changes in the label
distribution, such as the one that occurred here.

.. GENERATED FROM PYTHON SOURCE LINES 162-168

.. code-block:: default


    check = TrainTestLabelDrift().add_condition_drift_score_not_greater_than()
    check.run(mod_train_ds, mod_test_ds)

    # As we can see, the condition alerts us to the present of drift in the label.





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    Validating Input:   0%| | 0/1 [00:00<?, ? /s]                                                 Ingesting Batches - Train Dataset:   0%|                                                                                                                                                             | 0/157 [00:00<?, ? Batch/s]    Ingesting Batches - Train Dataset:  17%|##########################                                                                                                                                   | 26/157 [00:00<00:00, 256.27 Batch/s]    Ingesting Batches - Train Dataset:  33%|####################################################                                                                                                         | 52/157 [00:00<00:00, 253.93 Batch/s]    Ingesting Batches - Train Dataset:  50%|##############################################################################                                                                               | 78/157 [00:00<00:00, 254.06 Batch/s]    Ingesting Batches - Train Dataset:  66%|########################################################################################################                                                     | 104/157 [00:00<00:00, 255.18 Batch/s]    Ingesting Batches - Train Dataset:  83%|##################################################################################################################################                           | 130/157 [00:00<00:00, 255.34 Batch/s]    Ingesting Batches - Train Dataset:  99%|############################################################################################################################################################ | 156/157 [00:00<00:00, 255.84 Batch/s]                                                                                                                                                                                                                                                Ingesting Batches - Test Dataset:   0%|                                                                                                                                                             | 0/157 [00:00<?, ? Batch/s]    Ingesting Batches - Test Dataset:  17%|##########################                                                                                                                                   | 26/157 [00:00<00:00, 254.26 Batch/s]    Ingesting Batches - Test Dataset:  33%|####################################################                                                                                                         | 52/157 [00:00<00:00, 252.27 Batch/s]    Ingesting Batches - Test Dataset:  50%|##############################################################################                                                                               | 78/157 [00:00<00:00, 253.28 Batch/s]    Ingesting Batches - Test Dataset:  66%|########################################################################################################                                                     | 104/157 [00:00<00:00, 253.00 Batch/s]    Ingesting Batches - Test Dataset:  83%|##################################################################################################################################                           | 130/157 [00:00<00:00, 252.48 Batch/s]    Ingesting Batches - Test Dataset:  99%|############################################################################################################################################################ | 156/157 [00:00<00:00, 252.52 Batch/s]                                                                                                                                                                                                                                               Computing Check:   0%| | 0/1 [00:00<?, ? Check/s]                                                 

.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">

    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"
        integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer">
    </script>

    <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
    <script type="text/javascript">if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>
    <script type="text/javascript">
        if (typeof require !== 'undefined') {
            require.undef("plotly");
            requirejs.config({
                paths: {'plotly': ['https://cdn.plot.ly/plotly-2.8.3.min']}
            });
            require(
                ['plotly'],
                function(Plotly) {
                    window._Plotly = Plotly;
                    window.Plotly = Plotly;
                    console.log('Loaded plotly successfully');
                },
                function() {console.log('Failed to load plotly')}
            );
        } else {
            console.log('requirejs is not present');
        }
    </script>
    <h4><b>Train Test Label Drift</b></h4><p>    Calculate label drift between train dataset and test dataset, using statistical measures.</p><h5><b>Conditions Summary</b></h5><style type="text/css">
    #T_d48ce table {
      text-align: left;
      white-space: pre-wrap;
    }
    #T_d48ce thead {
      text-align: left;
      white-space: pre-wrap;
    }
    #T_d48ce tbody {
      text-align: left;
      white-space: pre-wrap;
    }
    #T_d48ce th {
      text-align: left;
      white-space: pre-wrap;
    }
    #T_d48ce td {
      text-align: left;
      white-space: pre-wrap;
    }
    </style>
    <table id="T_d48ce">
      <thead>
        <tr>
          <th id="T_d48ce_level0_col0" class="col_heading level0 col0" >Status</th>
          <th id="T_d48ce_level0_col1" class="col_heading level0 col1" >Condition</th>
          <th id="T_d48ce_level0_col2" class="col_heading level0 col2" >More Info</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td id="T_d48ce_row0_col0" class="data row0 col0" ><div style="color: red;text-align: center"></div></td>
          <td id="T_d48ce_row0_col1" class="data row0 col1" >PSI <= 0.15 and Earth Mover's Distance <= 0.075 for label drift</td>
          <td id="T_d48ce_row0_col2" class="data row0 col2" >Found non-continues label properties with PSI drift score above threshold: {'Samples Per Class': '0.16'}
    </td>
        </tr>
      </tbody>
    </table>
    <h5><b>Additional Outputs</b></h5><div><span>The Drift score is a measure for the difference between two distributions. In this check, drift is measured for the distribution of the following label properties: ['Samples Per Class'].</span></div><div>                            <div id="3f874e7c-702d-4b8a-b661-c5f59c742f42" class="plotly-graph-div" style="height:400px; width:700px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("3f874e7c-702d-4b8a-b661-c5f59c742f42")) {                    Plotly.newPlot(                        "3f874e7c-702d-4b8a-b661-c5f59c742f42",                        [{"base":0,"marker":{"color":"#01B8AA"},"offsetgroup":"0","orientation":"h","showlegend":false,"x":[0.1],"y":["Drift Score"],"type":"bar","xaxis":"x","yaxis":"y"},{"base":0.1,"marker":{"color":"#F2C80F"},"offsetgroup":"0","orientation":"h","showlegend":false,"x":[0.05802493083209265],"y":["Drift Score"],"type":"bar","xaxis":"x","yaxis":"y"},{"marker":{"color":"#00008b"},"name":"Train Dataset","x":["0","1","2","3","4","5","6","7","8","9"],"y":[0.0985,0.1134,0.1019,0.1023,0.0965,0.0877,0.0948,0.1024,0.0991,0.1034],"type":"bar","xaxis":"x2","yaxis":"y2"},{"marker":{"color":"#69b3a2"},"name":"Test Dataset","x":["0","1","2","3","4","5","6","7","8","9"],"y":[0.0202,0.1829,0.1033,0.102,0.0979,0.0886,0.0946,0.1096,0.0952,0.1057],"type":"bar","xaxis":"x2","yaxis":"y2"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"showgrid":false,"gridcolor":"black","linecolor":"black","range":[0,0.4],"dtick":0.05,"fixedrange":true},"yaxis":{"anchor":"x","domain":[0.9200000000000002,1.0],"showgrid":false,"showline":false,"showticklabels":false,"zeroline":false,"color":"black","fixedrange":true},"xaxis2":{"anchor":"y2","domain":[0.0,1.0],"type":"category"},"yaxis2":{"anchor":"x2","domain":[0.0,0.7200000000000001],"fixedrange":true,"range":[0,0.20119000000000004],"title":{"text":"Frequency"}},"annotations":[{"font":{"size":16},"showarrow":false,"text":"Drift Score (PSI)","x":0.5,"xanchor":"center","xref":"paper","y":1.0000000000000002,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Distribution Plot","x":0.5,"xanchor":"center","xref":"paper","y":0.7200000000000001,"yanchor":"bottom","yref":"paper"}],"legend":{"title":{"text":"Legend"},"yanchor":"top","y":0.6},"title":{"text":"Samples Per Class","x":0.5,"xanchor":"center"},"width":700,"height":400,"bargroupgap":0},                        {"responsive": true}                    ).then(function(){
                            
    var gd = document.getElementById('3f874e7c-702d-4b8a-b661-c5f59c742f42');
    var x = new MutationObserver(function (mutations, observer) {{
            var display = window.getComputedStyle(gd).display;
            if (!display || display === 'none') {{
                console.log([gd, 'removed!']);
                Plotly.purge(gd);
                observer.disconnect();
            }}
    }});

    // Listen for the removal of the full notebook cells
    var notebookContainer = gd.closest('#notebook-container');
    if (notebookContainer) {{
        x.observe(notebookContainer, {childList: true});
    }}

    // Listen for the clearing of the current output cell
    var outputEl = gd.closest('.output');
    if (outputEl) {{
        x.observe(outputEl, {childList: true});
    }}

                            })                };                });            </script>        </div><div><p style="font-size:0.9em;line-height:1;"><i>Note - data sampling: Running on 10000 <b>train</b> data samples out of 60000. Sample size can be controlled with the "n_samples" parameter.</i></p></div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 169-173

Results
-------
We can see the check successfully detects the (expected) drift in class 0
distribution between the train and test sets

.. GENERATED FROM PYTHON SOURCE LINES 175-177

But how does this affect the performance of the model?
------------------------------------------------------

.. GENERATED FROM PYTHON SOURCE LINES 177-180

.. code-block:: default


    ClassPerformance().run(mod_train_ds, mod_test_ds, mnist_model)





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    Validating Input:   0%| | 0/1 [00:00<?, ? /s]                                                 Ingesting Batches - Train Dataset:   0%|                                                                                                                                                             | 0/157 [00:00<?, ? Batch/s]    Ingesting Batches - Train Dataset:  10%|###############                                                                                                                                              | 15/157 [00:00<00:00, 143.78 Batch/s]    Ingesting Batches - Train Dataset:  19%|##############################                                                                                                                               | 30/157 [00:00<00:00, 141.23 Batch/s]    Ingesting Batches - Train Dataset:  29%|#############################################                                                                                                                | 45/157 [00:00<00:00, 144.41 Batch/s]    Ingesting Batches - Train Dataset:  38%|############################################################                                                                                                 | 60/157 [00:00<00:00, 146.09 Batch/s]    Ingesting Batches - Train Dataset:  48%|###########################################################################                                                                                  | 75/157 [00:00<00:00, 144.97 Batch/s]    Ingesting Batches - Train Dataset:  57%|##########################################################################################                                                                   | 90/157 [00:00<00:00, 144.68 Batch/s]    Ingesting Batches - Train Dataset:  67%|#########################################################################################################                                                    | 105/157 [00:00<00:00, 144.68 Batch/s]    Ingesting Batches - Train Dataset:  76%|########################################################################################################################                                     | 120/157 [00:00<00:00, 145.61 Batch/s]    Ingesting Batches - Train Dataset:  86%|#######################################################################################################################################                      | 135/157 [00:00<00:00, 146.39 Batch/s]    Ingesting Batches - Train Dataset:  96%|######################################################################################################################################################       | 150/157 [00:01<00:00, 146.57 Batch/s]                                                                                                                                                                                                                                                Ingesting Batches - Test Dataset:   0%|                                                                                                                                                             | 0/157 [00:00<?, ? Batch/s]    Ingesting Batches - Test Dataset:  10%|###############                                                                                                                                              | 15/157 [00:00<00:00, 147.91 Batch/s]    Ingesting Batches - Test Dataset:  19%|##############################                                                                                                                               | 30/157 [00:00<00:00, 148.35 Batch/s]    Ingesting Batches - Test Dataset:  29%|#############################################                                                                                                                | 45/157 [00:00<00:00, 148.14 Batch/s]    Ingesting Batches - Test Dataset:  38%|############################################################                                                                                                 | 60/157 [00:00<00:00, 147.25 Batch/s]    Ingesting Batches - Test Dataset:  48%|###########################################################################                                                                                  | 75/157 [00:00<00:00, 147.28 Batch/s]    Ingesting Batches - Test Dataset:  57%|##########################################################################################                                                                   | 90/157 [00:00<00:00, 147.39 Batch/s]    Ingesting Batches - Test Dataset:  67%|#########################################################################################################                                                    | 105/157 [00:00<00:00, 147.37 Batch/s]    Ingesting Batches - Test Dataset:  76%|########################################################################################################################                                     | 120/157 [00:00<00:00, 147.56 Batch/s]    Ingesting Batches - Test Dataset:  86%|#######################################################################################################################################                      | 135/157 [00:00<00:00, 147.06 Batch/s]    Ingesting Batches - Test Dataset:  96%|######################################################################################################################################################       | 150/157 [00:01<00:00, 146.91 Batch/s]                                                                                                                                                                                                                                               Computing Check:   0%| | 0/1 [00:00<?, ? Check/s]                                                 

.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">

    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"
        integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer">
    </script>

    <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
    <script type="text/javascript">if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>
    <script type="text/javascript">
        if (typeof require !== 'undefined') {
            require.undef("plotly");
            requirejs.config({
                paths: {'plotly': ['https://cdn.plot.ly/plotly-2.8.3.min']}
            });
            require(
                ['plotly'],
                function(Plotly) {
                    window._Plotly = Plotly;
                    window.Plotly = Plotly;
                    console.log('Loaded plotly successfully');
                },
                function() {console.log('Failed to load plotly')}
            );
        } else {
            console.log('requirejs is not present');
        }
    </script>
    <h4><b>Class Performance</b></h4><p>Summarize given metrics on a dataset and model.</p><h5><b>Additional Outputs</b></h5><div>                            <div id="73a43d24-7164-4021-951f-4033e18a0ec2" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("73a43d24-7164-4021-951f-4033e18a0ec2")) {                    Plotly.newPlot(                        "73a43d24-7164-4021-951f-4033e18a0ec2",                        [{"alignmentgroup":"True","bingroup":"x","histfunc":"sum","hovertemplate":"Dataset=Train<br>Metric=Recall<br>Class Name=%{x}<br>sum of Value=%{y}<extra></extra>","legendgroup":"Train","marker":{"color":"#00008b","pattern":{"shape":""}},"name":"Train","offsetgroup":"Train","orientation":"v","showlegend":true,"x":["0","1","2","5","6","4","7","3","9","8"],"xaxis":"x","y":[0.9969543147208122,0.9947089947089947,0.9911678115799804,0.9874572405929305,0.9873417721518988,0.9844559585492227,0.982421875,0.9824046920821115,0.97678916827853,0.9757820383451059],"yaxis":"y","type":"histogram"},{"alignmentgroup":"True","bingroup":"x","histfunc":"sum","hovertemplate":"Dataset=Train<br>Metric=Precision<br>Class Name=%{x}<br>sum of Value=%{y}<extra></extra>","legendgroup":"Train","marker":{"color":"#00008b","pattern":{"shape":""}},"name":"Train","offsetgroup":"Train","orientation":"v","showlegend":false,"x":["8","3","6","5","0","4","1","2","7","9"],"xaxis":"x2","y":[0.995880535530381,0.9921026653504442,0.9894291754756871,0.9885844748858448,0.9869346733668342,0.9854771784232366,0.9851528384279477,0.9824902723735408,0.9785992217898832,0.97678916827853],"yaxis":"y2","type":"histogram"},{"alignmentgroup":"True","bingroup":"x","histfunc":"sum","hovertemplate":"Dataset=Test<br>Metric=Recall<br>Class Name=%{x}<br>sum of Value=%{y}<extra></extra>","legendgroup":"Test","marker":{"color":"#69b3a2","pattern":{"shape":""}},"name":"Test","offsetgroup":"Test","orientation":"v","showlegend":true,"x":["0","6","4","2","3","5","7","9","8","1"],"xaxis":"x","y":[1.0,0.9936575052854123,0.9908069458631257,0.9845111326234269,0.9833333333333333,0.9830699774266366,0.9808394160583942,0.9772942289498581,0.9642857142857143,0.5650273224043716],"yaxis":"y","type":"histogram"},{"alignmentgroup":"True","bingroup":"x","histfunc":"sum","hovertemplate":"Dataset=Test<br>Metric=Precision<br>Class Name=%{x}<br>sum of Value=%{y}<extra></extra>","legendgroup":"Test","marker":{"color":"#69b3a2","pattern":{"shape":""}},"name":"Test","offsetgroup":"Test","orientation":"v","showlegend":false,"x":["8","3","6","1","5","2","4","7","9","0"],"xaxis":"x2","y":[0.9935064935064936,0.9901283316880553,0.9884332281808622,0.9875835721107927,0.9875283446712018,0.9826086956521739,0.980788675429727,0.9799453053783045,0.9772942289498581,0.2],"yaxis":"y2","type":"histogram"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,0.475],"title":{"text":"Class"},"type":"category"},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Value"},"showticklabels":true},"xaxis2":{"anchor":"y2","domain":[0.525,1.0],"matches":"x","title":{"text":"Class"},"type":"category"},"yaxis2":{"anchor":"x2","domain":[0.0,1.0],"showticklabels":true,"title":{"text":"Value"}},"annotations":[{"font":{},"showarrow":false,"text":"Recall","x":0.2375,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Precision","x":0.7625,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"}],"legend":{"title":{"text":"Dataset"},"tracegroupgap":0},"margin":{"t":60},"barmode":"group"},                        {"responsive": true}                    ).then(function(){
                            
    var gd = document.getElementById('73a43d24-7164-4021-951f-4033e18a0ec2');
    var x = new MutationObserver(function (mutations, observer) {{
            var display = window.getComputedStyle(gd).display;
            if (!display || display === 'none') {{
                console.log([gd, 'removed!']);
                Plotly.purge(gd);
                observer.disconnect();
            }}
    }});

    // Listen for the removal of the full notebook cells
    var notebookContainer = gd.closest('#notebook-container');
    if (notebookContainer) {{
        x.observe(notebookContainer, {childList: true});
    }}

    // Listen for the clearing of the current output cell
    var outputEl = gd.closest('.output');
    if (outputEl) {{
        x.observe(outputEl, {childList: true});
    }}

                            })                };                });            </script>        </div><div><p style="font-size:0.9em;line-height:1;"><i>Note - data sampling: Running on 10000 <b>train</b> data samples out of 60000. Sample size can be controlled with the "n_samples" parameter.</i></p></div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 181-184

Inferring the results
---------------------
We can see the drop in the precision of class 0, which was caused by the class imbalance indicated earlier by the label drift check.

.. GENERATED FROM PYTHON SOURCE LINES 186-188

Run the check on an Object Detection task (COCO)
================================================

.. GENERATED FROM PYTHON SOURCE LINES 188-194

.. code-block:: default


    from deepchecks.vision.datasets.detection.coco import load_dataset

    train_ds = load_dataset(train=True, object_type='VisionData')
    test_ds = load_dataset(train=False, object_type='VisionData')








.. GENERATED FROM PYTHON SOURCE LINES 195-199

.. code-block:: default


    check = TrainTestLabelDrift()
    check.run(train_ds, test_ds)





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    Validating Input:   0%| | 0/1 [00:00<?, ? /s]                                                 Ingesting Batches - Train Dataset:   0%|  | 0/2 [00:00<?, ? Batch/s]    Ingesting Batches - Train Dataset:  50%|# | 1/2 [00:00<00:00,  4.81 Batch/s]    Ingesting Batches - Train Dataset: 100%|##| 2/2 [00:00<00:00,  5.06 Batch/s]                                                                                Ingesting Batches - Test Dataset:   0%|  | 0/2 [00:00<?, ? Batch/s]    Ingesting Batches - Test Dataset:  50%|# | 1/2 [00:00<00:00,  5.80 Batch/s]    Ingesting Batches - Test Dataset: 100%|##| 2/2 [00:00<00:00,  5.41 Batch/s]                                                                               Computing Check:   0%| | 0/1 [00:00<?, ? Check/s]    Computing Check: 100%|#| 1/1 [00:00<00:00,  8.41 Check/s]                                                         

.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">

    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"
        integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer">
    </script>

    <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
    <script type="text/javascript">if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>
    <script type="text/javascript">
        if (typeof require !== 'undefined') {
            require.undef("plotly");
            requirejs.config({
                paths: {'plotly': ['https://cdn.plot.ly/plotly-2.8.3.min']}
            });
            require(
                ['plotly'],
                function(Plotly) {
                    window._Plotly = Plotly;
                    window.Plotly = Plotly;
                    console.log('Loaded plotly successfully');
                },
                function() {console.log('Failed to load plotly')}
            );
        } else {
            console.log('requirejs is not present');
        }
    </script>
    <h4><b>Train Test Label Drift</b></h4><p>    Calculate label drift between train dataset and test dataset, using statistical measures.</p><h5><b>Additional Outputs</b></h5><div><span>The Drift score is a measure for the difference between two distributions. In this check, drift is measured for the distribution of the following label properties: ['Samples Per Class', 'Bounding Box Area (in pixels)', 'Number of Bounding Boxes Per Image'].</span></div><div>                            <div id="88e3efc2-d090-4677-99c9-f2dfd41582d2" class="plotly-graph-div" style="height:400px; width:700px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("88e3efc2-d090-4677-99c9-f2dfd41582d2")) {                    Plotly.newPlot(                        "88e3efc2-d090-4677-99c9-f2dfd41582d2",                        [{"base":0,"marker":{"color":"#01B8AA"},"offsetgroup":"0","orientation":"h","showlegend":false,"x":[0.1],"y":["Drift Score"],"type":"bar","xaxis":"x","yaxis":"y"},{"base":0.1,"marker":{"color":"#F2C80F"},"offsetgroup":"0","orientation":"h","showlegend":false,"x":[0.1],"y":["Drift Score"],"type":"bar","xaxis":"x","yaxis":"y"},{"base":0.2,"marker":{"color":"#FE9666"},"offsetgroup":"0","orientation":"h","showlegend":false,"x":[0.09999999999999998],"y":["Drift Score"],"type":"bar","xaxis":"x","yaxis":"y"},{"base":0.3,"marker":{"color":"#FD625E"},"offsetgroup":"0","orientation":"h","showlegend":false,"x":[0.06784698965998964],"y":["Drift Score"],"type":"bar","xaxis":"x","yaxis":"y"},{"marker":{"color":"#00008b"},"name":"Train Dataset","x":["book","bowl","cup","donut","knife","person","spoon","teddy bear","umbrella","wine glass"],"y":[0.00922509225092251,0.04428044280442804,0.055350553505535055,0.0,0.025830258302583026,0.2564575645756458,0.03690036900369004,0.007380073800738007,0.033210332103321034,0.027675276752767528],"type":"bar","xaxis":"x2","yaxis":"y2"},{"marker":{"color":"#69b3a2"},"name":"Test Dataset","x":["book","bowl","cup","donut","knife","person","spoon","teddy bear","umbrella","wine glass"],"y":[0.06201550387596899,0.0103359173126615,0.015503875968992248,0.03617571059431524,0.00516795865633075,0.2971576227390181,0.00516795865633075,0.04392764857881137,0.0,0.002583979328165375],"type":"bar","xaxis":"x2","yaxis":"y2"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"showgrid":false,"gridcolor":"black","linecolor":"black","range":[0,0.4678469896599896],"dtick":0.05,"fixedrange":true},"yaxis":{"anchor":"x","domain":[0.9400000000000001,1.0],"showgrid":false,"showline":false,"showticklabels":false,"zeroline":false,"color":"black","fixedrange":true},"xaxis2":{"anchor":"y2","domain":[0.0,1.0],"type":"category"},"yaxis2":{"anchor":"x2","domain":[0.26,0.74],"fixedrange":true,"range":[0,0.3268733850129199],"title":{"text":"Frequency"}},"xaxis3":{"anchor":"y3","domain":[0.0,1.0]},"yaxis3":{"anchor":"x3","domain":[0.0,0.06]},"annotations":[{"font":{"size":16},"showarrow":false,"text":"Drift Score (PSI)","x":0.5,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Distribution Plot","x":0.5,"xanchor":"center","xref":"paper","y":0.74,"yanchor":"bottom","yref":"paper"},{"showarrow":false,"text":"* Showing the top 10 largest difference between categories out of total 71 categories.<br>Shown data is 49.63% of train data and 47.8% of test data.","x":0,"xanchor":"left","xref":"paper","y":-0.2,"yref":"paper"}],"legend":{"title":{"text":"Legend"},"yanchor":"top","y":0.6},"title":{"text":"Samples Per Class","x":0.5,"xanchor":"center"},"width":700,"height":400,"bargroupgap":0},                        {"responsive": true}                    ).then(function(){
                            
    var gd = document.getElementById('88e3efc2-d090-4677-99c9-f2dfd41582d2');
    var x = new MutationObserver(function (mutations, observer) {{
            var display = window.getComputedStyle(gd).display;
            if (!display || display === 'none') {{
                console.log([gd, 'removed!']);
                Plotly.purge(gd);
                observer.disconnect();
            }}
    }});

    // Listen for the removal of the full notebook cells
    var notebookContainer = gd.closest('#notebook-container');
    if (notebookContainer) {{
        x.observe(notebookContainer, {childList: true});
    }}

    // Listen for the clearing of the current output cell
    var outputEl = gd.closest('.output');
    if (outputEl) {{
        x.observe(outputEl, {childList: true});
    }}

                            })                };                });            </script>        </div><div>                            <div id="6ae46e43-834a-45f7-97e9-476b9608ed34" class="plotly-graph-div" style="height:400px; width:700px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("6ae46e43-834a-45f7-97e9-476b9608ed34")) {                    Plotly.newPlot(                        "6ae46e43-834a-45f7-97e9-476b9608ed34",                        [{"base":0,"marker":{"color":"#01B8AA"},"offsetgroup":"0","orientation":"h","showlegend":false,"x":[0.05183872396987153],"y":["Drift Score"],"type":"bar","xaxis":"x","yaxis":"y"},{"fill":"tozeroy","line":{"color":"#00008b","shape":"spline"},"name":"Train Dataset","x":[0.0,0.8571428571428571,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.7142857142857142,1.8199999999999985,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.379999999999999,2.571428571428571,2.6800000000000033,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.4285714285714284,3.9400000000000013,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.280000000000001,4.285714285714286,4.5,4.5,5.0,5.0,5.0,5.020000000000003,5.060000000000002,5.142857142857142,6.0,6.0,6.0,6.046875,6.540000000000006,6.580000000000005,6.857142857142857,7.0,7.0,7.060000000000002,7.100000000000001,7.7142857142857135,8.0,8.0,8.0,8.0,8.0,8.0,8.46875,8.571428571428571,8.619999999999997,9.239999999999995,9.428571428571429,9.880000000000003,10.285714285714285,10.880000000000003,11.0,11.0,11.142857142857142,11.280000000000001,11.660000000000004,12.0,12.857142857142856,12.920000000000002,13.0,13.0,13.439999999999998,13.660000000000004,13.714285714285714,14.0,14.571428571428571,14.96,15.428571428571427,15.840000000000003,16.0,16.285714285714285,16.480000000000004,17.0,17.142857142857142,17.439999999999998,18.0,18.857142857142858,19.220000000000006,19.400000000000006,19.71428571428571,20.57142857142857,21.428571428571427,21.92,22.285714285714285,23.142857142857142,24.0,24.857142857142854,25.71428571428571,25.980000000000054,26.57142857142857,27.428571428571427,28.285714285714285,29.142857142857142,30.0,30.857142857142854,31.71428571428571,32.57142857142857,33.42857142857142,34.285714285714285,35.14285714285714,35.40000000000002,36.0,36.857142857142854,37.714285714285715,38.57142857142857,39.42857142857142,39.480000000000004,40.285714285714285,41.14285714285714,42.0],"y":[0.04894023507038192,0.06456544659285358,0.06698771155221361,0.06698771155221361,0.06698771155221361,0.06698771155221361,0.06698771155221361,0.06698771155221361,0.06698771155221361,0.06698771155221361,0.06698771155221361,0.07748811883302732,0.07875725445510534,0.08072033314256598,0.08072033314256598,0.08072033314256598,0.08072033314256598,0.08072033314256598,0.08072033314256598,0.08072033314256598,0.08072033314256598,0.08072033314256598,0.08072033314256598,0.08072033314256598,0.08072033314256598,0.08072033314256598,0.08072033314256598,0.08072033314256598,0.08072033314256598,0.08072033314256598,0.08072033314256598,0.08072033314256598,0.08399206637843068,0.08517110378837582,0.08569753786556422,0.08665347001359497,0.08665347001359497,0.08665347001359497,0.08665347001359497,0.08665347001359497,0.08665347001359497,0.08665347001359497,0.08665347001359497,0.08665347001359497,0.08665347001359497,0.08659400840452068,0.08474009005867508,0.08441280808161408,0.08441280808161408,0.08441280808161408,0.08441280808161408,0.08441280808161408,0.08441280808161408,0.08441280808161408,0.08441280808161408,0.08441280808161408,0.08441280808161408,0.08262886128887172,0.08258840728025862,0.08096948640473353,0.08096948640473353,0.07658031088932249,0.07658031088932249,0.07658031088932249,0.07639150409801046,0.07601159045309551,0.07521563023881063,0.06661970513711409,0.06661970513711409,0.06661970513711409,0.06614547340579004,0.061215216882769145,0.060821371541293336,0.058121498464291106,0.05674962733729302,0.05674962733729302,0.056177354938280084,0.055797091961453285,0.05006891578403675,0.04746359949518582,0.04746359949518582,0.04746359949518582,0.04746359949518582,0.04746359949518582,0.04746359949518582,0.04325495415607468,0.0423442917890778,0.04191508284092898,0.03655033375348872,0.03497457507580184,0.031357417520455996,0.028347742668556847,0.02446863587380236,0.023771741175657852,0.023771741175657852,0.02298216358897454,0.022265702511209306,0.020494566718827743,0.019172460263981925,0.016837880148429945,0.016716092687163356,0.016569599367726322,0.016569599367726322,0.01591855112180414,0.015678504388076466,0.01562679405499043,0.015397509744170739,0.015106401832524465,0.0149880954930694,0.014876770456854108,0.014768141008597994,0.01471592067330395,0.01460166939083283,0.014505357014742665,0.014158566741286936,0.014038641816600212,0.013754286311391245,0.013097718385295302,0.011867630918424412,0.011307971309272191,0.011029792644628798,0.010550139287613575,0.009330596585169595,0.008275725230066542,0.0077246452592071736,0.007323261046334052,0.006353762409902395,0.005284926584834158,0.0041294737802991715,0.0029912566496131466,0.0026644688232269767,0.002014081975617219,0.0013217236092169658,0.0009819218168640722,0.0009988655667414253,0.0013164899209639046,0.001821740716787443,0.002361413541933909,0.0027919877813333766,0.003051024728235435,0.003200179109021447,0.0033930848392118122,0.0034835707682107585,0.0037764969638985966,0.004390580705728561,0.005136246757253552,0.00582263363425021,0.006251443420402565,0.006265538310256079,0.00628565175719751,0.005881655818747534,0.005092855306226294],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"line":{"color":"#00008b","dash":"dash"},"mode":"lines+markers","name":"Train Mean","x":[8.46875,8.46875],"y":[0,0.04325495415607468],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"line":{"color":"#00008b"},"mode":"lines","name":"Train Median","x":[4.5,4.5],"y":[0,0.08096948640473353],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"fill":"tozeroy","line":{"color":"#69b3a2","shape":"spline"},"name":"Test Dataset","x":[0.0,0.8571428571428571,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.7142857142857142,1.8199999999999985,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.379999999999999,2.571428571428571,2.6800000000000033,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.4285714285714284,3.9400000000000013,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.280000000000001,4.285714285714286,4.5,4.5,5.0,5.0,5.0,5.020000000000003,5.060000000000002,5.142857142857142,6.0,6.0,6.0,6.046875,6.540000000000006,6.580000000000005,6.857142857142857,7.0,7.0,7.060000000000002,7.100000000000001,7.7142857142857135,8.0,8.0,8.0,8.0,8.0,8.0,8.46875,8.571428571428571,8.619999999999997,9.239999999999995,9.428571428571429,9.880000000000003,10.285714285714285,10.880000000000003,11.0,11.0,11.142857142857142,11.280000000000001,11.660000000000004,12.0,12.857142857142856,12.920000000000002,13.0,13.0,13.439999999999998,13.660000000000004,13.714285714285714,14.0,14.571428571428571,14.96,15.428571428571427,15.840000000000003,16.0,16.285714285714285,16.480000000000004,17.0,17.142857142857142,17.439999999999998,18.0,18.857142857142858,19.220000000000006,19.400000000000006,19.71428571428571,20.57142857142857,21.428571428571427,21.92,22.285714285714285,23.142857142857142,24.0,24.857142857142854,25.71428571428571,25.980000000000054,26.57142857142857,27.428571428571427,28.285714285714285,29.142857142857142,30.0,30.857142857142854,31.71428571428571,32.57142857142857,33.42857142857142,34.285714285714285,35.14285714285714,35.40000000000002,36.0,36.857142857142854,37.714285714285715,38.57142857142857,39.42857142857142,39.480000000000004,40.285714285714285,41.14285714285714,42.0],"y":[0.057029358317031445,0.09728348579231273,0.10350101010652178,0.10350101010652178,0.10350101010652178,0.10350101010652178,0.10350101010652178,0.10350101010652178,0.10350101010652178,0.10350101010652178,0.10350101010652178,0.1265511227169469,0.12848533586368777,0.13078931419711262,0.13078931419711262,0.13078931419711262,0.13078931419711262,0.13078931419711262,0.13078931419711262,0.13078931419711262,0.13078931419711262,0.13078931419711262,0.13078931419711262,0.13078931419711262,0.13078931419711262,0.13078931419711262,0.13078931419711262,0.13078931419711262,0.13078931419711262,0.13078931419711262,0.13078931419711262,0.13078931419711262,0.1316081845254857,0.1300897180244155,0.12872064335443276,0.12288728543720695,0.12288728543720695,0.12288728543720695,0.12288728543720695,0.12288728543720695,0.12288728543720695,0.12288728543720695,0.12288728543720695,0.12288728543720695,0.12288728543720695,0.11207345174970038,0.09716732926935953,0.09539281139680486,0.09539281139680486,0.09539281139680486,0.09539281139680486,0.09539281139680486,0.09539281139680486,0.09539281139680486,0.09539281139680486,0.09539281139680486,0.09539281139680486,0.0872438918862756,0.08708093724538685,0.08110402543202964,0.08110402543202964,0.06844586269516488,0.06844586269516488,0.06844586269516488,0.06798276051404656,0.06706714698067968,0.06521579286325337,0.049595926422974085,0.049595926422974085,0.049595926422974085,0.04891208382106454,0.04251433630175314,0.04204726075835257,0.038957580456247316,0.037442719774540785,0.037442719774540785,0.036818382567202684,0.036405598164872675,0.030378269420038427,0.02785534376861144,0.02785534376861144,0.02785534376861144,0.02785534376861144,0.02785534376861144,0.02785534376861144,0.02451849852209783,0.023978114757644664,0.02375128724322664,0.022694330373308987,0.02307015204536634,0.025068654413724478,0.027668566796292895,0.031425147310150524,0.032045634581702905,0.032045634581702905,0.032697080153808636,0.03322792104027216,0.034212282842040954,0.034544044775081176,0.03371014575161668,0.03357436108546756,0.03338819485127416,0.03338819485127416,0.03210658075220691,0.03131512517771131,0.031106432287548898,0.029936542875867472,0.027390320757629486,0.025633779422654535,0.02351723576344171,0.02155615798706872,0.020738852840519437,0.019183149461718618,0.01805679491623068,0.014895504926411373,0.014040026776702352,0.012379711174483998,0.010066605561859631,0.009263257000849201,0.00959162162827022,0.009766280274268069,0.009943751704764974,0.008701167287751221,0.005285374882964162,0.0033118083229248586,0.0021423640579542403,0.0005745607136017642,0.00010176695150797843,1.1899532539984825e-05,9.184716425726005e-07,3.815685306354567e-07,4.679562893110556e-08,1.5737887314575767e-09,3.4937248544499146e-11,5.119552265240402e-13,4.951949989944487e-15,3.161706124262659e-17,1.3325015743794526e-19,3.7069347434945246e-22,6.807115669164951e-25,8.251108527307193e-28,6.601801287954871e-31,7.168523010954821e-32,3.4866919272035896e-34,1.2155300054340013e-37,2.797169416332091e-41,4.248864075113435e-45,4.260179361772772e-49,2.41969428115572e-49,2.8195766797126954e-53,1.2318020294154699e-57,3.552212188667749e-62],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"line":{"color":"#69b3a2","dash":"dash"},"mode":"lines+markers","name":"Test Mean","x":[6.046875,6.046875],"y":[0,0.04891208382106454],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"line":{"color":"#69b3a2"},"mode":"lines","name":"Test Median","x":[4.0,4.0],"y":[0,0.09539281139680486],"type":"scatter","xaxis":"x2","yaxis":"y2"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"showgrid":false,"gridcolor":"black","linecolor":"black","range":[0,0.4],"dtick":0.05,"fixedrange":true},"yaxis":{"anchor":"x","domain":[0.9200000000000002,1.0],"showgrid":false,"showline":false,"showticklabels":false,"zeroline":false,"color":"black","fixedrange":true},"xaxis2":{"anchor":"y2","domain":[0.0,1.0],"fixedrange":false,"range":[1.0,39.480000000000004],"title":{"text":"Number of Bounding Boxes Per Image"}},"yaxis2":{"anchor":"x2","domain":[0.0,0.7200000000000001],"title":{"text":"Probability Density"},"fixedrange":true},"annotations":[{"font":{"size":16},"showarrow":false,"text":"Drift Score (Earth Mover's Distance)","x":0.5,"xanchor":"center","xref":"paper","y":1.0000000000000002,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Distribution Plot","x":0.5,"xanchor":"center","xref":"paper","y":0.7200000000000001,"yanchor":"bottom","yref":"paper"}],"legend":{"title":{"text":"Legend"},"yanchor":"top","y":0.6},"title":{"text":"Number of Bounding Boxes Per Image","x":0.5,"xanchor":"center"},"width":700,"height":400,"bargroupgap":0},                        {"responsive": true}                    ).then(function(){
                            
    var gd = document.getElementById('6ae46e43-834a-45f7-97e9-476b9608ed34');
    var x = new MutationObserver(function (mutations, observer) {{
            var display = window.getComputedStyle(gd).display;
            if (!display || display === 'none') {{
                console.log([gd, 'removed!']);
                Plotly.purge(gd);
                observer.disconnect();
            }}
    }});

    // Listen for the removal of the full notebook cells
    var notebookContainer = gd.closest('#notebook-container');
    if (notebookContainer) {{
        x.observe(notebookContainer, {childList: true});
    }}

    // Listen for the clearing of the current output cell
    var outputEl = gd.closest('.output');
    if (outputEl) {{
        x.observe(outputEl, {childList: true});
    }}

                            })                };                });            </script>        </div><div>                            <div id="72d260f7-472c-43a7-8416-45c50d9a15b9" class="plotly-graph-div" style="height:400px; width:700px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("72d260f7-472c-43a7-8416-45c50d9a15b9")) {                    Plotly.newPlot(                        "72d260f7-472c-43a7-8416-45c50d9a15b9",                        [{"base":0,"marker":{"color":"#01B8AA"},"offsetgroup":"0","orientation":"h","showlegend":false,"x":[0.013214831819451916],"y":["Drift Score"],"type":"bar","xaxis":"x","yaxis":"y"},{"fill":"tozeroy","line":{"color":"#00008b","shape":"spline"},"name":"Train Dataset","x":[3.493009908065739,46.41265768214859,51.10813177954306,76.88536764765333,83.94273435113558,103.30569961879274,108.4980302212984,127.62714137333616,136.48563785745276,147.8790143268389,171.90680854202714,200.57837492349904,205.44248079009824,236.70297299791395,253.15718809029576,289.0503839865049,292.5184480698237,333.79956986274533,335.7367455708607,381.4755943077062,393.01354144900637,430.20437063567044,455.6465453368899,482.73847770578595,492.0480410907625,543.5290107529712,548.4866495837392,584.8341799773024,614.9098393260906,620.1565052248957,717.8607116304015,725.544230508587,798.8028253455685,820.3226847658756,939.8570172377209,1008.1759357189414,1068.0219004847213,1164.8619568320632,1273.679096139435,1297.4576411492114,1459.0596017771932,1478.347692096481,1725.1627805339058,1800.7256957016168,1966.1801954767059,2095.510824939762,2218.677117241704,2552.6823239585133,2695.9199493594037,2695.9199493594037,2884.667702073985,3033.429185603277,3358.906179305146,3448.657837375121,3448.657837375121,3850.774027330493,4061.6526223865544,4682.808568282142,4704.340686901171,5145.088884791536,5707.7791680932005,5876.148701833879,6342.22871506916,6547.019912674679,7313.779641664086,7413.331382523989,7492.263366263511,8596.463348126337,8995.810795269528,9475.062955606645,10748.725558569133,10961.472074332114,12629.591953455374,12799.472345364944,14128.628115249625,14624.066273420107,14847.201083535298,15087.80407524417,16048.853159222117,16675.20564407803,18365.350485894713,19431.266632569324,21273.41808999768,21838.370749354184,21934.35290517613,23127.59430668711,24556.476754454125,25938.271434128357,27272.02386952728,27815.58487211206,29244.639536932147,31839.572061282335,33361.73389262909,36554.926168688165,41155.27099434368,43865.21280044419,44268.3226149702,51175.49943220021,51475.793381036005,56208.319603997705,58485.78606395623,65796.07269571225,70040.44630779012,73106.35932746826,80416.64595922429,80498.52589437107,83410.71811385578,87726.93259098032,95037.21922273633,102347.50585449235,105302.27047396384,107613.2089390678,109657.79248624836,116968.07911800439,124278.36574976041,131588.65238151644,138898.93901327244,140773.90009330303,146209.22564502846,149195.0197665958,153519.5122767845,160829.7989085405,163740.34793855072,168140.08554029654,175450.37217205256,182760.65880380856,190070.9454355646,197381.2320673206,197767.24337177875,204691.51869907664,212001.80533083266,219312.09196258866,226622.3785943447,233932.6652261007,241242.95185785674,248553.23848961276,255863.52512136876,259623.59710336776,263173.8117531248,270484.0983848808,277794.3850166368,285104.67164839286,292414.95828014886,299725.2449119049,307035.5315436609,314345.8181754169,321656.10480717296,328966.39143892896,336276.678070685,343586.964702441,350897.25133419706,358207.53796595306],"y":[2.383998614137916e-05,2.3860284182789617e-05,2.3862489752684797e-05,2.38745449024477e-05,2.3877829752130877e-05,2.3886807672667108e-05,2.3889206552755424e-05,2.389801281304469e-05,2.3902074120602365e-05,2.390728195297053e-05,2.3918207203019794e-05,2.3931141424739576e-05,2.393332462675462e-05,2.3947278801349526e-05,2.3954570283231413e-05,2.3970347922083944e-05,2.3971863079133107e-05,2.398977223386286e-05,2.3990606928141787e-05,2.4010165840287374e-05,2.4015054478365452e-05,2.4030688049136914e-05,2.404127360909012e-05,2.405244779877552e-05,2.4056264270074534e-05,2.4077153551376394e-05,2.4079145920264347e-05,2.4093649650254898e-05,2.4105512787886277e-05,2.41075694919036e-05,2.4145173452868242e-05,2.4148074522578988e-05,2.4175322900927894e-05,2.4183185317952046e-05,2.4225682508801844e-05,2.424907473080979e-05,2.426902854993088e-05,2.4300251717668988e-05,2.4333761666885672e-05,2.43408618854776e-05,2.4386998465997043e-05,2.4392258143273484e-05,2.4454899586050586e-05,2.4472344508753927e-05,2.4507698532514032e-05,2.45326106901898e-05,2.455411117761281e-05,2.4601481911898066e-05,2.4616898753939892e-05,2.4616898753939892e-05,2.4632725054892946e-05,2.4641604569951535e-05,2.465000442986841e-05,2.4649664283576335e-05,2.4649664283576335e-05,2.4634106351373405e-05,2.461682184831822e-05,2.4529842757416904e-05,2.4525871276541806e-05,2.443070046655917e-05,2.4271373184218325e-05,2.4215626816316514e-05,2.4042398496835944e-05,2.3957668019367102e-05,2.359544357390637e-05,2.3543366900975118e-05,2.350127638524564e-05,2.284153085108934e-05,2.2572280306219374e-05,2.222947192369065e-05,2.1225090295842863e-05,2.1045573900459405e-05,1.9545403190279364e-05,1.9384968124031554e-05,1.809595378437827e-05,1.7604334392739684e-05,1.7381679695476275e-05,1.7140962717493234e-05,1.6176334642503316e-05,1.554855313101456e-05,1.3881087957163622e-05,1.2864707180850956e-05,1.1202662389290449e-05,1.072127107420932e-05,1.0640919882801272e-05,9.678239245815802e-06,8.617240578681016e-06,7.688919154056859e-06,6.883436714332241e-06,6.580082444613429e-06,5.8486708958532895e-06,4.747349681051456e-06,4.2224264292217656e-06,3.362572022822063e-06,2.5608566211605182e-06,2.2585581035298246e-06,2.2216611641042532e-06,1.8120319951164305e-06,1.8011985016306137e-06,1.6759382324166848e-06,1.6380421111570666e-06,1.5654998535791792e-06,1.5284461930058354e-06,1.4890457459425972e-06,1.3165698339338352e-06,1.3139643868536968e-06,1.2135153429711356e-06,1.0476682521249776e-06,7.870340368637217e-07,6.191969056372518e-07,5.776873858319797e-07,5.528480074281693e-07,5.351980203091243e-07,4.958281787609637e-07,4.81626106264264e-07,4.6933401874165914e-07,4.358036744922884e-07,4.246476042712324e-07,3.968045243228321e-07,3.899176986797511e-07,3.965025323455769e-07,4.481165022398888e-07,4.742910455683998e-07,5.06154265436011e-07,5.097846906632127e-07,4.466020629196066e-07,3.6047396231375723e-07,2.9303314183619234e-07,2.9014996709476936e-07,2.4603072911626023e-07,2.1241132484648893e-07,1.9582079215022866e-07,1.8599344450124174e-07,1.6113696762731253e-07,1.252430594791592e-07,1.125389379962939e-07,1.4609986139818263e-07,1.7708499008422019e-07,2.0835174038706636e-07,2.549036661050406e-07,2.476250962619646e-07,1.8397614283374858e-07,1.0192990328111886e-07,4.4768074834676614e-08,2.706978910851414e-08,3.8092302580806685e-08,5.630033164719776e-08,6.032975673572496e-08,4.481580682406715e-08,2.298461368581524e-08,8.135640398495751e-09,1.9873790820628555e-09],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"line":{"color":"#00008b","dash":"dash"},"mode":"lines+markers","name":"Train Mean","x":[21838.370749354184,21838.370749354184],"y":[0,1.072127107420932e-05],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"line":{"color":"#00008b"},"mode":"lines","name":"Train Median","x":[2695.9199493594037,2695.9199493594037],"y":[0,2.4616898753939892e-05],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"fill":"tozeroy","line":{"color":"#69b3a2","shape":"spline"},"name":"Test Dataset","x":[3.493009908065739,46.41265768214859,51.10813177954306,76.88536764765333,83.94273435113558,103.30569961879274,108.4980302212984,127.62714137333616,136.48563785745276,147.8790143268389,171.90680854202714,200.57837492349904,205.44248079009824,236.70297299791395,253.15718809029576,289.0503839865049,292.5184480698237,333.79956986274533,335.7367455708607,381.4755943077062,393.01354144900637,430.20437063567044,455.6465453368899,482.73847770578595,492.0480410907625,543.5290107529712,548.4866495837392,584.8341799773024,614.9098393260906,620.1565052248957,717.8607116304015,725.544230508587,798.8028253455685,820.3226847658756,939.8570172377209,1008.1759357189414,1068.0219004847213,1164.8619568320632,1273.679096139435,1297.4576411492114,1459.0596017771932,1478.347692096481,1725.1627805339058,1800.7256957016168,1966.1801954767059,2095.510824939762,2218.677117241704,2552.6823239585133,2695.9199493594037,2695.9199493594037,2884.667702073985,3033.429185603277,3358.906179305146,3448.657837375121,3448.657837375121,3850.774027330493,4061.6526223865544,4682.808568282142,4704.340686901171,5145.088884791536,5707.7791680932005,5876.148701833879,6342.22871506916,6547.019912674679,7313.779641664086,7413.331382523989,7492.263366263511,8596.463348126337,8995.810795269528,9475.062955606645,10748.725558569133,10961.472074332114,12629.591953455374,12799.472345364944,14128.628115249625,14624.066273420107,14847.201083535298,15087.80407524417,16048.853159222117,16675.20564407803,18365.350485894713,19431.266632569324,21273.41808999768,21838.370749354184,21934.35290517613,23127.59430668711,24556.476754454125,25938.271434128357,27272.02386952728,27815.58487211206,29244.639536932147,31839.572061282335,33361.73389262909,36554.926168688165,41155.27099434368,43865.21280044419,44268.3226149702,51175.49943220021,51475.793381036005,56208.319603997705,58485.78606395623,65796.07269571225,70040.44630779012,73106.35932746826,80416.64595922429,80498.52589437107,83410.71811385578,87726.93259098032,95037.21922273633,102347.50585449235,105302.27047396384,107613.2089390678,109657.79248624836,116968.07911800439,124278.36574976041,131588.65238151644,138898.93901327244,140773.90009330303,146209.22564502846,149195.0197665958,153519.5122767845,160829.7989085405,163740.34793855072,168140.08554029654,175450.37217205256,182760.65880380856,190070.9454355646,197381.2320673206,197767.24337177875,204691.51869907664,212001.80533083266,219312.09196258866,226622.3785943447,233932.6652261007,241242.95185785674,248553.23848961276,255863.52512136876,259623.59710336776,263173.8117531248,270484.0983848808,277794.3850166368,285104.67164839286,292414.95828014886,299725.2449119049,307035.5315436609,314345.8181754169,321656.10480717296,328966.39143892896,336276.678070685,343586.964702441,350897.25133419706,358207.53796595306],"y":[1.987041578730965e-05,1.9885101479139023e-05,1.9886699750619383e-05,1.9895444527182274e-05,1.9897830013356954e-05,1.9904355773305186e-05,1.9906100922945503e-05,1.9912512776639572e-05,1.9915472728014003e-05,1.991927100472979e-05,1.992724928473577e-05,1.9936712627220394e-05,1.9938311930096937e-05,1.9948547704825313e-05,1.9953905765543745e-05,1.9965522856277205e-05,1.9966640159882008e-05,1.997986976129663e-05,1.9980487409072398e-05,1.9994988083346614e-05,1.999862090813038e-05,2.001026192978425e-05,2.0018164942081566e-05,2.0026526237100026e-05,2.00293865079509e-05,2.004508417677554e-05,2.0046585189780135e-05,2.0057532683294004e-05,2.006651475805766e-05,2.00680745779194e-05,2.0096736182627227e-05,2.0098959067831394e-05,2.0119925126783575e-05,2.0126005412984602e-05,2.01591282667207e-05,2.0177562962477965e-05,2.0193413945259334e-05,2.0218473601311656e-05,2.0245760704513097e-05,2.0251600340312178e-05,2.0290114626037954e-05,2.029457472014504e-05,2.034906341109864e-05,2.0364784550288535e-05,2.0397630185411793e-05,2.0421792813661573e-05,2.044356776608343e-05,2.049653226887319e-05,2.0516515481093383e-05,2.0516515481093383e-05,2.0540339928714622e-05,2.0557105616340197e-05,2.0587598354537496e-05,2.0594512176948832e-05,2.0594512176948832e-05,2.0617559492816446e-05,2.0624470124330322e-05,2.0624210719932898e-05,2.0623651814730434e-05,2.060416539548192e-05,2.0557162163794667e-05,2.0538323970975127e-05,2.0474852083632104e-05,2.0441754974973254e-05,2.0290153435090192e-05,2.0267318646225035e-05,2.024870687988337e-05,1.9942501505246693e-05,1.9811387139430408e-05,1.9640414895852258e-05,1.9118022236811034e-05,1.902170946815938e-05,1.818658162041694e-05,1.809424705773684e-05,1.733214844302146e-05,1.703207112681989e-05,1.6894447110277487e-05,1.674444493685522e-05,1.6130493215566173e-05,1.5719601650995212e-05,1.458209390703104e-05,1.3853135013746403e-05,1.2594998541455869e-05,1.2213489216260135e-05,1.2148995169947352e-05,1.1356946045172967e-05,1.0438305699885e-05,9.588745850427989e-06,8.810756082611013e-06,8.506497118614712e-06,7.743788144621574e-06,6.501081617630668e-06,5.857566414086377e-06,4.702109246778845e-06,3.441214559124615e-06,2.8784722034035376e-06,2.8041933138392474e-06,1.8255866479462483e-06,1.7933865755132577e-06,1.3705672004376597e-06,1.2155562908432818e-06,8.788654642221161e-07,7.702226597966731e-07,7.213037639335425e-07,6.781221482670019e-07,6.780958565169949e-07,6.820833419781498e-07,7.014122713565411e-07,7.473821376113716e-07,7.770588690305327e-07,7.801555698503646e-07,7.794421708319048e-07,7.77173718815353e-07,7.6701219193454e-07,7.721533214128848e-07,7.916109220102198e-07,7.914842868688679e-07,7.830759422544838e-07,7.329553759347276e-07,6.892701927318373e-07,6.099075738335217e-07,4.561874576428256e-07,3.969315010517597e-07,3.1708599817708264e-07,2.2034777577776517e-07,1.686889138911826e-07,1.4679506947157048e-07,1.3397693940866478e-07,1.3324781995793972e-07,1.1778917799266536e-07,1.0221845181698676e-07,1.054053774404299e-07,1.468428547864801e-07,2.3137336366359564e-07,3.4118210825943583e-07,4.406797573201835e-07,4.914112332639632e-07,4.905323967975325e-07,4.7286245895905256e-07,3.9892259890495505e-07,3.122972422959625e-07,2.5527161898945235e-07,2.4037972325576947e-07,2.443504780588368e-07,2.3060885506532374e-07,1.830910690651649e-07,1.1870484748956981e-07,6.72149430996027e-08,4.5342787807743495e-08,4.9646760422640507e-08,6.408079032380829e-08,7.115020518097623e-08],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"line":{"color":"#69b3a2","dash":"dash"},"mode":"lines+markers","name":"Test Mean","x":[25938.271434128357,25938.271434128357],"y":[0,9.588745850427989e-06],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"line":{"color":"#69b3a2"},"mode":"lines","name":"Test Median","x":[3448.657837375121,3448.657837375121],"y":[0,2.0594512176948832e-05],"type":"scatter","xaxis":"x2","yaxis":"y2"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"showgrid":false,"gridcolor":"black","linecolor":"black","range":[0,0.4],"dtick":0.05,"fixedrange":true},"yaxis":{"anchor":"x","domain":[0.9200000000000002,1.0],"showgrid":false,"showline":false,"showticklabels":false,"zeroline":false,"color":"black","fixedrange":true},"xaxis2":{"anchor":"y2","domain":[0.0,1.0],"fixedrange":false,"range":[46.41265768214859,259623.59710336776],"title":{"text":"Bounding Box Area (in pixels)"}},"yaxis2":{"anchor":"x2","domain":[0.0,0.7200000000000001],"title":{"text":"Probability Density"},"fixedrange":true},"annotations":[{"font":{"size":16},"showarrow":false,"text":"Drift Score (Earth Mover's Distance)","x":0.5,"xanchor":"center","xref":"paper","y":1.0000000000000002,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Distribution Plot","x":0.5,"xanchor":"center","xref":"paper","y":0.7200000000000001,"yanchor":"bottom","yref":"paper"}],"legend":{"title":{"text":"Legend"},"yanchor":"top","y":0.6},"title":{"text":"Bounding Box Area (in pixels)","x":0.5,"xanchor":"center"},"width":700,"height":400,"bargroupgap":0},                        {"responsive": true}                    ).then(function(){
                            
    var gd = document.getElementById('72d260f7-472c-43a7-8416-45c50d9a15b9');
    var x = new MutationObserver(function (mutations, observer) {{
            var display = window.getComputedStyle(gd).display;
            if (!display || display === 'none') {{
                console.log([gd, 'removed!']);
                Plotly.purge(gd);
                observer.disconnect();
            }}
    }});

    // Listen for the removal of the full notebook cells
    var notebookContainer = gd.closest('#notebook-container');
    if (notebookContainer) {{
        x.observe(notebookContainer, {childList: true});
    }}

    // Listen for the clearing of the current output cell
    var outputEl = gd.closest('.output');
    if (outputEl) {{
        x.observe(outputEl, {childList: true});
    }}

                            })                };                });            </script>        </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 200-206

Label drift is detected!
------------------------
We can see that the COCO128 contains a drift in the out of the box dataset. In
addition to the label count per class, the label drift check for object detection
tasks include drift calculation on certain measurements, like the bounding box
area and the number of bboxes per image.


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  51.148 seconds)


.. _sphx_glr_download_checks_gallery_vision_distribution_plot_train_test_label_drift.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: plot_train_test_label_drift.py <plot_train_test_label_drift.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: plot_train_test_label_drift.ipynb <plot_train_test_label_drift.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
