
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "checks_gallery/vision/distribution/plot_train_test_prediction_drift.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_checks_gallery_vision_distribution_plot_train_test_prediction_drift.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_checks_gallery_vision_distribution_plot_train_test_prediction_drift.py:


Train Test Prediction Drift
***************************

This notebooks provides an overview for using and understanding the vision prediction drift check.

**Structure:**

* `What is a prediction drift? <#what-is-a-prediction-drift>`__
* `Which Prediction Properties Are Used? <#which-prediction-properties-are-used>`__
* `Run check on a Classification task <#run-the-check-on-a-classification-task-mnist>`__
* `Run check on an Object Detection task <#run-the-check-on-an-object-detection-task-coco>`__

What Is a Prediction Drift?
===========================
The term drift (and all it's derivatives) is used to describe any change in the data compared
to the data the model was trained on. Prediction drift refers to the case in which a change
in the data (data/feature drift) has happened and as a result, the distribution of the
models' prediction has changed.

Calculating prediction drift is especially useful in cases
in which labels are not available for the test dataset, and so a drift in the predictions
is out only indication that a changed has happened in the data that actually affects model
predictions. If labels are available, it's also recommended to run the :doc:`Label Drift Check
</examples/vision/checks/distribution/examples/plot_train_test_label_drift>.

There are two main causes for prediction drift:

* A change in the sample population. In this case, the underline phenomenon we're trying
  to predict behaves the same, but we're not getting the same types of samples. For example,
  cronuts becoming more popular in a food classification dataset.
* Concept drift, which means that the underline relation between the data and
  the label has changed.
  For example, the arctic hare changes its fur color during the winter. A dataset that was trained on summertime hares,
  would have difficulty identifying them in winter.
  Important to note that concept drift won't necessarily result in prediction drift, unless it affects features that
  are of high importance to the model.

How Does the TrainTestPredictionDrift Check Work?
=================================================
There are many methods to detect drift, that usually include statistical methods
that aim to measure difference between 2 distributions.
We experimented with various approaches and found that for detecting drift between 2
one-dimensional distributions, the following 2 methods give the best results:

* For numerical features, the `Cramer's V <https://en.wikipedia.org/wiki/Cram%C3%A9r%27s_V>`__
* For categorical features, the `Wasserstein Distance (Earth Mover's Distance) <https://en.wikipedia.org/wiki/Wasserstein_metric>`__

However, one does not simply measure drift on a prediction, as they may be complex structures. These methods are
implemented on label properties, as described in the next section.

Different measurement on predictions
====================================
In computer vision specifically, our predictions may be complex, and measuring their drift
is not a straightforward task. Therefore, we calculate drift on different properties of the
labels, on which we can directly measure drift.


Which Prediction Properties Are Used?
=================================
================  ===================================  ==========
Task Type         Property name                        What is it
================  ===================================  ==========
Classification    Samples Per Class                    Number of images per class
Object Detection  Samples Per Class                    Number of bounding boxes per class
Object Detection  Bounding Box Area                    Area of bounding box (height * width)
Object Detection  Number of Bounding Boxes Per Image   Number of bounding box objects in each image
================  ===================================  ==========


Run the check on a Classification task (MNIST)
==============================================

.. GENERATED FROM PYTHON SOURCE LINES 77-79

Imports
-------

.. GENERATED FROM PYTHON SOURCE LINES 79-84

.. code-block:: default


    from deepchecks.vision.checks import TrainTestPredictionDrift
    from deepchecks.vision.datasets.classification.mnist import (load_dataset,
                                                                 load_model)








.. GENERATED FROM PYTHON SOURCE LINES 85-87

Loading data and model:
-----------------------

.. GENERATED FROM PYTHON SOURCE LINES 87-92

.. code-block:: default



    train_ds = load_dataset(train=True, batch_size=64, object_type='VisionData')
    test_ds = load_dataset(train=False, batch_size=64, object_type='VisionData')








.. GENERATED FROM PYTHON SOURCE LINES 93-96

.. code-block:: default


    model = load_model()








.. GENERATED FROM PYTHON SOURCE LINES 97-99

Running TrainTestLabelDrift on classification
---------------------------------------------

.. GENERATED FROM PYTHON SOURCE LINES 99-103

.. code-block:: default


    check = TrainTestPredictionDrift()
    check.run(train_ds, test_ds, model)





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    Validating Input:   0%| | 0/1 [00:00<?, ? /s]                                                 Ingesting Batches - Train Dataset:   0%|                                                                                                                                                             | 0/157 [00:00<?, ? Batch/s]    Ingesting Batches - Train Dataset:  10%|################                                                                                                                                             | 16/157 [00:00<00:00, 151.10 Batch/s]    Ingesting Batches - Train Dataset:  20%|################################                                                                                                                             | 32/157 [00:00<00:00, 147.60 Batch/s]    Ingesting Batches - Train Dataset:  30%|###############################################                                                                                                              | 47/157 [00:00<00:00, 148.32 Batch/s]    Ingesting Batches - Train Dataset:  40%|###############################################################                                                                                              | 63/157 [00:00<00:00, 150.22 Batch/s]    Ingesting Batches - Train Dataset:  50%|###############################################################################                                                                              | 79/157 [00:00<00:00, 150.60 Batch/s]    Ingesting Batches - Train Dataset:  61%|###############################################################################################                                                              | 95/157 [00:00<00:00, 149.37 Batch/s]    Ingesting Batches - Train Dataset:  70%|##############################################################################################################                                               | 110/157 [00:00<00:00, 148.77 Batch/s]    Ingesting Batches - Train Dataset:  80%|#############################################################################################################################                                | 125/157 [00:00<00:00, 147.69 Batch/s]    Ingesting Batches - Train Dataset:  90%|#############################################################################################################################################                | 141/157 [00:00<00:00, 148.93 Batch/s]                                                                                                                                                                                                                                                Ingesting Batches - Test Dataset:   0%|                                                                                                                                                             | 0/157 [00:00<?, ? Batch/s]    Ingesting Batches - Test Dataset:  10%|################                                                                                                                                             | 16/157 [00:00<00:00, 154.85 Batch/s]    Ingesting Batches - Test Dataset:  20%|################################                                                                                                                             | 32/157 [00:00<00:00, 153.84 Batch/s]    Ingesting Batches - Test Dataset:  31%|################################################                                                                                                             | 48/157 [00:00<00:00, 152.69 Batch/s]    Ingesting Batches - Test Dataset:  41%|################################################################                                                                                             | 64/157 [00:00<00:00, 152.73 Batch/s]    Ingesting Batches - Test Dataset:  51%|################################################################################                                                                             | 80/157 [00:00<00:00, 152.44 Batch/s]    Ingesting Batches - Test Dataset:  61%|################################################################################################                                                             | 96/157 [00:00<00:00, 152.62 Batch/s]    Ingesting Batches - Test Dataset:  71%|###############################################################################################################9                                             | 112/157 [00:00<00:00, 152.81 Batch/s]    Ingesting Batches - Test Dataset:  82%|################################################################################################################################                             | 128/157 [00:00<00:00, 154.01 Batch/s]    Ingesting Batches - Test Dataset:  92%|################################################################################################################################################             | 144/157 [00:00<00:00, 154.27 Batch/s]                                                                                                                                                                                                                                               Computing Check:   0%| | 0/1 [00:00<?, ? Check/s]                                                 

.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">

    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"
        integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer">
    </script>

    <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
    <script type="text/javascript">if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>
    <script type="text/javascript">
        if (typeof require !== 'undefined') {
            require.undef("plotly");
            requirejs.config({
                paths: {'plotly': ['https://cdn.plot.ly/plotly-2.8.3.min']}
            });
            require(
                ['plotly'],
                function(Plotly) {
                    window._Plotly = Plotly;
                    window.Plotly = Plotly;
                    console.log('Loaded plotly successfully');
                },
                function() {console.log('Failed to load plotly')}
            );
        } else {
            console.log('requirejs is not present');
        }
    </script>
    <h4><b>Train Test Prediction Drift</b></h4><p>    Calculate prediction drift between train dataset and test dataset, using statistical measures.</p><h5><b>Additional Outputs</b></h5><div><span>The Drift score is a measure for the difference between two distributions. In this check, drift is measured for the distribution of the following prediction properties: ['Samples Per Class'].</span></div><div>                            <div id="4c8edd71-a660-469a-8eba-6430c76fc005" class="plotly-graph-div" style="height:400px; width:700px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("4c8edd71-a660-469a-8eba-6430c76fc005")) {                    Plotly.newPlot(                        "4c8edd71-a660-469a-8eba-6430c76fc005",                        [{"base":0,"marker":{"color":"#01B8AA"},"offsetgroup":"0","orientation":"h","showlegend":false,"x":[0.0],"y":["Drift Score"],"type":"bar","xaxis":"x","yaxis":"y"},{"marker":{"color":"#00008b"},"name":"Train Dataset","x":["0","1","2","3","4","5","6","7","8","9"],"y":[0.0997,0.1181,0.0988,0.0962,0.095,0.0924,0.1026,0.107,0.0928,0.0974],"type":"bar","xaxis":"x2","yaxis":"y2"},{"marker":{"color":"#69b3a2"},"name":"Test Dataset","x":["0","1","2","3","4","5","6","7","8","9"],"y":[0.0995,0.1138,0.1037,0.1015,0.0975,0.0893,0.0958,0.1039,0.0945,0.1005],"type":"bar","xaxis":"x2","yaxis":"y2"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"showgrid":false,"gridcolor":"black","linecolor":"black","range":[0,0.4],"dtick":0.05,"fixedrange":true},"yaxis":{"anchor":"x","domain":[0.9200000000000002,1.0],"showgrid":false,"showline":false,"showticklabels":false,"zeroline":false,"color":"black","fixedrange":true},"xaxis2":{"anchor":"y2","domain":[0.0,1.0],"type":"category"},"yaxis2":{"anchor":"x2","domain":[0.0,0.7200000000000001],"fixedrange":true,"range":[0,0.12991],"title":{"text":"Frequency"}},"annotations":[{"font":{"size":16},"showarrow":false,"text":"Drift Score (Cramer's V)","x":0.5,"xanchor":"center","xref":"paper","y":1.0000000000000002,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Distribution Plot","x":0.5,"xanchor":"center","xref":"paper","y":0.7200000000000001,"yanchor":"bottom","yref":"paper"}],"legend":{"title":{"text":"Legend"},"yanchor":"top","y":0.6},"title":{"text":"Samples Per Class","x":0.5,"xanchor":"center"},"width":700,"height":400,"bargroupgap":0},                        {"responsive": true}                    ).then(function(){
                            
    var gd = document.getElementById('4c8edd71-a660-469a-8eba-6430c76fc005');
    var x = new MutationObserver(function (mutations, observer) {{
            var display = window.getComputedStyle(gd).display;
            if (!display || display === 'none') {{
                console.log([gd, 'removed!']);
                Plotly.purge(gd);
                observer.disconnect();
            }}
    }});

    // Listen for the removal of the full notebook cells
    var notebookContainer = gd.closest('#notebook-container');
    if (notebookContainer) {{
        x.observe(notebookContainer, {childList: true});
    }}

    // Listen for the clearing of the current output cell
    var outputEl = gd.closest('.output');
    if (outputEl) {{
        x.observe(outputEl, {childList: true});
    }}

                            })                };                });            </script>        </div><div><p style="font-size:0.9em;line-height:1;"><i>Note - data sampling: Running on 10000 <b>train</b> data samples out of 60000. Sample size can be controlled with the "n_samples" parameter.</i></p></div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 104-109

Understanding the results
-------------------------
We can see there is almost no drift between the train & test labels. This means the
split to train and test was good (as it is balanced and random). Let's check the
performance of a simple model trained on MNIST.

.. GENERATED FROM PYTHON SOURCE LINES 109-114

.. code-block:: default


    from deepchecks.vision.checks import ClassPerformance

    ClassPerformance().run(train_ds, test_ds, model)





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    Validating Input:   0%| | 0/1 [00:00<?, ? /s]                                                 Ingesting Batches - Train Dataset:   0%|                                                                                                                                                             | 0/157 [00:00<?, ? Batch/s]    Ingesting Batches - Train Dataset:  10%|###############                                                                                                                                              | 15/157 [00:00<00:00, 147.36 Batch/s]    Ingesting Batches - Train Dataset:  19%|##############################                                                                                                                               | 30/157 [00:00<00:00, 146.76 Batch/s]    Ingesting Batches - Train Dataset:  29%|#############################################                                                                                                                | 45/157 [00:00<00:00, 147.62 Batch/s]    Ingesting Batches - Train Dataset:  38%|############################################################                                                                                                 | 60/157 [00:00<00:00, 147.36 Batch/s]    Ingesting Batches - Train Dataset:  48%|###########################################################################                                                                                  | 75/157 [00:00<00:00, 147.93 Batch/s]    Ingesting Batches - Train Dataset:  57%|##########################################################################################                                                                   | 90/157 [00:00<00:00, 148.59 Batch/s]    Ingesting Batches - Train Dataset:  67%|#########################################################################################################                                                    | 105/157 [00:00<00:00, 148.84 Batch/s]    Ingesting Batches - Train Dataset:  76%|########################################################################################################################                                     | 120/157 [00:00<00:00, 147.25 Batch/s]    Ingesting Batches - Train Dataset:  86%|#######################################################################################################################################                      | 135/157 [00:00<00:00, 147.12 Batch/s]    Ingesting Batches - Train Dataset:  96%|######################################################################################################################################################       | 150/157 [00:01<00:00, 145.17 Batch/s]                                                                                                                                                                                                                                                Ingesting Batches - Test Dataset:   0%|                                                                                                                                                             | 0/157 [00:00<?, ? Batch/s]    Ingesting Batches - Test Dataset:  10%|###############                                                                                                                                              | 15/157 [00:00<00:00, 147.86 Batch/s]    Ingesting Batches - Test Dataset:  19%|##############################                                                                                                                               | 30/157 [00:00<00:00, 148.90 Batch/s]    Ingesting Batches - Test Dataset:  29%|##############################################                                                                                                               | 46/157 [00:00<00:00, 149.51 Batch/s]    Ingesting Batches - Test Dataset:  39%|#############################################################                                                                                                | 61/157 [00:00<00:00, 149.26 Batch/s]    Ingesting Batches - Test Dataset:  48%|############################################################################                                                                                 | 76/157 [00:00<00:00, 148.64 Batch/s]    Ingesting Batches - Test Dataset:  58%|###########################################################################################                                                                  | 91/157 [00:00<00:00, 147.36 Batch/s]    Ingesting Batches - Test Dataset:  68%|##########################################################################################################                                                   | 106/157 [00:00<00:00, 146.84 Batch/s]    Ingesting Batches - Test Dataset:  77%|#########################################################################################################################                                    | 121/157 [00:00<00:00, 147.52 Batch/s]    Ingesting Batches - Test Dataset:  87%|#########################################################################################################################################                    | 137/157 [00:00<00:00, 148.38 Batch/s]    Ingesting Batches - Test Dataset:  97%|#########################################################################################################################################################    | 153/157 [00:01<00:00, 148.97 Batch/s]                                                                                                                                                                                                                                               Computing Check:   0%| | 0/1 [00:00<?, ? Check/s]                                                 

.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">

    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"
        integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer">
    </script>

    <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
    <script type="text/javascript">if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>
    <script type="text/javascript">
        if (typeof require !== 'undefined') {
            require.undef("plotly");
            requirejs.config({
                paths: {'plotly': ['https://cdn.plot.ly/plotly-2.8.3.min']}
            });
            require(
                ['plotly'],
                function(Plotly) {
                    window._Plotly = Plotly;
                    window.Plotly = Plotly;
                    console.log('Loaded plotly successfully');
                },
                function() {console.log('Failed to load plotly')}
            );
        } else {
            console.log('requirejs is not present');
        }
    </script>
    <h4><b>Class Performance</b></h4><p>Summarize given metrics on a dataset and model.</p><h5><b>Additional Outputs</b></h5><div>                            <div id="6a947fc0-a2be-444a-9dd6-52d0dd3abeee" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("6a947fc0-a2be-444a-9dd6-52d0dd3abeee")) {                    Plotly.newPlot(                        "6a947fc0-a2be-444a-9dd6-52d0dd3abeee",                        [{"alignmentgroup":"True","bingroup":"x","histfunc":"sum","hovertemplate":"Dataset=Train<br>Metric=Recall<br>Class Name=%{x}<br>sum of Value=%{y}<extra></extra>","legendgroup":"Train","marker":{"color":"#00008b","pattern":{"shape":""}},"name":"Train","offsetgroup":"Train","orientation":"v","showlegend":true,"x":["6","1","0","7","3","4","2","5","9","8"],"xaxis":"x","y":[0.9960629921259843,0.9949022939677146,0.9929292929292929,0.9914529914529915,0.987460815047022,0.9842931937172775,0.9827411167512691,0.9744136460554371,0.9735503560528993,0.96723044397463],"yaxis":"y","type":"histogram"},{"alignmentgroup":"True","bingroup":"x","histfunc":"sum","hovertemplate":"Dataset=Train<br>Metric=Precision<br>Class Name=%{x}<br>sum of Value=%{y}<extra></extra>","legendgroup":"Train","marker":{"color":"#00008b","pattern":{"shape":""}},"name":"Train","offsetgroup":"Train","orientation":"v","showlegend":false,"x":["1","4","5","6","8","0","9","3","2","7"],"xaxis":"x2","y":[0.9915325994919559,0.9894736842105263,0.9891774891774892,0.98635477582846,0.9859913793103449,0.9859578736208626,0.9825462012320328,0.9823284823284824,0.979757085020243,0.9757009345794393],"yaxis":"y2","type":"histogram"},{"alignmentgroup":"True","bingroup":"x","histfunc":"sum","hovertemplate":"Dataset=Test<br>Metric=Recall<br>Class Name=%{x}<br>sum of Value=%{y}<extra></extra>","legendgroup":"Test","marker":{"color":"#69b3a2","pattern":{"shape":""}},"name":"Test","offsetgroup":"Test","orientation":"v","showlegend":true,"x":["0","1","6","3","2","5","4","7","9","8"],"xaxis":"x","y":[0.9948979591836735,0.9947136563876652,0.9874739039665971,0.9871287128712871,0.9864341085271318,0.9831838565022422,0.9826883910386965,0.9824902723735408,0.9742319127849356,0.9671457905544147],"yaxis":"y","type":"histogram"},{"alignmentgroup":"True","bingroup":"x","histfunc":"sum","hovertemplate":"Dataset=Test<br>Metric=Precision<br>Class Name=%{x}<br>sum of Value=%{y}<extra></extra>","legendgroup":"Test","marker":{"color":"#69b3a2","pattern":{"shape":""}},"name":"Test","offsetgroup":"Test","orientation":"v","showlegend":false,"x":["8","1","4","6","3","5","2","0","9","7"],"xaxis":"x2","y":[0.9968253968253968,0.992091388400703,0.9897435897435898,0.9874739039665971,0.9822660098522168,0.9820828667413214,0.9816779170684667,0.9798994974874372,0.9781094527363184,0.9720885466794995],"yaxis":"y2","type":"histogram"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,0.475],"title":{"text":"Class"},"type":"category"},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Value"},"showticklabels":true},"xaxis2":{"anchor":"y2","domain":[0.525,1.0],"matches":"x","title":{"text":"Class"},"type":"category"},"yaxis2":{"anchor":"x2","domain":[0.0,1.0],"showticklabels":true,"title":{"text":"Value"}},"annotations":[{"font":{},"showarrow":false,"text":"Recall","x":0.2375,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Precision","x":0.7625,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"}],"legend":{"title":{"text":"Dataset"},"tracegroupgap":0},"margin":{"t":60},"barmode":"group"},                        {"responsive": true}                    ).then(function(){
                            
    var gd = document.getElementById('6a947fc0-a2be-444a-9dd6-52d0dd3abeee');
    var x = new MutationObserver(function (mutations, observer) {{
            var display = window.getComputedStyle(gd).display;
            if (!display || display === 'none') {{
                console.log([gd, 'removed!']);
                Plotly.purge(gd);
                observer.disconnect();
            }}
    }});

    // Listen for the removal of the full notebook cells
    var notebookContainer = gd.closest('#notebook-container');
    if (notebookContainer) {{
        x.observe(notebookContainer, {childList: true});
    }}

    // Listen for the clearing of the current output cell
    var outputEl = gd.closest('.output');
    if (outputEl) {{
        x.observe(outputEl, {childList: true});
    }}

                            })                };                });            </script>        </div><div><p style="font-size:0.9em;line-height:1;"><i>Note - data sampling: Running on 10000 <b>train</b> data samples out of 60000. Sample size can be controlled with the "n_samples" parameter.</i></p></div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 115-121

MNIST with label drift
======================
Now, let's try to separate the MNIST dataset in a different manner that will result
in a prediction drift, and see how it affects the performance. We are going to create
a custom collate_fn in the test dataset, that will select samples with class 0
in a 1/10 chances.

.. GENERATED FROM PYTHON SOURCE LINES 121-128

.. code-block:: default


    import torch

    mnist_dataloader_train = load_dataset(train=True, batch_size=64, object_type='DataLoader')
    mnist_dataloader_test = load_dataset(train=False, batch_size=64, object_type='DataLoader')
    full_mnist = torch.utils.data.ConcatDataset([mnist_dataloader_train.dataset, mnist_dataloader_test.dataset])








.. GENERATED FROM PYTHON SOURCE LINES 129-132

.. code-block:: default


    train_dataset, test_dataset = torch.utils.data.random_split(full_mnist, [60000,10000], generator=torch.Generator().manual_seed(42))








.. GENERATED FROM PYTHON SOURCE LINES 133-135

Inserting drift to the test set
-------------------------------

.. GENERATED FROM PYTHON SOURCE LINES 135-159

.. code-block:: default


    import numpy as np
    from torch.utils.data._utils.collate import default_collate

    np.random.seed(42)


    def collate_test(batch):
        modified_batch = []
        for item in batch:
            image, label = item
            if label == 0:
                if np.random.randint(5) == 0:
                    modified_batch.append(item)
                else:
                    modified_batch.append((image, 1))
            else:
                modified_batch.append(item)
            
        return default_collate(modified_batch)

    mod_train_loader = torch.utils.data.DataLoader(train_dataset, batch_size=64)
    mod_test_loader = torch.utils.data.DataLoader(test_dataset, batch_size=64, collate_fn=collate_test)








.. GENERATED FROM PYTHON SOURCE LINES 160-179

.. code-block:: default

    from deepchecks.vision.datasets.classification.mnist import MNISTData

    mod_train_ds = MNISTData(mod_train_loader)
    mod_test_ds = MNISTData(mod_test_loader)

    # Run the check
    # -------------

    check = TrainTestPredictionDrift()
    check.run(mod_train_ds, mod_test_ds, model)

    # Add a condition
    # ---------------
    # We could also add a condition to the check to alert us to changes in the prediction
    # distribution, such as the one that occurred here.

    check = TrainTestPredictionDrift().add_condition_drift_score_not_greater_than()
    check.run(mod_train_ds, mod_test_ds, model)





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    Validating Input:   0%| | 0/1 [00:00<?, ? /s]                                                 Ingesting Batches - Train Dataset:   0%|                                                                                                                                                             | 0/157 [00:00<?, ? Batch/s]    Ingesting Batches - Train Dataset:   9%|#############9                                                                                                                                               | 14/157 [00:00<00:01, 139.26 Batch/s]    Ingesting Batches - Train Dataset:  18%|############################9                                                                                                                                | 29/157 [00:00<00:00, 140.65 Batch/s]    Ingesting Batches - Train Dataset:  28%|############################################                                                                                                                 | 44/157 [00:00<00:00, 142.41 Batch/s]    Ingesting Batches - Train Dataset:  38%|###########################################################                                                                                                  | 59/157 [00:00<00:00, 142.05 Batch/s]    Ingesting Batches - Train Dataset:  47%|##########################################################################                                                                                   | 74/157 [00:00<00:00, 141.92 Batch/s]    Ingesting Batches - Train Dataset:  57%|#########################################################################################                                                                    | 89/157 [00:00<00:00, 141.57 Batch/s]    Ingesting Batches - Train Dataset:  66%|########################################################################################################                                                     | 104/157 [00:00<00:00, 140.73 Batch/s]    Ingesting Batches - Train Dataset:  76%|#######################################################################################################################                                      | 119/157 [00:00<00:00, 139.92 Batch/s]    Ingesting Batches - Train Dataset:  85%|#####################################################################################################################################                        | 133/157 [00:00<00:00, 139.32 Batch/s]    Ingesting Batches - Train Dataset:  94%|####################################################################################################################################################         | 148/157 [00:01<00:00, 140.52 Batch/s]                                                                                                                                                                                                                                                Ingesting Batches - Test Dataset:   0%|                                                                                                                                                             | 0/157 [00:00<?, ? Batch/s]    Ingesting Batches - Test Dataset:  10%|###############                                                                                                                                              | 15/157 [00:00<00:01, 141.49 Batch/s]    Ingesting Batches - Test Dataset:  19%|##############################                                                                                                                               | 30/157 [00:00<00:00, 143.31 Batch/s]    Ingesting Batches - Test Dataset:  29%|#############################################                                                                                                                | 45/157 [00:00<00:00, 144.47 Batch/s]    Ingesting Batches - Test Dataset:  38%|############################################################                                                                                                 | 60/157 [00:00<00:00, 144.57 Batch/s]    Ingesting Batches - Test Dataset:  48%|###########################################################################                                                                                  | 75/157 [00:00<00:00, 142.58 Batch/s]    Ingesting Batches - Test Dataset:  57%|##########################################################################################                                                                   | 90/157 [00:00<00:00, 141.30 Batch/s]    Ingesting Batches - Test Dataset:  67%|#########################################################################################################                                                    | 105/157 [00:00<00:00, 142.38 Batch/s]    Ingesting Batches - Test Dataset:  76%|########################################################################################################################                                     | 120/157 [00:00<00:00, 142.78 Batch/s]    Ingesting Batches - Test Dataset:  86%|#######################################################################################################################################                      | 135/157 [00:00<00:00, 143.22 Batch/s]    Ingesting Batches - Test Dataset:  96%|######################################################################################################################################################       | 150/157 [00:01<00:00, 142.96 Batch/s]                                                                                                                                                                                                                                               Computing Check:   0%| | 0/1 [00:00<?, ? Check/s]                                                     Validating Input:   0%| | 0/1 [00:00<?, ? /s]                                                 Ingesting Batches - Train Dataset:   0%|                                                                                                                                                             | 0/157 [00:00<?, ? Batch/s]    Ingesting Batches - Train Dataset:  10%|###############                                                                                                                                              | 15/157 [00:00<00:00, 145.65 Batch/s]    Ingesting Batches - Train Dataset:  19%|##############################                                                                                                                               | 30/157 [00:00<00:00, 144.92 Batch/s]    Ingesting Batches - Train Dataset:  29%|#############################################                                                                                                                | 45/157 [00:00<00:00, 139.86 Batch/s]    Ingesting Batches - Train Dataset:  38%|############################################################                                                                                                 | 60/157 [00:00<00:00, 143.34 Batch/s]    Ingesting Batches - Train Dataset:  48%|###########################################################################                                                                                  | 75/157 [00:00<00:00, 145.14 Batch/s]    Ingesting Batches - Train Dataset:  57%|##########################################################################################                                                                   | 90/157 [00:00<00:00, 146.46 Batch/s]    Ingesting Batches - Train Dataset:  67%|#########################################################################################################                                                    | 105/157 [00:00<00:00, 147.48 Batch/s]    Ingesting Batches - Train Dataset:  76%|########################################################################################################################                                     | 120/157 [00:00<00:00, 147.56 Batch/s]    Ingesting Batches - Train Dataset:  86%|#######################################################################################################################################                      | 135/157 [00:00<00:00, 147.81 Batch/s]    Ingesting Batches - Train Dataset:  96%|######################################################################################################################################################       | 150/157 [00:01<00:00, 147.78 Batch/s]                                                                                                                                                                                                                                                Ingesting Batches - Test Dataset:   0%|                                                                                                                                                             | 0/157 [00:00<?, ? Batch/s]    Ingesting Batches - Test Dataset:  10%|###############                                                                                                                                              | 15/157 [00:00<00:00, 147.73 Batch/s]    Ingesting Batches - Test Dataset:  19%|##############################                                                                                                                               | 30/157 [00:00<00:00, 148.35 Batch/s]    Ingesting Batches - Test Dataset:  29%|#############################################                                                                                                                | 45/157 [00:00<00:00, 148.31 Batch/s]    Ingesting Batches - Test Dataset:  38%|############################################################                                                                                                 | 60/157 [00:00<00:00, 148.62 Batch/s]    Ingesting Batches - Test Dataset:  48%|###########################################################################                                                                                  | 75/157 [00:00<00:00, 148.15 Batch/s]    Ingesting Batches - Test Dataset:  57%|##########################################################################################                                                                   | 90/157 [00:00<00:00, 146.30 Batch/s]    Ingesting Batches - Test Dataset:  67%|#########################################################################################################                                                    | 105/157 [00:00<00:00, 143.77 Batch/s]    Ingesting Batches - Test Dataset:  76%|########################################################################################################################                                     | 120/157 [00:00<00:00, 144.24 Batch/s]    Ingesting Batches - Test Dataset:  86%|#######################################################################################################################################                      | 135/157 [00:00<00:00, 145.34 Batch/s]    Ingesting Batches - Test Dataset:  96%|######################################################################################################################################################       | 150/157 [00:01<00:00, 145.94 Batch/s]                                                                                                                                                                                                                                               Computing Check:   0%| | 0/1 [00:00<?, ? Check/s]                                                 

.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">

    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"
        integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer">
    </script>

    <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
    <script type="text/javascript">if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>
    <script type="text/javascript">
        if (typeof require !== 'undefined') {
            require.undef("plotly");
            requirejs.config({
                paths: {'plotly': ['https://cdn.plot.ly/plotly-2.8.3.min']}
            });
            require(
                ['plotly'],
                function(Plotly) {
                    window._Plotly = Plotly;
                    window.Plotly = Plotly;
                    console.log('Loaded plotly successfully');
                },
                function() {console.log('Failed to load plotly')}
            );
        } else {
            console.log('requirejs is not present');
        }
    </script>
    <h4><b>Train Test Prediction Drift</b></h4><p>    Calculate prediction drift between train dataset and test dataset, using statistical measures.</p><h5><b>Conditions Summary</b></h5><style type="text/css">
    #T_1c99a_ table {
      text-align: left;
      white-space: pre-wrap;
    }
    #T_1c99a_ thead {
      text-align: left;
      white-space: pre-wrap;
    }
    #T_1c99a_ tbody {
      text-align: left;
      white-space: pre-wrap;
    }
    #T_1c99a_ th {
      text-align: left;
      white-space: pre-wrap;
    }
    #T_1c99a_ td {
      text-align: left;
      white-space: pre-wrap;
    }
    </style>
    <table id="T_1c99a_">
      <thead>
        <tr>
          <th class="col_heading level0 col0" >Status</th>
          <th class="col_heading level0 col1" >Condition</th>
          <th class="col_heading level0 col2" >More Info</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td id="T_1c99a_row0_col0" class="data row0 col0" ><div style="color: green;text-align: center"></div></td>
          <td id="T_1c99a_row0_col1" class="data row0 col1" >categorical drift score <= 0.15 and numerical drift score <= 0.075 for prediction drift</td>
          <td id="T_1c99a_row0_col2" class="data row0 col2" ></td>
        </tr>
      </tbody>
    </table>
    <h5><b>Additional Outputs</b></h5><div><span>The Drift score is a measure for the difference between two distributions. In this check, drift is measured for the distribution of the following prediction properties: ['Samples Per Class'].</span></div><div>                            <div id="a18b9307-dfb3-4c2d-9e5e-8cda9a21dbba" class="plotly-graph-div" style="height:400px; width:700px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("a18b9307-dfb3-4c2d-9e5e-8cda9a21dbba")) {                    Plotly.newPlot(                        "a18b9307-dfb3-4c2d-9e5e-8cda9a21dbba",                        [{"base":0,"marker":{"color":"#01B8AA"},"offsetgroup":"0","orientation":"h","showlegend":false,"x":[0.0],"y":["Drift Score"],"type":"bar","xaxis":"x","yaxis":"y"},{"marker":{"color":"#00008b"},"name":"Train Dataset","x":["0","1","2","3","4","5","6","7","8","9"],"y":[0.0988,0.1137,0.1023,0.1024,0.0957,0.0877,0.0955,0.104,0.0963,0.1036],"type":"bar","xaxis":"x2","yaxis":"y2"},{"marker":{"color":"#69b3a2"},"name":"Test Dataset","x":["0","1","2","3","4","5","6","7","8","9"],"y":[0.1005,0.1042,0.1033,0.1016,0.0991,0.0886,0.095,0.1098,0.0925,0.1054],"type":"bar","xaxis":"x2","yaxis":"y2"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"showgrid":false,"gridcolor":"black","linecolor":"black","range":[0,0.4],"dtick":0.05,"fixedrange":true},"yaxis":{"anchor":"x","domain":[0.9200000000000002,1.0],"showgrid":false,"showline":false,"showticklabels":false,"zeroline":false,"color":"black","fixedrange":true},"xaxis2":{"anchor":"y2","domain":[0.0,1.0],"type":"category"},"yaxis2":{"anchor":"x2","domain":[0.0,0.7200000000000001],"fixedrange":true,"range":[0,0.12507000000000001],"title":{"text":"Frequency"}},"annotations":[{"font":{"size":16},"showarrow":false,"text":"Drift Score (Cramer's V)","x":0.5,"xanchor":"center","xref":"paper","y":1.0000000000000002,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Distribution Plot","x":0.5,"xanchor":"center","xref":"paper","y":0.7200000000000001,"yanchor":"bottom","yref":"paper"}],"legend":{"title":{"text":"Legend"},"yanchor":"top","y":0.6},"title":{"text":"Samples Per Class","x":0.5,"xanchor":"center"},"width":700,"height":400,"bargroupgap":0},                        {"responsive": true}                    ).then(function(){
                            
    var gd = document.getElementById('a18b9307-dfb3-4c2d-9e5e-8cda9a21dbba');
    var x = new MutationObserver(function (mutations, observer) {{
            var display = window.getComputedStyle(gd).display;
            if (!display || display === 'none') {{
                console.log([gd, 'removed!']);
                Plotly.purge(gd);
                observer.disconnect();
            }}
    }});

    // Listen for the removal of the full notebook cells
    var notebookContainer = gd.closest('#notebook-container');
    if (notebookContainer) {{
        x.observe(notebookContainer, {childList: true});
    }}

    // Listen for the clearing of the current output cell
    var outputEl = gd.closest('.output');
    if (outputEl) {{
        x.observe(outputEl, {childList: true});
    }}

                            })                };                });            </script>        </div><div><p style="font-size:0.9em;line-height:1;"><i>Note - data sampling: Running on 10000 <b>train</b> data samples out of 60000. Sample size can be controlled with the "n_samples" parameter.</i></p></div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 180-181

As we can see, the condition alerts us to the present of drift in the prediction.

.. GENERATED FROM PYTHON SOURCE LINES 183-190

Results
-------
We can see the check successfully detects the (expected) drift in class 0 distribution
between the train and test sets. It means the the model correctly predicted 0 for
those samples and so we're seeing drift in the predictions as well as the labels.
We note that this check enabled us to detect the presence of label drift (in this case)
without needing actual labels for the test data.

.. GENERATED FROM PYTHON SOURCE LINES 192-194

But how does this affect the performance of the model?
------------------------------------------------------

.. GENERATED FROM PYTHON SOURCE LINES 194-197

.. code-block:: default


    ClassPerformance().run(mod_train_ds, mod_test_ds, model)





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    Validating Input:   0%| | 0/1 [00:00<?, ? /s]                                                 Ingesting Batches - Train Dataset:   0%|                                                                                                                                                             | 0/157 [00:00<?, ? Batch/s]    Ingesting Batches - Train Dataset:  10%|###############                                                                                                                                              | 15/157 [00:00<00:00, 143.33 Batch/s]    Ingesting Batches - Train Dataset:  19%|##############################                                                                                                                               | 30/157 [00:00<00:00, 143.19 Batch/s]    Ingesting Batches - Train Dataset:  29%|#############################################                                                                                                                | 45/157 [00:00<00:00, 143.74 Batch/s]    Ingesting Batches - Train Dataset:  38%|############################################################                                                                                                 | 60/157 [00:00<00:00, 144.41 Batch/s]    Ingesting Batches - Train Dataset:  48%|###########################################################################                                                                                  | 75/157 [00:00<00:00, 144.28 Batch/s]    Ingesting Batches - Train Dataset:  57%|##########################################################################################                                                                   | 90/157 [00:00<00:00, 143.35 Batch/s]    Ingesting Batches - Train Dataset:  67%|#########################################################################################################                                                    | 105/157 [00:00<00:00, 143.42 Batch/s]    Ingesting Batches - Train Dataset:  76%|########################################################################################################################                                     | 120/157 [00:00<00:00, 144.00 Batch/s]    Ingesting Batches - Train Dataset:  86%|#######################################################################################################################################                      | 135/157 [00:00<00:00, 145.06 Batch/s]    Ingesting Batches - Train Dataset:  96%|######################################################################################################################################################       | 150/157 [00:01<00:00, 145.66 Batch/s]                                                                                                                                                                                                                                                Ingesting Batches - Test Dataset:   0%|                                                                                                                                                             | 0/157 [00:00<?, ? Batch/s]    Ingesting Batches - Test Dataset:  10%|###############                                                                                                                                              | 15/157 [00:00<00:00, 147.14 Batch/s]    Ingesting Batches - Test Dataset:  19%|##############################                                                                                                                               | 30/157 [00:00<00:00, 146.36 Batch/s]    Ingesting Batches - Test Dataset:  29%|#############################################                                                                                                                | 45/157 [00:00<00:00, 142.99 Batch/s]    Ingesting Batches - Test Dataset:  38%|############################################################                                                                                                 | 60/157 [00:00<00:00, 143.57 Batch/s]    Ingesting Batches - Test Dataset:  48%|###########################################################################                                                                                  | 75/157 [00:00<00:00, 141.81 Batch/s]    Ingesting Batches - Test Dataset:  57%|##########################################################################################                                                                   | 90/157 [00:00<00:00, 143.01 Batch/s]    Ingesting Batches - Test Dataset:  67%|#########################################################################################################                                                    | 105/157 [00:00<00:00, 142.83 Batch/s]    Ingesting Batches - Test Dataset:  76%|########################################################################################################################                                     | 120/157 [00:00<00:00, 143.20 Batch/s]    Ingesting Batches - Test Dataset:  86%|#######################################################################################################################################                      | 135/157 [00:00<00:00, 143.14 Batch/s]    Ingesting Batches - Test Dataset:  96%|######################################################################################################################################################       | 150/157 [00:01<00:00, 141.96 Batch/s]                                                                                                                                                                                                                                               Computing Check:   0%| | 0/1 [00:00<?, ? Check/s]                                                 

.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">

    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"
        integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer">
    </script>

    <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
    <script type="text/javascript">if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>
    <script type="text/javascript">
        if (typeof require !== 'undefined') {
            require.undef("plotly");
            requirejs.config({
                paths: {'plotly': ['https://cdn.plot.ly/plotly-2.8.3.min']}
            });
            require(
                ['plotly'],
                function(Plotly) {
                    window._Plotly = Plotly;
                    window.Plotly = Plotly;
                    console.log('Loaded plotly successfully');
                },
                function() {console.log('Failed to load plotly')}
            );
        } else {
            console.log('requirejs is not present');
        }
    </script>
    <h4><b>Class Performance</b></h4><p>Summarize given metrics on a dataset and model.</p><h5><b>Additional Outputs</b></h5><div>                            <div id="b3eac01d-b7fd-4422-8c25-af7734ba7366" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("b3eac01d-b7fd-4422-8c25-af7734ba7366")) {                    Plotly.newPlot(                        "b3eac01d-b7fd-4422-8c25-af7734ba7366",                        [{"alignmentgroup":"True","bingroup":"x","histfunc":"sum","hovertemplate":"Dataset=Train<br>Metric=Recall<br>Class Name=%{x}<br>sum of Value=%{y}<extra></extra>","legendgroup":"Train","marker":{"color":"#00008b","pattern":{"shape":""}},"name":"Train","offsetgroup":"Train","orientation":"v","showlegend":true,"x":["0","1","6","5","7","2","3","4","9","8"],"xaxis":"x","y":[0.9969543147208122,0.9955908289241623,0.9936708860759493,0.9885974914481186,0.986328125,0.985279685966634,0.9843597262952102,0.983419689119171,0.9777562862669246,0.9677093844601413],"yaxis":"y","type":"histogram"},{"alignmentgroup":"True","bingroup":"x","histfunc":"sum","hovertemplate":"Dataset=Train<br>Metric=Precision<br>Class Name=%{x}<br>sum of Value=%{y}<extra></extra>","legendgroup":"Train","marker":{"color":"#00008b","pattern":{"shape":""}},"name":"Train","offsetgroup":"Train","orientation":"v","showlegend":false,"x":["8","0","1","4","5","6","3","2","9","7"],"xaxis":"x2","y":[0.995846313603323,0.9939271255060729,0.9929639401934917,0.9916405433646813,0.9885974914481186,0.9863874345549738,0.9833984375,0.9814271749755621,0.9758687258687259,0.9711538461538461],"yaxis":"y2","type":"histogram"},{"alignmentgroup":"True","bingroup":"x","histfunc":"sum","hovertemplate":"Dataset=Test<br>Metric=Recall<br>Class Name=%{x}<br>sum of Value=%{y}<extra></extra>","legendgroup":"Test","marker":{"color":"#69b3a2","pattern":{"shape":""}},"name":"Test","offsetgroup":"Test","orientation":"v","showlegend":true,"x":["0","6","4","2","3","5","7","9","8","1"],"xaxis":"x","y":[1.0,0.992600422832981,0.9918283963227783,0.9874152952565344,0.9833333333333333,0.9830699774266366,0.9826642335766423,0.9763481551561022,0.9663865546218487,0.5642427556041553],"yaxis":"y","type":"histogram"},{"alignmentgroup":"True","bingroup":"x","histfunc":"sum","hovertemplate":"Dataset=Test<br>Metric=Precision<br>Class Name=%{x}<br>sum of Value=%{y}<extra></extra>","legendgroup":"Test","marker":{"color":"#69b3a2","pattern":{"shape":""}},"name":"Test","offsetgroup":"Test","orientation":"v","showlegend":false,"x":["8","1","6","2","3","5","7","4","9","0"],"xaxis":"x2","y":[0.9945945945945946,0.9904030710172744,0.988421052631579,0.9874152952565344,0.9872047244094488,0.9830699774266366,0.9808743169398907,0.9798183652875883,0.9791271347248577,0.2009950248756219],"yaxis":"y2","type":"histogram"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,0.475],"title":{"text":"Class"},"type":"category"},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Value"},"showticklabels":true},"xaxis2":{"anchor":"y2","domain":[0.525,1.0],"matches":"x","title":{"text":"Class"},"type":"category"},"yaxis2":{"anchor":"x2","domain":[0.0,1.0],"showticklabels":true,"title":{"text":"Value"}},"annotations":[{"font":{},"showarrow":false,"text":"Recall","x":0.2375,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},{"font":{},"showarrow":false,"text":"Precision","x":0.7625,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"}],"legend":{"title":{"text":"Dataset"},"tracegroupgap":0},"margin":{"t":60},"barmode":"group"},                        {"responsive": true}                    ).then(function(){
                            
    var gd = document.getElementById('b3eac01d-b7fd-4422-8c25-af7734ba7366');
    var x = new MutationObserver(function (mutations, observer) {{
            var display = window.getComputedStyle(gd).display;
            if (!display || display === 'none') {{
                console.log([gd, 'removed!']);
                Plotly.purge(gd);
                observer.disconnect();
            }}
    }});

    // Listen for the removal of the full notebook cells
    var notebookContainer = gd.closest('#notebook-container');
    if (notebookContainer) {{
        x.observe(notebookContainer, {childList: true});
    }}

    // Listen for the clearing of the current output cell
    var outputEl = gd.closest('.output');
    if (outputEl) {{
        x.observe(outputEl, {childList: true});
    }}

                            })                };                });            </script>        </div><div><p style="font-size:0.9em;line-height:1;"><i>Note - data sampling: Running on 10000 <b>train</b> data samples out of 60000. Sample size can be controlled with the "n_samples" parameter.</i></p></div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 198-200

Inferring the results
---------------------

.. GENERATED FROM PYTHON SOURCE LINES 200-204

.. code-block:: default


    # We can see the drop in the precision of class 0, which was caused by the class
    # imbalance indicated earlier by the label drift check.








.. GENERATED FROM PYTHON SOURCE LINES 205-207

Run the check on an Object Detection task (COCO)
================================================

.. GENERATED FROM PYTHON SOURCE LINES 207-214

.. code-block:: default


    from deepchecks.vision.datasets.detection.coco import load_dataset, load_model

    train_ds = load_dataset(train=True, object_type='VisionData')
    test_ds = load_dataset(train=False, object_type='VisionData')
    model = load_model(pretrained=True)





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    Downloading: "https://github.com/ultralytics/yolov5/archive/v6.1.zip" to /home/runner/.cache/torch/hub/v6.1.zip
    Downloading https://github.com/ultralytics/yolov5/releases/download/v6.1/yolov5s.pt to yolov5s.pt...
      0%|          | 0.00/14.1M [00:00<?, ?B/s]    100%|##########| 14.1M/14.1M [00:00<00:00, 233MB/s]





.. GENERATED FROM PYTHON SOURCE LINES 215-219

.. code-block:: default


    check = TrainTestPredictionDrift()
    check.run(train_ds, test_ds, model)





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    Validating Input:   0%| | 0/1 [00:00<?, ? /s]    Validating Input: 100%|#| 1/1 [00:13<00:00, 13.18s/ ]                                                         Ingesting Batches - Train Dataset:   0%|  | 0/2 [00:00<?, ? Batch/s]    Ingesting Batches - Train Dataset:  50%|# | 1/2 [00:06<00:06,  6.56s/ Batch]    Ingesting Batches - Train Dataset: 100%|##| 2/2 [00:13<00:00,  6.58s/ Batch]                                                                                Ingesting Batches - Test Dataset:   0%|  | 0/2 [00:00<?, ? Batch/s]    Ingesting Batches - Test Dataset:  50%|# | 1/2 [00:06<00:06,  6.51s/ Batch]    Ingesting Batches - Test Dataset: 100%|##| 2/2 [00:13<00:00,  6.54s/ Batch]                                                                               Computing Check:   0%| | 0/1 [00:00<?, ? Check/s]    Computing Check: 100%|#| 1/1 [00:00<00:00,  7.96 Check/s]                                                         

.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">

    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"
        integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer">
    </script>

    <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
    <script type="text/javascript">if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>
    <script type="text/javascript">
        if (typeof require !== 'undefined') {
            require.undef("plotly");
            requirejs.config({
                paths: {'plotly': ['https://cdn.plot.ly/plotly-2.8.3.min']}
            });
            require(
                ['plotly'],
                function(Plotly) {
                    window._Plotly = Plotly;
                    window.Plotly = Plotly;
                    console.log('Loaded plotly successfully');
                },
                function() {console.log('Failed to load plotly')}
            );
        } else {
            console.log('requirejs is not present');
        }
    </script>
    <h4><b>Train Test Prediction Drift</b></h4><p>    Calculate prediction drift between train dataset and test dataset, using statistical measures.</p><h5><b>Additional Outputs</b></h5><div><span>The Drift score is a measure for the difference between two distributions. In this check, drift is measured for the distribution of the following prediction properties: ['Samples Per Class', 'Bounding Box Area (in pixels)', 'Number of Bounding Boxes Per Image'].</span></div><div>                            <div id="11185b9b-92d1-4767-8954-a5abb57b9ee2" class="plotly-graph-div" style="height:400px; width:700px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("11185b9b-92d1-4767-8954-a5abb57b9ee2")) {                    Plotly.newPlot(                        "11185b9b-92d1-4767-8954-a5abb57b9ee2",                        [{"base":0,"marker":{"color":"#01B8AA"},"offsetgroup":"0","orientation":"h","showlegend":false,"x":[0.1],"y":["Drift Score"],"type":"bar","xaxis":"x","yaxis":"y"},{"base":0.1,"marker":{"color":"#F2C80F"},"offsetgroup":"0","orientation":"h","showlegend":false,"x":[0.1],"y":["Drift Score"],"type":"bar","xaxis":"x","yaxis":"y"},{"base":0.2,"marker":{"color":"#FE9666"},"offsetgroup":"0","orientation":"h","showlegend":false,"x":[0.09999999999999998],"y":["Drift Score"],"type":"bar","xaxis":"x","yaxis":"y"},{"base":0.3,"marker":{"color":"#FD625E"},"offsetgroup":"0","orientation":"h","showlegend":false,"x":[0.10756603291989075],"y":["Drift Score"],"type":"bar","xaxis":"x","yaxis":"y"},{"marker":{"color":"#00008b"},"name":"Train Dataset","x":["book","bowl","chair","donut","knife","person","spoon","teddy bear","umbrella","wine glass"],"y":[0.009237875288683603,0.04157043879907621,0.03233256351039261,0.0,0.03695150115473441,0.279445727482679,0.03002309468822171,0.004618937644341801,0.03464203233256351,0.04387990762124711],"type":"bar","xaxis":"x2","yaxis":"y2"},{"marker":{"color":"#69b3a2"},"name":"Test Dataset","x":["book","bowl","chair","donut","knife","person","spoon","teddy bear","umbrella","wine glass"],"y":[0.03559870550161812,0.009708737864077669,0.08090614886731391,0.061488673139158574,0.0,0.313915857605178,0.003236245954692557,0.03559870550161812,0.0,0.006472491909385114],"type":"bar","xaxis":"x2","yaxis":"y2"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"showgrid":false,"gridcolor":"black","linecolor":"black","range":[0,0.5075660329198908],"dtick":0.05,"fixedrange":true},"yaxis":{"anchor":"x","domain":[0.9400000000000001,1.0],"showgrid":false,"showline":false,"showticklabels":false,"zeroline":false,"color":"black","fixedrange":true},"xaxis2":{"anchor":"y2","domain":[0.0,1.0],"type":"category"},"yaxis2":{"anchor":"x2","domain":[0.26,0.74],"fixedrange":true,"range":[0,0.3453074433656958],"title":{"text":"Frequency"}},"xaxis3":{"anchor":"y3","domain":[0.0,1.0]},"yaxis3":{"anchor":"x3","domain":[0.0,0.06]},"annotations":[{"font":{"size":16},"showarrow":false,"text":"Drift Score (Cramer's V)","x":0.5,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Distribution Plot","x":0.5,"xanchor":"center","xref":"paper","y":0.74,"yanchor":"bottom","yref":"paper"},{"showarrow":false,"text":"* Showing the top 10 largest difference between categories out of total 66 categories.<br>Shown data is 51.27% of train data and 54.69% of test data.","x":0,"xanchor":"left","xref":"paper","y":-0.2,"yref":"paper"}],"legend":{"title":{"text":"Legend"},"yanchor":"top","y":0.6},"title":{"text":"Samples Per Class","x":0.5,"xanchor":"center"},"width":700,"height":400,"bargroupgap":0},                        {"responsive": true}                    ).then(function(){
                            
    var gd = document.getElementById('11185b9b-92d1-4767-8954-a5abb57b9ee2');
    var x = new MutationObserver(function (mutations, observer) {{
            var display = window.getComputedStyle(gd).display;
            if (!display || display === 'none') {{
                console.log([gd, 'removed!']);
                Plotly.purge(gd);
                observer.disconnect();
            }}
    }});

    // Listen for the removal of the full notebook cells
    var notebookContainer = gd.closest('#notebook-container');
    if (notebookContainer) {{
        x.observe(notebookContainer, {childList: true});
    }}

    // Listen for the clearing of the current output cell
    var outputEl = gd.closest('.output');
    if (outputEl) {{
        x.observe(outputEl, {childList: true});
    }}

                            })                };                });            </script>        </div><div>                            <div id="8271cc41-c463-4f45-b95c-993646d85b76" class="plotly-graph-div" style="height:400px; width:700px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("8271cc41-c463-4f45-b95c-993646d85b76")) {                    Plotly.newPlot(                        "8271cc41-c463-4f45-b95c-993646d85b76",                        [{"base":0,"marker":{"color":"#01B8AA"},"offsetgroup":"0","orientation":"h","showlegend":false,"x":[0.08510928961748633],"y":["Drift Score"],"type":"bar","xaxis":"x","yaxis":"y"},{"fill":"tozeroy","line":{"color":"#00008b","shape":"spline"},"name":"Train Dataset","x":[0.0,0.26,0.7346938775510204,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.1199999999999992,1.469387755102041,1.8199999999999985,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.2040816326530615,2.6400000000000006,2.719999999999999,2.938775510204082,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.673469387755102,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.408163265306123,4.799999999999997,4.828125,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.142857142857143,5.3600000000000065,5.799999999999997,5.877551020408164,6.0,6.0,6.32,6.612244897959184,6.765625,6.880000000000003,7.0,7.0,7.140000000000001,7.346938775510204,8.0,8.0,8.0,8.0,8.081632653061225,8.660000000000004,8.816326530612246,8.880000000000003,9.280000000000001,9.551020408163266,9.920000000000002,10.0,10.0,10.285714285714286,10.700000000000003,11.0,11.0,11.0,11.020408163265307,11.755102040816327,11.96,12.0,12.489795918367347,12.960000000000008,13.18,13.224489795918368,13.959183673469388,14.693877551020408,14.879999999999995,15.428571428571429,16.16326530612245,16.700000000000003,16.89795918367347,16.960000000000008,17.63265306122449,17.96,18.367346938775512,19.102040816326532,19.836734693877553,20.440000000000012,20.571428571428573,21.306122448979593,22.040816326530614,22.480000000000004,22.775510204081634,23.510204081632654,23.740000000000002,24.244897959183675,24.979591836734695,25.714285714285715,26.448979591836736,27.183673469387756,27.918367346938776,28.653061224489797,29.387755102040817,30.122448979591837,30.857142857142858,31.591836734693878,32.3265306122449,33.06122448979592,33.79591836734694,34.53061224489796,35.26530612244898,36.0],"y":[0.05610123294035901,0.06381952447485155,0.07778826147644105,0.08511454332468843,0.08511454332468843,0.08511454332468843,0.08511454332468843,0.08511454332468843,0.08511454332468843,0.08511454332468843,0.08511454332468843,0.08511454332468843,0.08511454332468843,0.08511454332468843,0.08511454332468843,0.08511454332468843,0.08511454332468843,0.08511454332468843,0.08511454332468843,0.088229771535155,0.09635077449433276,0.10272210866018933,0.10518087708721663,0.10518087708721663,0.10518087708721663,0.10518087708721663,0.10518087708721663,0.10518087708721663,0.10518087708721663,0.10518087708721663,0.10518087708721663,0.10518087708721663,0.10518087708721663,0.10518087708721663,0.10518087708721663,0.10518087708721663,0.10518087708721663,0.10724679673299384,0.10900773339814852,0.10894219257093449,0.10817702025820225,0.10781546848483356,0.10781546848483356,0.10781546848483356,0.10781546848483356,0.10781546848483356,0.10781546848483356,0.10781546848483356,0.10781546848483356,0.10781546848483356,0.10781546848483356,0.10781546848483356,0.10781546848483356,0.10781546848483356,0.10781546848483356,0.10025927150476563,0.09485723538286599,0.09485723538286599,0.09485723538286599,0.09485723538286599,0.09485723538286599,0.09485723538286599,0.09485723538286599,0.08734092475734596,0.07997984659376547,0.07946153970183498,0.07634940558762725,0.07634940558762725,0.07634940558762725,0.07634940558762725,0.07634940558762725,0.07634940558762725,0.07634940558762725,0.07634940558762725,0.07385078234349145,0.07024002266641008,0.0637243980750046,0.06269238225424205,0.06113265539380002,0.06113265539380002,0.05743711469084275,0.05448415909781707,0.053066955495643865,0.05205939608437632,0.05104106201650721,0.05104106201650721,0.049895445063160807,0.048268152976108446,0.04342328525045804,0.04342328525045804,0.04342328525045804,0.04342328525045804,0.042833812468249965,0.03872449469148295,0.03764096379731339,0.03720434351348881,0.03454058752495398,0.032829679966748605,0.030638568012003854,0.030184393304365294,0.030184393304365294,0.028617860320449308,0.026473225828597673,0.024984208880769285,0.024984208880769285,0.024984208880769285,0.02488423614007306,0.021354084555531092,0.02039300389832054,0.020207114459372528,0.018001145622570592,0.016076597936934826,0.015270207817595579,0.015115696870330292,0.013039029891358597,0.011910267486442052,0.011763353167049344,0.011580908604896812,0.011656620395629152,0.011689522488716906,0.011660710435360865,0.011645738451928721,0.011287595836958195,0.01099715099678364,0.010574450727590563,0.009839620974065084,0.00944682503899846,0.009516387665292846,0.009577085604382472,0.01011438267911529,0.010659811601012415,0.010769838795549337,0.010687987500392229,0.009820496268024859,0.009354145416394394,0.008063887878679203,0.005821493390394606,0.0036542825453788285,0.001978611066442813,0.0009183788503166757,0.00036367923652164233,0.00012280523460511794,3.752182722308794e-05,2.050952437093256e-05,4.7673715881299806e-05,0.0001462351233216187,0.00038792227972351325,0.0008630326098501642,0.0016075622045391479,0.0025068417913412418,0.0032726719998471794,0.0035767973433273224],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"line":{"color":"#00008b","dash":"dash"},"mode":"lines+markers","name":"Train Mean","x":[6.765625,6.765625],"y":[0,0.053066955495643865],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"line":{"color":"#00008b"},"mode":"lines","name":"Train Median","x":[4.0,4.0],"y":[0,0.09485723538286599],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"fill":"tozeroy","line":{"color":"#69b3a2","shape":"spline"},"name":"Test Dataset","x":[0.0,0.26,0.7346938775510204,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.1199999999999992,1.469387755102041,1.8199999999999985,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.2040816326530615,2.6400000000000006,2.719999999999999,2.938775510204082,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.673469387755102,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.408163265306123,4.799999999999997,4.828125,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.142857142857143,5.3600000000000065,5.799999999999997,5.877551020408164,6.0,6.0,6.32,6.612244897959184,6.765625,6.880000000000003,7.0,7.0,7.140000000000001,7.346938775510204,8.0,8.0,8.0,8.0,8.081632653061225,8.660000000000004,8.816326530612246,8.880000000000003,9.280000000000001,9.551020408163266,9.920000000000002,10.0,10.0,10.285714285714286,10.700000000000003,11.0,11.0,11.0,11.020408163265307,11.755102040816327,11.96,12.0,12.489795918367347,12.960000000000008,13.18,13.224489795918368,13.959183673469388,14.693877551020408,14.879999999999995,15.428571428571429,16.16326530612245,16.700000000000003,16.89795918367347,16.960000000000008,17.63265306122449,17.96,18.367346938775512,19.102040816326532,19.836734693877553,20.440000000000012,20.571428571428573,21.306122448979593,22.040816326530614,22.480000000000004,22.775510204081634,23.510204081632654,23.740000000000002,24.244897959183675,24.979591836734695,25.714285714285715,26.448979591836736,27.183673469387756,27.918367346938776,28.653061224489797,29.387755102040817,30.122448979591837,30.857142857142858,31.591836734693878,32.3265306122449,33.06122448979592,33.79591836734694,34.53061224489796,35.26530612244898,36.0],"y":[0.07708549336368418,0.09387302834913377,0.12257165159545692,0.13535320909936094,0.13535320909936094,0.13535320909936094,0.13535320909936094,0.13535320909936094,0.13535320909936094,0.13535320909936094,0.13535320909936094,0.13535320909936094,0.13535320909936094,0.13535320909936094,0.13535320909936094,0.13535320909936094,0.13535320909936094,0.13535320909936094,0.13535320909936094,0.1399961614762229,0.14880369028160081,0.1503469435073722,0.1485345894977763,0.1485345894977763,0.1485345894977763,0.1485345894977763,0.1485345894977763,0.1485345894977763,0.1485345894977763,0.1485345894977763,0.1485345894977763,0.1485345894977763,0.1485345894977763,0.1485345894977763,0.1485345894977763,0.1485345894977763,0.1485345894977763,0.14471452209510846,0.13229337329625016,0.12966378251486696,0.12234751149882252,0.12031515267317901,0.12031515267317901,0.12031515267317901,0.12031515267317901,0.12031515267317901,0.12031515267317901,0.12031515267317901,0.12031515267317901,0.12031515267317901,0.12031515267317901,0.12031515267317901,0.12031515267317901,0.12031515267317901,0.12031515267317901,0.10088826952932305,0.0940406722761015,0.0940406722761015,0.0940406722761015,0.0940406722761015,0.0940406722761015,0.0940406722761015,0.0940406722761015,0.08716996437441749,0.08099096130509814,0.08052756688778683,0.07758578126901339,0.07758578126901339,0.07758578126901339,0.07758578126901339,0.07758578126901339,0.07758578126901339,0.07758578126901339,0.07758578126901339,0.0749756285751522,0.0707049073763711,0.06119736822584567,0.05946886787537226,0.05675199718604064,0.05675199718604064,0.04993755555530803,0.0444043443678585,0.04185919987001099,0.04013987353920888,0.03850499224217903,0.03850499224217903,0.03681743429868333,0.03474835766917931,0.0312264276633861,0.0312264276633861,0.0312264276633861,0.0312264276633861,0.03106867103787688,0.03136677884627897,0.031781505324942824,0.03197760865707125,0.03339282277496849,0.034311610094197184,0.03513667661781945,0.035221180132974705,0.035221180132974705,0.03520041022288543,0.03426623098458405,0.03299094215251361,0.03299094215251361,0.03299094215251361,0.032888208056947345,0.028064780129537985,0.026385504623324646,0.02604387236530841,0.021602086880805584,0.017237775448365373,0.015310119970056253,0.014935051810844303,0.009611235026620585,0.0057809796563957115,0.005011321434872347,0.00329127494086319,0.002612577799683119,0.003281690098429536,0.003681605848012118,0.003814034347168678,0.00505923551684957,0.005274199961359798,0.00501685764753632,0.0034137659430851356,0.0015837571905902245,0.000632757462862628,0.0005006924230294028,0.00010983861780282312,3.5737097879695526e-05,6.829027513107932e-05,0.00013183619887329815,0.0005798807496959089,0.0008548084534200857,0.001757797758471061,0.0036302083901978764,0.005106811470924008,0.004893533198627256,0.003194108610730064,0.0014201402832347365,0.0004300978189795066,8.872738057192649e-05,1.2468164025144073e-05,1.1934432710896949e-06,7.781359492382282e-08,3.4559194065891404e-09,1.0455051073252636e-10,2.1544833288329028e-12,3.024228094831941e-14,2.8916143803534905e-16,1.883304892543951e-18],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"line":{"color":"#69b3a2","dash":"dash"},"mode":"lines+markers","name":"Test Mean","x":[4.828125,4.828125],"y":[0,0.08052756688778683],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"line":{"color":"#69b3a2"},"mode":"lines","name":"Test Median","x":[3.0,3.0],"y":[0,0.12031515267317901],"type":"scatter","xaxis":"x2","yaxis":"y2"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"showgrid":false,"gridcolor":"black","linecolor":"black","range":[0,0.4],"dtick":0.05,"fixedrange":true},"yaxis":{"anchor":"x","domain":[0.9200000000000002,1.0],"showgrid":false,"showline":false,"showticklabels":false,"zeroline":false,"color":"black","fixedrange":true},"xaxis2":{"anchor":"y2","domain":[0.0,1.0],"fixedrange":false,"range":[0.26,23.740000000000002],"title":{"text":"Number of Bounding Boxes Per Image"}},"yaxis2":{"anchor":"x2","domain":[0.0,0.7200000000000001],"title":{"text":"Probability Density"},"fixedrange":true},"annotations":[{"font":{"size":16},"showarrow":false,"text":"Drift Score (Earth Mover's Distance)","x":0.5,"xanchor":"center","xref":"paper","y":1.0000000000000002,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Distribution Plot","x":0.5,"xanchor":"center","xref":"paper","y":0.7200000000000001,"yanchor":"bottom","yref":"paper"}],"legend":{"title":{"text":"Legend"},"yanchor":"top","y":0.6},"title":{"text":"Number of Bounding Boxes Per Image","x":0.5,"xanchor":"center"},"width":700,"height":400,"bargroupgap":0},                        {"responsive": true}                    ).then(function(){
                            
    var gd = document.getElementById('8271cc41-c463-4f45-b95c-993646d85b76');
    var x = new MutationObserver(function (mutations, observer) {{
            var display = window.getComputedStyle(gd).display;
            if (!display || display === 'none') {{
                console.log([gd, 'removed!']);
                Plotly.purge(gd);
                observer.disconnect();
            }}
    }});

    // Listen for the removal of the full notebook cells
    var notebookContainer = gd.closest('#notebook-container');
    if (notebookContainer) {{
        x.observe(notebookContainer, {childList: true});
    }}

    // Listen for the clearing of the current output cell
    var outputEl = gd.closest('.output');
    if (outputEl) {{
        x.observe(outputEl, {childList: true});
    }}

                            })                };                });            </script>        </div><div>                            <div id="fca7322d-a205-483a-8d01-e0d10efd4d63" class="plotly-graph-div" style="height:400px; width:700px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("fca7322d-a205-483a-8d01-e0d10efd4d63")) {                    Plotly.newPlot(                        "fca7322d-a205-483a-8d01-e0d10efd4d63",                        [{"base":0,"marker":{"color":"#01B8AA"},"offsetgroup":"0","orientation":"h","showlegend":false,"x":[0.012382226353638778],"y":["Drift Score"],"type":"bar","xaxis":"x","yaxis":"y"},{"fill":"tozeroy","line":{"color":"#00008b","shape":"spline"},"name":"Train Dataset","x":[37.10152053833008,109.18061737060548,147.66595703125,181.2833728027344,213.46283630371096,244.24033874511719,288.14108398437503,309.65568359375,374.72764770507814,379.43372192382816,467.1339294433594,494.3512072753906,532.7772607421875,544.8546728515624,562.3316284179688,603.9962133789062,628.3988452148437,637.8614135742187,669.3128588867188,752.3986791992188,759.5678955078125,818.9573657226562,830.2332397460938,957.7402099609377,993.8692431640628,1035.0429345703126,1121.358291015625,1162.31623046875,1178.1069580078126,1357.6387207031255,1370.4970947265638,1473.6454980468752,1748.799970703126,1764.7789746093754,1933.3173925781252,2012.6846044921879,2183.728701171875,2219.340537109375,2429.678076171875,2479.6697265625003,2793.8089941406256,3041.2425292968755,3177.590546875001,3530.415078125,3695.599550781251,4062.9818945312513,4222.736503906251,4431.60302734375,4431.60302734375,4704.6548046875005,5040.591230468752,5298.790332031256,5387.07982421875,5701.75390625,5701.75390625,6041.72478515625,6195.580312500001,6281.842433384487,6728.5634375,7020.938710937503,7028.342968750004,7611.1046679687515,7924.261230468749,8076.225390624997,8604.1113671875,9676.7524609375,9747.056367187504,10556.039843750003,10738.5155859375,11979.08296875,12017.2716796875,12442.553945312502,12526.583346230644,13899.80703125,13962.663085937505,15166.429726562508,15433.051328125006,16740.29375,16809.849296874992,18771.3242590768,18826.20234375001,19484.693593749995,21219.120546875005,23049.182265625008,23160.246963668364,24051.048437500005,24538.886398747516,25016.065171922957,25324.578125000007,25935.509062500012,29840.023515625002,31260.806084769116,35292.08835937511,37505.54699761527,39823.90906250012,43344.17265624999,43750.287910461426,49268.03749999996,49280.92265625014,49995.028823307584,55662.33937500009,56239.76973615374,62484.5106489999,66033.14531250001,68729.25156184606,74973.9924746922,76707.20781249982,79222.73937499999,81218.73338753836,87463.47430038452,93708.21521323068,99952.95612607684,102869.61312500012,104042.136875,106197.697038923,112442.43795176916,118687.17886461531,120834.44781250028,124931.91977746147,131176.66069030762,136103.301875,137421.4016031538,139968.6715625004,143666.14251599993,149910.88342884608,156155.62434169225,162400.3652545384,168645.10616738457,174889.8470802307,181134.5879930769,187379.32890592303,193624.0698187692,199868.81073161535,205293.40125000002,206113.5516444615,212358.29255730766,218603.0334701538,224847.77438299998,231092.51529584613,237337.2562086923,243581.99712153844,249826.73803438462,250191.86499999967,256071.47894723076,262316.2198600769,268560.9607729231,274805.70168576925,281050.44259861537,287295.18351146154,293539.9244243077,299784.6653371538,306029.40625],"y":[2.256402549090777e-05,2.2603686206768522e-05,2.2624610699105027e-05,2.2642744709226243e-05,2.2659977173152935e-05,2.2676343436068627e-05,2.2699492376797094e-05,2.2710752866072555e-05,2.274447279953906e-05,2.2746891727743237e-05,2.2791481232844338e-05,2.280513036226798e-05,2.2824247703099724e-05,2.2830219319393762e-05,2.2838829327853648e-05,2.2859205430156927e-05,2.2871041317751665e-05,2.287561134675904e-05,2.2890722482104432e-05,2.293005918933127e-05,2.293341373126922e-05,2.2960959459198465e-05,2.296614030119504e-05,2.3023631487578723e-05,2.3039555229059483e-05,2.3057504515483305e-05,2.3094447072816975e-05,2.3111651179345007e-05,2.3118227863597163e-05,2.319079830656886e-05,2.319584008697217e-05,2.3235527952761123e-05,2.333478359060921e-05,2.3340250713009798e-05,2.3395920499705165e-05,2.342087099145519e-05,2.347187708171351e-05,2.3482020528436745e-05,2.3538574129584797e-05,2.355116905989681e-05,2.3622849658762464e-05,2.367021743272943e-05,2.369288742725441e-05,2.374021567933275e-05,2.3756752953809075e-05,2.378069397658072e-05,2.3785589002218723e-05,2.3786961320586383e-05,2.3786961320586383e-05,2.378019370517211e-05,2.3758633744728166e-05,2.373221442405453e-05,2.3721230200971514e-05,2.367405939685149e-05,2.367405939685149e-05,2.3609154809421478e-05,2.357507855175505e-05,2.3554702699062423e-05,2.3434757062922358e-05,2.3343366582688745e-05,2.334092181800744e-05,2.3128708527506322e-05,2.2998881744079893e-05,2.2932013086721394e-05,2.268065308253235e-05,2.2083792784278107e-05,2.20408849963743e-05,2.1516278446508162e-05,2.1390480297824157e-05,2.047051242366137e-05,2.0440553268072e-05,2.0101019619070077e-05,2.0032702668640905e-05,1.886685746591414e-05,1.8811560082983705e-05,1.7728393126816396e-05,1.748350754018556e-05,1.626802090319169e-05,1.6202954126170895e-05,1.4374808819486028e-05,1.4324214792361779e-05,1.3721309456838397e-05,1.2182790739119714e-05,1.0665324163931494e-05,1.0577367073686528e-05,9.890509089142045e-06,9.528822038705719e-06,9.185247472088404e-06,8.968573240315709e-06,8.552316117517795e-06,6.297385594099825e-06,5.6455829969953115e-06,4.228721672396816e-06,3.6829568074888535e-06,3.252138213005753e-06,2.810222110244239e-06,2.7721533928882845e-06,2.4244798917936917e-06,2.4239268977348344e-06,2.3944337825960637e-06,2.2041883988134456e-06,2.186162796495497e-06,1.9761524034420077e-06,1.8419776123989961e-06,1.7356441956047166e-06,1.4895371158568536e-06,1.4240325234001131e-06,1.332776067907752e-06,1.2641838504226228e-06,1.0751757749578391e-06,9.270751970707216e-07,8.145707620551959e-07,7.706158507049587e-07,7.539209598011453e-07,7.241591584065813e-07,6.395536011086141e-07,5.494228757261404e-07,5.165077197372633e-07,4.5217952325018233e-07,3.593280809140676e-07,3.037575943405153e-07,2.9312028690693003e-07,2.7846150547297205e-07,2.712798869309981e-07,2.905897338220251e-07,3.255566860721612e-07,3.430148687953824e-07,3.2520442588213027e-07,2.8501175011417997e-07,2.5546540324780155e-07,2.6025550143658727e-07,2.927141592592471e-07,3.2243969834448225e-07,3.2557995643590675e-07,3.2389407377951185e-07,2.96731752408839e-07,2.5513844342462885e-07,2.0674297259015638e-07,1.5375082417001e-07,1.0662253085203563e-07,8.081625759290901e-08,8.072229865105951e-08,8.134703469093388e-08,9.74073214537368e-08,1.2487910164974112e-07,1.6981722556563517e-07,2.3500376010637538e-07,2.9745580093158714e-07,3.1997965125637616e-07,2.8836285455354895e-07,2.2346014314730716e-07,1.5484628992169347e-07],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"line":{"color":"#00008b","dash":"dash"},"mode":"lines+markers","name":"Train Mean","x":[23160.246963668364,23160.246963668364],"y":[0,1.0577367073686528e-05],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"line":{"color":"#00008b"},"mode":"lines","name":"Train Median","x":[4431.60302734375,4431.60302734375],"y":[0,2.3786961320586383e-05],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"fill":"tozeroy","line":{"color":"#69b3a2","shape":"spline"},"name":"Test Dataset","x":[37.10152053833008,109.18061737060548,147.66595703125,181.2833728027344,213.46283630371096,244.24033874511719,288.14108398437503,309.65568359375,374.72764770507814,379.43372192382816,467.1339294433594,494.3512072753906,532.7772607421875,544.8546728515624,562.3316284179688,603.9962133789062,628.3988452148437,637.8614135742187,669.3128588867188,752.3986791992188,759.5678955078125,818.9573657226562,830.2332397460938,957.7402099609377,993.8692431640628,1035.0429345703126,1121.358291015625,1162.31623046875,1178.1069580078126,1357.6387207031255,1370.4970947265638,1473.6454980468752,1748.799970703126,1764.7789746093754,1933.3173925781252,2012.6846044921879,2183.728701171875,2219.340537109375,2429.678076171875,2479.6697265625003,2793.8089941406256,3041.2425292968755,3177.590546875001,3530.415078125,3695.599550781251,4062.9818945312513,4222.736503906251,4431.60302734375,4431.60302734375,4704.6548046875005,5040.591230468752,5298.790332031256,5387.07982421875,5701.75390625,5701.75390625,6041.72478515625,6195.580312500001,6281.842433384487,6728.5634375,7020.938710937503,7028.342968750004,7611.1046679687515,7924.261230468749,8076.225390624997,8604.1113671875,9676.7524609375,9747.056367187504,10556.039843750003,10738.5155859375,11979.08296875,12017.2716796875,12442.553945312502,12526.583346230644,13899.80703125,13962.663085937505,15166.429726562508,15433.051328125006,16740.29375,16809.849296874992,18771.3242590768,18826.20234375001,19484.693593749995,21219.120546875005,23049.182265625008,23160.246963668364,24051.048437500005,24538.886398747516,25016.065171922957,25324.578125000007,25935.509062500012,29840.023515625002,31260.806084769116,35292.08835937511,37505.54699761527,39823.90906250012,43344.17265624999,43750.287910461426,49268.03749999996,49280.92265625014,49995.028823307584,55662.33937500009,56239.76973615374,62484.5106489999,66033.14531250001,68729.25156184606,74973.9924746922,76707.20781249982,79222.73937499999,81218.73338753836,87463.47430038452,93708.21521323068,99952.95612607684,102869.61312500012,104042.136875,106197.697038923,112442.43795176916,118687.17886461531,120834.44781250028,124931.91977746147,131176.66069030762,136103.301875,137421.4016031538,139968.6715625004,143666.14251599993,149910.88342884608,156155.62434169225,162400.3652545384,168645.10616738457,174889.8470802307,181134.5879930769,187379.32890592303,193624.0698187692,199868.81073161535,205293.40125000002,206113.5516444615,212358.29255730766,218603.0334701538,224847.77438299998,231092.51529584613,237337.2562086923,243581.99712153844,249826.73803438462,250191.86499999967,256071.47894723076,262316.2198600769,268560.9607729231,274805.70168576925,281050.44259861537,287295.18351146154,293539.9244243077,299784.6653371538,306029.40625],"y":[2.1476788357396626e-05,2.151649996174479e-05,2.153749648272704e-05,2.1555719006432578e-05,2.157305858191025e-05,2.1589547796010233e-05,2.1612906847387167e-05,2.1624285231792143e-05,2.165842157345113e-05,2.1660874106644762e-05,2.1706176106501013e-05,2.1720079675632383e-05,2.1739583146367965e-05,2.174568263425624e-05,2.1754483198398877e-05,2.1775339905980086e-05,2.1787474514757165e-05,2.179216380569056e-05,2.1807685109240664e-05,2.184820726398335e-05,2.1851671027819442e-05,2.188016393426125e-05,2.1885533158527738e-05,2.194534455929065e-05,2.1961989250842628e-05,2.198079437182106e-05,2.2019649432811975e-05,2.2037817136944944e-05,2.2044774965409134e-05,2.212205624066221e-05,2.2127462046375363e-05,2.2170198853504907e-05,2.2278707002275503e-05,2.2284761405597275e-05,2.2346958826549925e-05,2.2375193821867852e-05,2.2433735331183293e-05,2.244552601131426e-05,2.2512357344522066e-05,2.252753257733368e-05,2.261662797519197e-05,2.2679158270630235e-05,2.2710721777531183e-05,2.2782813728870933e-05,2.2811800193782152e-05,2.2865342554747567e-05,2.2883917375183675e-05,2.2903896919833395e-05,2.2903896919833395e-05,2.2922661884891203e-05,2.293433530786412e-05,2.2934776214051684e-05,2.293323140307411e-05,2.292072611182615e-05,2.292072611182615e-05,2.289499894772729e-05,2.2879214841114522e-05,2.2869242702015702e-05,2.2804797551787102e-05,2.27511192169773e-05,2.2749642929531772e-05,2.2615582160488937e-05,2.2529191706280442e-05,2.2483724486545895e-05,2.23081548509834e-05,2.1870545128428274e-05,2.1838245182636018e-05,2.1436425493017823e-05,2.133839975857595e-05,2.0605831855670898e-05,2.0581564559321582e-05,2.0304934731693557e-05,2.0248930302072397e-05,1.92771012600036e-05,1.923029975977031e-05,1.830175729189881e-05,1.8088836113507582e-05,1.7016445033091732e-05,1.6958321389855754e-05,1.52959397323849e-05,1.5249127400752754e-05,1.4687910346624887e-05,1.3226922725631307e-05,1.1743080332235544e-05,1.1655685624720995e-05,1.096768714127559e-05,1.060132289351458e-05,1.0250581048122084e-05,1.0027976152799748e-05,9.597144151091168e-06,7.178619694458794e-06,6.445840613205087e-06,4.766606731797707e-06,4.065098310100148e-06,3.466544134852683e-06,2.7663746547924773e-06,2.6986197244564985e-06,1.966781597252682e-06,1.965401060651518e-06,1.8907722772668447e-06,1.4064853806692781e-06,1.3660403446453251e-06,1.0110544494586948e-06,8.682899524533262e-07,7.850233850430484e-07,6.695075721202969e-07,6.559042388322869e-07,6.499821637727716e-07,6.564964885503211e-07,7.319783099585312e-07,8.592148026876838e-07,9.898203681733373e-07,1.0415297280471807e-06,1.0599557833742846e-06,1.0900058670696197e-06,1.1476105526989015e-06,1.1577031841307887e-06,1.148628408147638e-06,1.11102800070775e-06,9.99718561779652e-07,8.707018728983847e-07,8.316194857466536e-07,7.525683377710221e-07,6.338908137502643e-07,4.4176986255211444e-07,2.872925874768365e-07,1.9366247392561693e-07,1.6642605136304524e-07,1.8399902645289882e-07,2.0464900275254036e-07,1.9379300941162273e-07,1.4792441047290127e-07,9.034824488911108e-08,5.1069477767777526e-08,4.67114298380622e-08,2.921596047513294e-08,4.005050810278822e-08,8.035282285218211e-08,1.5203842794110934e-07,2.5253240064964253e-07,3.6713828949934745e-07,4.659750760353708e-07,4.705026069939949e-07,5.155860547444826e-07,5.018327222136848e-07,4.398006885988598e-07,3.5891390933297534e-07,2.827026557501623e-07,2.208683351991603e-07,1.7101076757604828e-07,1.2580429406588356e-07,8.252960059011677e-08],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"line":{"color":"#69b3a2","dash":"dash"},"mode":"lines+markers","name":"Test Mean","x":[24538.886398747516,24538.886398747516],"y":[0,1.060132289351458e-05],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"line":{"color":"#69b3a2"},"mode":"lines","name":"Test Median","x":[5701.75390625,5701.75390625],"y":[0,2.292072611182615e-05],"type":"scatter","xaxis":"x2","yaxis":"y2"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"showgrid":false,"gridcolor":"black","linecolor":"black","range":[0,0.4],"dtick":0.05,"fixedrange":true},"yaxis":{"anchor":"x","domain":[0.9200000000000002,1.0],"showgrid":false,"showline":false,"showticklabels":false,"zeroline":false,"color":"black","fixedrange":true},"xaxis2":{"anchor":"y2","domain":[0.0,1.0],"fixedrange":false,"range":[109.18061737060548,250191.86499999967],"title":{"text":"Bounding Box Area (in pixels)"}},"yaxis2":{"anchor":"x2","domain":[0.0,0.7200000000000001],"title":{"text":"Probability Density"},"fixedrange":true},"annotations":[{"font":{"size":16},"showarrow":false,"text":"Drift Score (Earth Mover's Distance)","x":0.5,"xanchor":"center","xref":"paper","y":1.0000000000000002,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Distribution Plot","x":0.5,"xanchor":"center","xref":"paper","y":0.7200000000000001,"yanchor":"bottom","yref":"paper"}],"legend":{"title":{"text":"Legend"},"yanchor":"top","y":0.6},"title":{"text":"Bounding Box Area (in pixels)","x":0.5,"xanchor":"center"},"width":700,"height":400,"bargroupgap":0},                        {"responsive": true}                    ).then(function(){
                            
    var gd = document.getElementById('fca7322d-a205-483a-8d01-e0d10efd4d63');
    var x = new MutationObserver(function (mutations, observer) {{
            var display = window.getComputedStyle(gd).display;
            if (!display || display === 'none') {{
                console.log([gd, 'removed!']);
                Plotly.purge(gd);
                observer.disconnect();
            }}
    }});

    // Listen for the removal of the full notebook cells
    var notebookContainer = gd.closest('#notebook-container');
    if (notebookContainer) {{
        x.observe(notebookContainer, {childList: true});
    }}

    // Listen for the clearing of the current output cell
    var outputEl = gd.closest('.output');
    if (outputEl) {{
        x.observe(outputEl, {childList: true});
    }}

                            })                };                });            </script>        </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 220-226

Prediction drift is detected!
-----------------------------
We can see that the COCO128 contains a drift in the out of the box dataset. In
addition to the prediction count per class, the prediction drift check for object
detection tasks include drift calculation on certain measurements, like the
bounding box area and the number of bboxes per image.


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  52.563 seconds)


.. _sphx_glr_download_checks_gallery_vision_distribution_plot_train_test_prediction_drift.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: plot_train_test_prediction_drift.py <plot_train_test_prediction_drift.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: plot_train_test_prediction_drift.ipynb <plot_train_test_prediction_drift.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
