
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

<!-- Google Tag Manager -->
<script>(function (w, d, s, l, i) {
        w[l] = w[l] || []; w[l].push({
            'gtm.start':
                new Date().getTime(), event: 'gtm.js'
        }); var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-NNKXRJQ');</script>
<!-- End Google Tag Manager -->
<meta name="title" content="Data Properties | Deepchecks Documentation">
<meta name="description" content="Data Properties | Deepchecks Documentation">
<meta name="docsearch:version" content="dev">

<!-- Warning: 
        The 'shortcut link' type is often seen before icon, but this link type is non-conforming, 
        ignored and web authors must not use it anymore. 
        MDN docs https://developer.mozilla.org/en-US/docs/Web/HTML/Link_types
    -->
<link rel="shortcut icon" href="/_static/favicons/favicon.ico">

<link rel="icon" href="/_static/favicons/favicon.png" sizes="32x32">
<link rel="icon" href="/_static/favicons/favicon.png" sizes="192x192">

<!-- Note: 
        Apple's iOS does not use this 'link' type, nor the 'sizes' attribute, 
        like others mobile browsers do, to select a webpage icon for Web Clip 
        or a start-up placeholder. Instead it uses the non-standard 'apple-touch-icon'.
        MDN docs: https://developer.mozilla.org/en-US/docs/Web/HTML/Link_types;
        Safari Web Content Guide: https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html#//apple_ref/doc/uid/TP40002051-CH3-SW4
    -->
<link rel="apple-touch-icon" href="/_static/favicons/apple-touch-icon.png" sizes="32x32">
<link rel="apple-touch-icon" href="/_static/favicons/apple-touch-icon.png" sizes="192x192">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />


    <title>Data Properties &#8212; Deepchecks ef7ffa3 documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/rtd_sphinx_search.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" crossorigin="anonymous"></script>
<script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"
    crossorigin="anonymous"></script>

    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Examples" href="../../examples/index.html" />
    <link rel="prev" title="The Object Detection Data Class" href="data-classes/DetectionData.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NNKXRJQ" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <script>
        require.config({
            paths: {
                "docsearchLib": "https://cdn.jsdelivr.net/npm/@docsearch/js@3?noext"
            }
        }

        );
        require(["docsearchLib"], function (docsearch) {
            docsearch({
                appId: "3UQ0BSGJ1N", apiKey: "83d250f88e29e9906a50ddf40a1871ce", indexName: "deepchecks", container: '#algolia-search', debug: false
            });
        });
    </script>
    
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../index.html">
  <img src="../../_static/deepchecks_logo.svg" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../getting-started/index.html">
  Installation
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../tutorials/index.html">
  Tutorials
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../index.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../examples/index.html">
  Examples
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../api/index.html">
  API Reference
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <div class="dropdown" id="version_switcher">
    <button type="button" class="btn btn-primary btn-sm navbar-btn dropdown-toggle" id="version_switcher_button" data-toggle="dropdown">
        dev  <!-- this text may get changed later by javascript -->
        <span class="caret"></span>
    </button>
    <div id="version_switcher_menu" class="dropdown-menu list-group-flush py-0" aria-labelledby="version_switcher_button">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
</div>

<!-- NOTE: this JS must live here (not in our global JS file) because it relies
     on being processed by Jinja before it is run (specifically for replacing
     variables user-guide/vision/vision_properties and {'json_url': 'https://docs.deepchecks.com/dev/_static/switcher.json', 'version_match': 'dev', 'url_template': 'https://docs.deepchecks.com/{version}/'}.
-->

<script type="text/javascript">
// Check if corresponding page path exists in other version of docs
// and, if so, go there instead of the homepage of the other docs version
function checkPageExistsAndRedirect(event) {
    const currentFilePath = "user-guide/vision/vision_properties.html",
          tryUrl = event.target.getAttribute("href");
    let otherDocsHomepage = tryUrl.replace(currentFilePath, "");
    $.ajax({
        type: 'HEAD',
        url: tryUrl,
        // if the page exists, go there
        success: function() {
            location.href = tryUrl;
        }
    }).fail(function() {
        location.href = otherDocsHomepage;
    });
    // this prevents the browser from following the href of the clicked node
    // (which is fine because this function takes care of redirecting)
    return false;
}

// Populate the version switcher from the JSON config file
(function () {
    $.getJSON("https://docs.deepchecks.com/dev/_static/switcher.json", function(data, textStatus, jqXHR) {
        const currentFilePath = "user-guide/vision/vision_properties.html";
        // create links to the corresponding page in the other docs versions
        $.each(data, function(index, entry) {
            // if no custom name specified (e.g., "latest"), use version string
            if (!("name" in entry)) {
                entry.name = entry.version;
            }
            // create the node
            const node = document.createElement("a");
            node.setAttribute("class", "list-group-item list-group-item-action py-1");
            node.textContent = `${entry.name}`;
            node.setAttribute("href", `${entry.url}${currentFilePath}`);
            // on click, AJAX calls will check if the linked page exists before
            // trying to redirect, and if not, will redirect to the homepage
            // for that version of the docs.
            node.onclick = checkPageExistsAndRedirect;
            // Add dataset values for the version and name in case people want
            // to apply CSS styling based on this information.
            node.dataset["versionName"] = entry.name;
            node.dataset["version"] = entry.version;

            $("#version_switcher_menu").append(node);
            // replace dropdown button text with the preferred display name of
            // this version, rather than using sphinx's dev variable.
            // also highlight the dropdown entry for the currently-viewed
            // version's entry
            if (entry.version == "dev") {
                node.classList.add("active");
                let btn = document.getElementById("version_switcher_button");
                btn.innerText = btn.dataset["activeVersionName"] = entry.name;
                btn.dataset["activeVersion"] = entry.version;
            }
        });
    });
})();
</script>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Quick Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/deepchecks/deepchecks" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://deepcheckscommunity.slack.com/join/shared_invite/zt-y28sjt1v-PBT50S3uoyWui_Deg5L_jg#/shared-invite/email" rel="noopener" target="_blank" title="Slack"><span><i class="fab fa-slack"></i></span>
            <label class="sr-only">Slack</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://pypi.org/project/deepchecks/" rel="noopener" target="_blank" title="PyPI"><span><i class="fab fa-python"></i></span>
            <label class="sr-only">PyPI</label></a>
        </li>
      </ul>
      </div>
      
      <div class="navbar-end-item">
        <div id="topright-dropdown-menu" class="dropdown" style="width: fit-content;">
    <a 
        class="btn dropdown-toggle" 
        id="topright-dropdown-menu-link" 
        data-toggle="dropdown" 
        aria-haspopup="true" 
        aria-expanded="false"
        data-offset="-100,10">
            <i class="fas fa-bars"></i>
    </a>
    <div class="dropdown-menu" aria-labelledby="topright-dropdown-menu-link" x-placement="bottom-start">
        <a class="dropdown-item" href="https://github.com/deepchecks/deepchecks/issues/new?title=[Docs] Documentation contains a mistake.&body=Package Version: dev;
Page: user-guide/vision/vision_properties&labels=labels=chore/documentation" target="_blank" rel="noopener noreferrer">
            <i class="fas fa-pencil-alt"></i> Report a problem
        </a>
        
            <a 
                
                    href="/_sources/user-guide/vision/vision_properties.rst.txt" 
                
                
                class="dropdown-item" 
                target="_blank" 
                rel="noopener noreferrer">
                <i class="fas fa-code"></i> Show Source
            </a>
        
    </div>
</div>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><div id="algolia-search">
<!-- <form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form> -->
</div><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-are-properties-used-for">
   What Are Properties Used For?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#deepchecks-built-in-properties">
   Deepchecks’ Built-in Properties
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#property-structure">
   Property Structure
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-method-s-input">
     The Method’s Input
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-method-s-output">
     The Method’s Output
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#properties-demonstration">
   Properties Demonstration
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#image-property">
     Image Property
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#label-property">
     Label Property
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#prediction-property">
     Prediction Property
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="data-properties">
<h1>Data Properties<a class="headerlink" href="#data-properties" title="Permalink to this headline">#</a></h1>
<p>Properties are one-dimension values that are extracted from either the images, labels or predictions. For example, an
image property is <strong>brightness</strong>, and a label property is <strong>bounding box area</strong> (for detection tasks).
Deepchecks includes <a class="reference internal" href="#deepchecks-built-in-properties"><span class="std std-ref">built-in properties</span></a> and supports implementing your own
properties.</p>
<section id="what-are-properties-used-for">
<h2>What Are Properties Used For?<a class="headerlink" href="#what-are-properties-used-for" title="Permalink to this headline">#</a></h2>
<p>Properties are used by some of the Deepchecks’ checks (e.g. train-test drift), in order to extract meaningful
features from the data, since some computations are difficult to compute directly on the images (for example drift).
Inspecting the distribution of the property’s values (e.g. to notice some images are extremely dark,
or that the aspect ratio of images is different between the train and test sets) can help uncover potential problems
in the way that the datasets were built, or hint about the model’s expected performance on unseen data.</p>
<p>Example for specific scenarios in which measuring properties may come in handy:</p>
<ol class="arabic simple">
<li><p><strong>Investigating low test performance</strong> - detecting high drift in certain properties may help you pinpoint the causes of
the model’s lower performance on the test data.</p></li>
<li><p><strong>Generalizability on new data</strong> - a drift in significant data properties,
may indicate lower ability of the model to accurately predict on the new (different) unlabeled data.</p></li>
<li><p><strong>Find weak segments</strong> - The properties can be used to segment the data and test for low performing segments.
If found, the weak segment may indicate a underrepresented segment or an area where the data quality is worse.</p></li>
<li><p><strong>Find obscure relations between the data and the targets</strong> - the model training might be affected
by properties we are not aware of, and that aren’t the core attributes of what we are aiming for it to learn.
For example, in a classification dataset of wolves and dogs photographs, if only wolves are photographed in
the snow, the brightness of the image may be used to predict the label “wolf” easily. In this case, a model
might not learn to discern wolf from dog by the animal’s characteristics, but by using the background color.</p></li>
</ol>
</section>
<section id="deepchecks-built-in-properties">
<h2>Deepchecks’ Built-in Properties<a class="headerlink" href="#deepchecks-built-in-properties" title="Permalink to this headline">#</a></h2>
<p>We divide the properties by the data that they are based on: images, labels or predictions.
You can either use the built-in properties or implement your own ones and pass them to the relevant checks.</p>
<p>The built-in image properties are:</p>
<table class="table">
<colgroup>
<col style="width: 26%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>What is it</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Aspect Ratio</p></td>
<td><p>Ratio between height and width of image (height / width)</p></td>
</tr>
<tr class="row-odd"><td><p>Area</p></td>
<td><p>Area of image in pixels (height * width)</p></td>
</tr>
<tr class="row-even"><td><p>Brightness</p></td>
<td><p>Average intensity of image pixels. Color channels have different weights according to
RGB-to-Grayscale formula</p></td>
</tr>
<tr class="row-odd"><td><p>RMS Contrast</p></td>
<td><p>Contrast of image, calculated by standard deviation of pixels</p></td>
</tr>
<tr class="row-even"><td><p>Mean Red Relative Intensity</p></td>
<td><p>Mean over all pixels of the red channel, scaled to their relative intensity in
comparison to the other channels [r / (r + g + b)].</p></td>
</tr>
<tr class="row-odd"><td><p>Mean Green Relative Intensity</p></td>
<td><p>Mean over all pixels of the green channel, scaled to their relative intensity in
comparison to the other channels [g / (r + g + b)].</p></td>
</tr>
<tr class="row-even"><td><p>Mean Blue Relative Intensity</p></td>
<td><p>Mean over all pixels of the blue channel, scaled to their relative intensity in
comparison to the other channels [b / (r + g + b)].</p></td>
</tr>
</tbody>
</table>
<p>The built-in label &amp; predictions properties are:</p>
<table class="table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>What is it</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Samples Per Class</p></td>
<td><p>The classes abundance in the data</p></td>
</tr>
<tr class="row-odd"><td><p>Bounding Box Area</p></td>
<td><p>Area of bounding boxes in pixels (height * width) for object detection</p></td>
</tr>
<tr class="row-even"><td><p>Number of Bounding Boxes Per Image</p></td>
<td><p>Number of bounding boxes in a single image for object detection</p></td>
</tr>
</tbody>
</table>
</section>
<section id="property-structure">
<h2>Property Structure<a class="headerlink" href="#property-structure" title="Permalink to this headline">#</a></h2>
<p>All property types have a similar structure, which is a dictionary with 3 keys:</p>
<ul class="simple">
<li><p><cite>name</cite> - The name of the property</p></li>
<li><p><cite>method</cite> - The callable function that calculates the property’s value. It accepts the relevant data and returns</p></li>
</ul>
<p>the values list.
- <cite>output_type</cite> - Relates to the method’s return values list, and is one of the following:</p>
<blockquote>
<div><ul class="simple">
<li><p><cite>continuous</cite> - For numeric values with continuous nature</p></li>
<li><p><cite>discrete</cite> - For numeric values with discrete nature or non-numeric values</p></li>
<li><p><cite>class_id</cite> - Means the output is of class ids. In this case we will try to translate the ids into their
corresponding class labels.</p></li>
</ul>
</div></blockquote>
<p>Each dictionary is a single property, and the checks accepts a list of those dictionaries. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">mean_image</span><span class="p">(</span><span class="n">images</span><span class="p">):</span>
  <span class="k">return</span> <span class="p">[</span><span class="n">image</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">]</span>

<span class="n">properties</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;My Image Mean&#39;</span><span class="p">,</span> <span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="n">mean_image</span><span class="p">,</span> <span class="s1">&#39;output_type&#39;</span><span class="p">:</span> <span class="s1">&#39;continuous&#39;</span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<section id="the-method-s-input">
<h3>The Method’s Input<a class="headerlink" href="#the-method-s-input" title="Permalink to this headline">#</a></h3>
<p>Each property is built for the specific data type that it runs on, and receives its deepchecks-expected format,
as demonstrated in <a class="reference internal" href="data-classes/index.html"><span class="doc">Deepchecks’ format</span></a>.
Note that prediction and label-based properties are not interchangeable due to their slightly different format, even if
they calculate similar values.</p>
</section>
<section id="the-method-s-output">
<h3>The Method’s Output<a class="headerlink" href="#the-method-s-output" title="Permalink to this headline">#</a></h3>
<p>Each property function must return a sequence in the same length as the length of the input object. This is used later
in order to couple each sample to its right properties values. In image properties we expect each image to generate a
single property value, which results in a list of primitives types in the same length as the number of images. On the
other hand for label &amp; predictions we allow each one to have multiple primitive values (for example area of bounding
box), which means the returned list may contain either primitives values or a lists of primitive values per
label/prediction.</p>
</section>
</section>
<section id="properties-demonstration">
<h2>Properties Demonstration<a class="headerlink" href="#properties-demonstration" title="Permalink to this headline">#</a></h2>
<p>We will demonstrate the 3 drift checks (for each property type) and implement the properties to pass to it.</p>
<section id="image-property">
<h3>Image Property<a class="headerlink" href="#image-property" title="Permalink to this headline">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">deepchecks.vision.checks.distribution</span> <span class="kn">import</span> <span class="n">ImagePropertyDrift</span>
<span class="kn">from</span> <span class="nn">skimage.color</span> <span class="kn">import</span> <span class="n">rgb2gray</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>


<span class="k">def</span> <span class="nf">aspect_ratio</span><span class="p">(</span><span class="n">images</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
  <span class="sd">&quot;&quot;&quot;Return list of floats of image height to width ratio.&quot;&quot;&quot;</span>
  <span class="k">return</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">_sizes</span><span class="p">(</span><span class="n">batch</span><span class="p">)]</span>

<span class="k">def</span> <span class="nf">brightness</span><span class="p">(</span><span class="n">images</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
  <span class="sd">&quot;&quot;&quot;Calculate brightness on each image in the batch.&quot;&quot;&quot;</span>
  <span class="c1"># If grayscale</span>
  <span class="k">if</span> <span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">[</span><span class="n">img</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">batch</span><span class="p">]</span>
  <span class="k">else</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">[</span><span class="n">rgb2gray</span><span class="p">(</span><span class="n">img</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">batch</span><span class="p">]</span>


  <span class="n">properties</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Aspect Ratio&#39;</span><span class="p">,</span> <span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="n">aspect_ratio</span><span class="p">,</span> <span class="s1">&#39;output_type&#39;</span><span class="p">:</span> <span class="s1">&#39;continuous&#39;</span><span class="p">},</span>
  <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Brightness&#39;</span><span class="p">,</span> <span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="n">brightness</span><span class="p">,</span> <span class="s1">&#39;output_type&#39;</span><span class="p">:</span> <span class="s1">&#39;continuous&#39;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">check</span> <span class="o">=</span> <span class="n">ImagePropertyDrift</span><span class="p">(</span><span class="n">alternative_image_properties</span><span class="o">=</span><span class="n">properties</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="label-property">
<h3>Label Property<a class="headerlink" href="#label-property" title="Permalink to this headline">#</a></h3>
<p>For label property the input varies according to the task type you are running. In this example we implement
properties which apply to the Detection task type.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">deepchecks.vision.checks.distribution</span> <span class="kn">import</span> <span class="n">TrainTestLabelDrift</span>
<span class="kn">import</span> <span class="nn">torch</span>

<span class="k">def</span> <span class="nf">number_of_labels</span><span class="p">(</span><span class="n">labels</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
  <span class="sd">&quot;&quot;&quot;Return a list containing the number of detections per sample in batch.&quot;&quot;&quot;</span>
  <span class="k">return</span> <span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">classes_in_labels</span><span class="p">(</span><span class="n">labels</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]:</span>
  <span class="sd">&quot;&quot;&quot;Return a list containing the classes in batch.&quot;&quot;&quot;</span>
  <span class="k">return</span> <span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">))[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">]</span>


  <span class="n">properties</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Labels Per Sample&#39;</span><span class="p">,</span> <span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="n">number_of_labels</span><span class="p">,</span> <span class="s1">&#39;output_type&#39;</span><span class="p">:</span> <span class="s1">&#39;discrete&#39;</span><span class="p">},</span>
  <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Classes Appearance&#39;</span><span class="p">,</span> <span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="n">classes_in_labels</span><span class="p">,</span> <span class="s1">&#39;output_type&#39;</span><span class="p">:</span> <span class="s1">&#39;class_id&#39;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">check</span> <span class="o">=</span> <span class="n">TrainTestLabelDrift</span><span class="p">(</span><span class="n">alternative_label_properties</span><span class="o">=</span><span class="n">properties</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="prediction-property">
<h3>Prediction Property<a class="headerlink" href="#prediction-property" title="Permalink to this headline">#</a></h3>
<p>Prediction property’s input, like label property, also varies by the task type you are running. In this example we
implement properties which apply to the Detection task type.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">deepchecks.vision.checks.distribution</span> <span class="kn">import</span> <span class="n">TrainTestPredictionDrift</span>
<span class="kn">import</span> <span class="nn">torch</span>

<span class="k">def</span> <span class="nf">classes_of_predictions</span><span class="p">(</span><span class="n">predictions</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]:</span>
  <span class="sd">&quot;&quot;&quot;Return a list containing the classes in batch.&quot;&quot;&quot;</span>
  <span class="k">return</span> <span class="p">[</span><span class="n">tensor</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">))[:,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="k">for</span> <span class="n">tensor</span> <span class="ow">in</span> <span class="n">predictions</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">bbox_area</span><span class="p">(</span><span class="n">predictions</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
  <span class="sd">&quot;&quot;&quot;Return a list containing the area of bboxes per image in batch.&quot;&quot;&quot;</span>
  <span class="k">return</span> <span class="p">[(</span><span class="n">prediction</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">))[:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">prediction</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">))[:,</span> <span class="mi">3</span><span class="p">])</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
           <span class="k">for</span> <span class="n">prediction</span> <span class="ow">in</span> <span class="n">predictions</span><span class="p">]</span>


<span class="n">properties</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Classes in Predictions&#39;</span><span class="p">,</span> <span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="n">classes_of_predictions</span><span class="p">,</span> <span class="s1">&#39;output_type&#39;</span><span class="p">:</span> <span class="s1">&#39;class_id&#39;</span><span class="p">},</span>
  <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Bounding Box Area&#39;</span><span class="p">,</span> <span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="n">bbox_area</span><span class="p">,</span> <span class="s1">&#39;output_type&#39;</span><span class="p">:</span> <span class="s1">&#39;continuous&#39;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">check</span> <span class="o">=</span> <span class="n">TrainTestPredictionDrift</span><span class="p">(</span><span class="n">alternative_prediction_properties</span><span class="o">=</span><span class="n">properties</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="data-classes/DetectionData.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">The Object Detection Data Class</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../../examples/index.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Examples</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2021-2022, Deepchecks.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.1+/ef7ffa3.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>